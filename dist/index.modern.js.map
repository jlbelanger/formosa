{"version":3,"file":"index.modern.js","sources":["../src/js/Helpers/JsonApi.js","../src/js/Helpers/Api.js","../src/js/FormContext.js","../src/js/Error.js","../src/js/Helpers/Options.js","../src/js/Input/Autocomplete.js","../src/js/Input/Checkbox.js","../src/js/Input/CheckboxList.js","../src/js/Helpers/Datetime.js","../src/js/Input/Select.js","../src/js/Input/Datetime.js","../src/js/Input/File.js","../src/js/ConditionalWrapper.js","../src/js/Input.js","../src/js/Input/Password.js","../src/js/Input/Radio.js","../src/js/Input/Search.js","../src/js/Input/Textarea.js","../src/js/FieldInput.js","../src/js/Helpers/FormState.js","../src/js/Input/HasMany.js","../src/js/Label.js","../src/js/Field.js","../src/js/FormosaContext.js","../src/js/Message.js","../src/js/FormInner.js","../src/js/Form.js","../src/js/Spinner.js","../src/js/Toast.js","../src/js/ToastContainer.js","../src/js/FormContainer.js","../src/js/Submit.js","../src/index.js"],"sourcesContent":["import get from 'get-value';\nimport set from 'set-value';\n\nconst findIncluded = (included, id, type, mainRecord) => {\n\tif (mainRecord && id === mainRecord.id && type === mainRecord.type) {\n\t\tconst output = {\n\t\t\tid: mainRecord.id,\n\t\t\ttype: mainRecord.type,\n\t\t};\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'attributes')) {\n\t\t\toutput.attributes = mainRecord.attributes;\n\t\t}\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'meta')) {\n\t\t\toutput.meta = mainRecord.meta;\n\t\t}\n\t\treturn output;\n\t}\n\treturn included.find((data) => (data.id === id && data.type === type));\n};\n\nconst deserializeSingle = (data, otherRows = [], included = [], mainRecord = null) => {\n\tif (!data) {\n\t\treturn data;\n\t}\n\tconst output = {\n\t\tid: data.id,\n\t\ttype: data.type,\n\t\t...data.attributes,\n\t};\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'relationships')) {\n\t\tlet includedRecord;\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\toutput[relationshipName] = data.relationships[relationshipName].data;\n\t\t\tif (Array.isArray(output[relationshipName])) {\n\t\t\t\toutput[relationshipName].forEach((rel, i) => {\n\t\t\t\t\tincludedRecord = findIncluded(included, rel.id, rel.type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tincludedRecord = findIncluded(otherRows, rel.id, rel.type, mainRecord);\n\t\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (output[relationshipName] !== null) {\n\t\t\t\tincludedRecord = findIncluded(included, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\tif (includedRecord) {\n\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t} else {\n\t\t\t\t\tincludedRecord = findIncluded(otherRows, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'meta')) {\n\t\toutput.meta = data.meta;\n\t}\n\n\treturn output;\n};\n\nexport const deserialize = (body) => {\n\tif (Array.isArray(body.data)) {\n\t\tconst output = [];\n\t\tbody.data.forEach((data) => {\n\t\t\toutput.push(deserializeSingle(data, body.data, body.included, null));\n\t\t});\n\t\treturn output;\n\t}\n\treturn deserializeSingle(body.data, [], body.included, body.data);\n};\n\nconst cleanSingleRelationship = (values) => ({\n\tid: values.id,\n\ttype: values.type,\n});\n\nconst cleanRelationship = (values) => {\n\tif (Array.isArray(values)) {\n\t\treturn values.map((value) => cleanSingleRelationship(value));\n\t}\n\treturn cleanSingleRelationship(values);\n};\n\nconst getIncluded = (data, dirtyIncluded, relationshipNames) => {\n\tconst included = [];\n\n\tconst dirtyKeys = {};\n\tdirtyIncluded.forEach((key) => {\n\t\tif (!key.startsWith('_new.')) {\n\t\t\tconst currentKeys = [];\n\t\t\tkey.split('.').forEach((k) => {\n\t\t\t\tcurrentKeys.push(k);\n\t\t\t\tif (typeof get(dirtyKeys, currentKeys.join('.')) === 'undefined') {\n\t\t\t\t\tset(dirtyKeys, currentKeys.join('.'), {});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\trelationshipNames.forEach((relationshipName) => {\n\t\tif (!Object.prototype.hasOwnProperty.call(data.relationships, relationshipName)) {\n\t\t\t// This relationship isn't defined.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Object.prototype.hasOwnProperty.call(dirtyKeys, relationshipName)) {\n\t\t\t// No related records' attributes have changed.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Array.isArray(data.relationships[relationshipName].data)) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata.relationships[relationshipName].data.forEach((rel) => {\n\t\t\tif (Object.keys(rel).length <= 2) {\n\t\t\t\t// This relationship only has an id and type.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyKeys[relationshipName], rel.id)) {\n\t\t\t\tconst relData = {\n\t\t\t\t\tid: rel.id,\n\t\t\t\t\ttype: rel.type,\n\t\t\t\t\tattributes: {},\n\t\t\t\t};\n\n\t\t\t\tif (Object.keys(dirtyKeys[relationshipName][rel.id]).length === 0) {\n\t\t\t\t\t// This is a new record; include all attributes.\n\t\t\t\t\tObject.keys(rel).forEach((key) => {\n\t\t\t\t\t\tif (key !== 'id' && key !== 'type') {\n\t\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// This is an existing record; include only the dirty attributes.\n\t\t\t\t\tObject.keys(rel).forEach((key) => {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyKeys[relationshipName][rel.id], key)) {\n\t\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tincluded.push(relData);\n\t\t\t}\n\t\t});\n\t});\n\n\treturn included;\n};\n\nexport const getBody = (\n\tmethod,\n\ttype,\n\tid,\n\tformState,\n\trelationshipNames,\n\tfilterBody,\n\tfilterValues\n) => {\n\tlet body = null;\n\n\tif (method === 'PUT' || method === 'POST') {\n\t\tbody = {};\n\t\tconst data = {\n\t\t\ttype,\n\t\t\tattributes: {},\n\t\t\tmeta: {},\n\t\t\trelationships: {},\n\t\t};\n\t\tconst keys = method === 'PUT' ? formState.dirty : Object.keys(formState.row);\n\n\t\tif (method === 'PUT' && id) {\n\t\t\tdata.id = id;\n\t\t}\n\n\t\tlet values = { ...formState.row };\n\t\tif (filterValues) {\n\t\t\tvalues = filterValues(values);\n\t\t}\n\n\t\tconst fileKeys = Object.keys(formState.files);\n\n\t\tkeys.forEach((key) => {\n\t\t\tconst cleanKey = key.replace(/\\..+$/, '');\n\t\t\tif (relationshipNames.includes(cleanKey)) {\n\t\t\t\tdata.relationships[cleanKey] = {\n\t\t\t\t\tdata: get(values, cleanKey),\n\t\t\t\t};\n\t\t\t} else if (relationshipNames.includes(key)) {\n\t\t\t\tdata.relationships[key] = {\n\t\t\t\t\tdata: get(values, cleanKey),\n\t\t\t\t};\n\t\t\t} else if (key.startsWith('meta.')) {\n\t\t\t\tset(data, key, get(values, key));\n\t\t\t} else if (key === 'meta') {\n\t\t\t\tdata.meta = values.meta;\n\t\t\t} else if (fileKeys.includes(key)) {\n\t\t\t\tset(data.attributes, key, true);\n\t\t\t} else if (key !== '_new' && !key.startsWith('_new.')) {\n\t\t\t\tset(data.attributes, key, get(values, key));\n\t\t\t}\n\t\t});\n\n\t\tbody.data = data;\n\n\t\tconst included = getIncluded(data, formState.dirtyIncluded, relationshipNames);\n\t\tif (included.length > 0) {\n\t\t\tbody.included = included;\n\t\t}\n\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\tif (typeof data.relationships[relationshipName].data === 'string') {\n\t\t\t\tdata.relationships[relationshipName].data = JSON.parse(data.relationships[relationshipName].data);\n\t\t\t}\n\t\t\tif (Array.isArray(data.relationships[relationshipName].data)) {\n\t\t\t\tdata.relationships[relationshipName].data = data.relationships[relationshipName].data.map((rel) => (cleanRelationship(rel)));\n\t\t\t}\n\t\t});\n\n\t\tif (filterBody) {\n\t\t\tbody = filterBody(body, formState.row);\n\t\t}\n\n\t\tif (Object.keys(data.attributes).length <= 0) {\n\t\t\tdelete data.attributes;\n\t\t}\n\t\tif (Object.keys(data.meta).length <= 0) {\n\t\t\tdelete data.meta;\n\t\t}\n\t\tif (Object.keys(data.relationships).length <= 0) {\n\t\t\tdelete data.relationships;\n\t\t}\n\n\t\tconst filenames = fileKeys.filter((filename) => (formState.files[filename] !== false));\n\t\tif (filenames.length > 0) {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('json', JSON.stringify(body));\n\t\t\tformData.append('files', JSON.stringify(filenames));\n\n\t\t\tfilenames.forEach((filename) => {\n\t\t\t\tformData.append(filename, formState.files[filename]);\n\t\t\t});\n\n\t\t\tbody = formData;\n\t\t} else {\n\t\t\tbody = JSON.stringify(body);\n\t\t}\n\t}\n\n\treturn body;\n};\n","import { deserialize } from './JsonApi';\nimport { trackPromise } from 'react-promise-tracker';\n\nexport default class Api {\n\tstatic get(url) {\n\t\treturn Api.request('GET', url);\n\t}\n\n\tstatic delete(url) {\n\t\treturn Api.request('DELETE', url);\n\t}\n\n\tstatic post(url, body) {\n\t\treturn Api.request('POST', url, body);\n\t}\n\n\tstatic put(url, body) {\n\t\treturn Api.request('PUT', url, body);\n\t}\n\n\tstatic request(method, url, body = null) {\n\t\tconst options = {\n\t\t\tmethod,\n\t\t\theaders: {\n\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t},\n\t\t};\n\t\tif (typeof body === 'string') {\n\t\t\toptions.headers['Content-Type'] = 'application/json';\n\t\t}\n\t\tif (Api.getToken()) {\n\t\t\toptions.headers.Authorization = `Bearer ${Api.getToken()}`;\n\t\t}\n\t\tif (body) {\n\t\t\toptions.body = body;\n\t\t}\n\n\t\treturn trackPromise(\n\t\t\tfetch(`${process.env.REACT_APP_API_URL}/${url}`, options)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\t\t\tjson.status = response.status;\n\t\t\t\t\t\t\t\tthrow json;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t\tif (error instanceof SyntaxError) {\n\t\t\t\t\t\t\t\t\tthrow { // eslint-disable-line no-throw-literal\n\t\t\t\t\t\t\t\t\t\terrors: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'The server returned invalid JSON.',\n\t\t\t\t\t\t\t\t\t\t\t\tstatus: '500',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (response.status === 204) {\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t}\n\t\t\t\t\treturn response.json();\n\t\t\t\t})\n\t\t\t\t.then((json) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(json, 'data')) {\n\t\t\t\t\t\treturn deserialize(json);\n\t\t\t\t\t}\n\t\t\t\t\treturn json;\n\t\t\t\t})\n\t\t);\n\t}\n\n\tstatic getToken() {\n\t\treturn window.FORMOSA_TOKEN;\n\t}\n\n\tstatic setToken(token) {\n\t\twindow.FORMOSA_TOKEN = token;\n\t}\n}\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\tdirty: [],\n\t\tdirtyIncluded: [],\n\t\terrors: {},\n\t\tfiles: {},\n\t\tmessage: '',\n\t\trow: {},\n\t\tsetRow: null,\n\t\tsetValues: null,\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport PropTypes from 'prop-types';\n\nexport default function Error({\n\tid,\n\tname,\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst hasError = formState && Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst props = {};\n\tif (name) {\n\t\t// Used for matching the attribute name from the API to this error element.\n\t\tprops['data-name'] = name;\n\t}\n\tif (id || name) {\n\t\tprops.id = `${id || name}-error`;\n\t}\n\n\treturn (\n\t\t<div className=\"formosa-field__error\" {...props}>\n\t\t\t{hasError && formState.errors[name].map((e) => (<div key={e}>{e}</div>))}\n\t\t</div>\n\t);\n}\n\nError.propTypes = {\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n};\n\nError.defaultProps = {\n\tid: null,\n\tname: '',\n};\n","import get from 'get-value';\n\nexport const normalizeOptions = (options, labelKey, valueKey = null) => {\n\tif (!options) {\n\t\treturn [];\n\t}\n\n\tconst output = [];\n\tif (Array.isArray(options)) {\n\t\toptions.forEach((option) => {\n\t\t\tif (typeof option === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue: option,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tObject.keys(options).forEach((value) => {\n\t\t\tconst option = options[value];\n\t\t\tif (typeof value === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn output;\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nexport const escapeRegExp = (string) => (string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'));\n\nconst toSlug = (s) => (\n\ts.toLowerCase()\n\t\t.replace(/ & /g, '-and-')\n\t\t.replace(/<[^>]+>/g, '')\n\t\t.replace(/['â€™.]/g, '')\n\t\t.replace(/[^a-z0-9-]+/g, '-')\n\t\t.replace(/^-+/, '')\n\t\t.replace(/-+$/, '')\n\t\t.replace(/--+/g, '-')\n);\n\nexport const filterByKey = (records, key, value) => {\n\tvalue = value.toLowerCase();\n\tconst escapedValue = escapeRegExp(value);\n\trecords = records.filter((record) => {\n\t\tconst recordValue = get(record, key).toString().toLowerCase() || '';\n\t\treturn recordValue.match(new RegExp(`(^|[^a-z])${escapedValue}`));\n\t});\n\tvalue = toSlug(value);\n\trecords = records.sort((a, b) => {\n\t\tconst aValue = toSlug(get(a, key).toString());\n\t\tconst bValue = toSlug(get(b, key).toString());\n\t\tconst aPos = aValue.indexOf(value) === 0;\n\t\tconst bPos = bValue.indexOf(value) === 0;\n\t\tif ((aPos && bPos) || (!aPos && !bPos)) {\n\t\t\treturn aValue.localeCompare(bValue);\n\t\t}\n\t\tif (aPos && !bPos) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\treturn records;\n};\n","import { filterByKey, normalizeOptions } from '../Helpers/Options';\nimport React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CloseIcon } from '../../svg/x.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Autocomplete({\n\tafterAdd,\n\tafterChange,\n\tclearable,\n\tclearButtonAttributes,\n\tclearButtonClassName,\n\tclearIconAttributes,\n\tclearIconHeight,\n\tclearIconWidth,\n\tclearText,\n\tdisabled,\n\tid,\n\tinputClassName,\n\tlabelFn,\n\tlabelKey,\n\tmax,\n\tname,\n\toptionButtonAttributes,\n\toptionButtonClassName,\n\toptionListAttributes,\n\toptionListClassName,\n\toptionListItemAttributes,\n\toptionListItemClassName,\n\toptions,\n\tplaceholder,\n\treadOnly,\n\tremoveButtonAttributes,\n\tremoveButtonClassName,\n\tremoveIconAttributes,\n\tremoveIconHeight,\n\tremoveIconWidth,\n\tremoveText,\n\tsetValue,\n\turl,\n\tvalue,\n\tvalueKey,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst clearButtonRef = useRef(null);\n\tconst inputRef = useRef(null);\n\tconst removeButtonRef = useRef(null);\n\tconst [filter, setFilter] = useState('');\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [highlightedIndex, setHighlightedIndex] = useState(0);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t\treturn () => {};\n\t}, [options]);\n\n\tlet currentValue = [];\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Autocomplete> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined || currentValue === '') {\n\t\tcurrentValue = [];\n\t} else if (max === 1 && !Array.isArray(currentValue)) {\n\t\tcurrentValue = [currentValue];\n\t}\n\n\tconst isSelected = (option) => (\n\t\tcurrentValue.findIndex((v) => (v.value === option.value)) > -1\n\t);\n\n\tlet filteredOptions = [];\n\tif (filter) {\n\t\tfilteredOptions = filterByKey(optionValues, 'label', filter);\n\t\tfilteredOptions = filteredOptions.filter((option) => (!isSelected(option)));\n\t}\n\n\tconst focus = () => {\n\t\tsetTimeout(() => {\n\t\t\tif (inputRef.current) {\n\t\t\t\tinputRef.current.focus();\n\t\t\t}\n\t\t});\n\t};\n\n\tconst addValue = (v) => {\n\t\tlet newValue;\n\t\tif (max === 1) {\n\t\t\tnewValue = v;\n\t\t} else {\n\t\t\tnewValue = [...currentValue, v];\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\n\t\tsetIsOpen(false);\n\t\tsetFilter('');\n\t\tif (max === 1) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (removeButtonRef.current) {\n\t\t\t\t\tremoveButtonRef.current.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (max === currentValue.length) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (clearButtonRef.current) {\n\t\t\t\t\tclearButtonRef.current.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tfocus();\n\t\t}\n\n\t\tif (afterAdd) {\n\t\t\tafterAdd();\n\t\t}\n\t};\n\n\tconst removeValue = (v) => {\n\t\tlet newValue = [...currentValue];\n\t\tif (max !== 1) {\n\t\t\tconst index = newValue.indexOf(v);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\t\t} else {\n\t\t\tnewValue = '';\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\n\t\tfocus();\n\t};\n\n\tconst onChange = (e) => {\n\t\tsetFilter(e.target.value);\n\t};\n\n\tconst onFocus = () => {\n\t\tsetHighlightedIndex(0);\n\t\tsetIsOpen(filter.length > 0);\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tconst numValues = currentValue ? currentValue.length : 0;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t} else if (e.key === 'Backspace' && !filter && numValues > 0) {\n\t\t\tremoveValue(currentValue[numValues - 1]);\n\t\t}\n\t};\n\n\tconst onKeyUp = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t\taddValue(filteredOptions[highlightedIndex].value);\n\t\t} else if (e.key === 'ArrowDown') {\n\t\t\tif (highlightedIndex >= (filteredOptions.length - 1)) {\n\t\t\t\tsetHighlightedIndex(0);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(highlightedIndex + 1);\n\t\t\t}\n\t\t} else if (e.key === 'ArrowUp') {\n\t\t\tif (highlightedIndex > 0) {\n\t\t\t\tsetHighlightedIndex(highlightedIndex - 1);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(filteredOptions.length - 1);\n\t\t\t}\n\t\t} else if (e.key === 'Escape') {\n\t\t\tsetIsOpen(false);\n\t\t} else {\n\t\t\tsetHighlightedIndex(0);\n\t\t\tsetIsOpen(filterValue.length > 0);\n\t\t}\n\t};\n\n\tconst onClickOption = (e) => {\n\t\tlet val = e.target.getAttribute('data-value');\n\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\tval = JSON.parse(val);\n\t\t}\n\t\taddValue(val);\n\t};\n\n\tconst onClickRemoveOption = (e) => {\n\t\tlet button = e.target;\n\t\twhile (button && button.tagName.toUpperCase() !== 'BUTTON') {\n\t\t\tbutton = button.parentNode;\n\t\t}\n\t\tremoveValue(currentValue[button.getAttribute('data-index')]);\n\t};\n\n\tconst clear = () => {\n\t\tconst newValue = [];\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\n\t\tsetFilter('');\n\t\tfocus();\n\t};\n\n\tconst showClear = clearable && max !== 1 && currentValue.length > 0 && !disabled && !readOnly;\n\n\tlet className = ['formosa-autocomplete'];\n\tif (showClear) {\n\t\tclassName.push('formosa-autocomplete--clearable');\n\t}\n\tclassName = className.join(' ');\n\n\tconst canAddValues = !disabled && !readOnly && (max === null || currentValue.length < max);\n\n\tconst wrapperProps = {};\n\tif (id || name) {\n\t\twrapperProps.id = `${id || name}-wrapper`;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${className} ${wrapperClassName}`.trim()}\n\t\t\tdata-value={JSON.stringify(max === 1 && currentValue.length > 0 ? currentValue[0] : currentValue)} /* For testing. */\n\t\t\t{...wrapperProps}\n\t\t\t{...wrapperAttributes}\n\t\t>\n\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t<ul className=\"formosa-autocomplete__values\">\n\t\t\t\t\t{currentValue && currentValue.map((v, index) => {\n\t\t\t\t\t\tlet val = v;\n\t\t\t\t\t\tlet isJson = false;\n\t\t\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\t\t\tval = JSON.stringify(val);\n\t\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst option = optionValues.find((o) => (\n\t\t\t\t\t\t\tisJson ? JSON.stringify(o.value) === val : o.value === val\n\t\t\t\t\t\t));\n\n\t\t\t\t\t\tlet label = '';\n\t\t\t\t\t\tif (labelFn) {\n\t\t\t\t\t\t\tlabel = labelFn(option || v);\n\t\t\t\t\t\t} else if (option && Object.prototype.hasOwnProperty.call(option, 'label')) {\n\t\t\t\t\t\t\tlabel = option.label;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--item\" key={val}>\n\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t{!disabled && !readOnly && (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__value__remove ${removeButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\t\tdata-index={index}\n\t\t\t\t\t\t\t\t\t\tonClick={onClickRemoveOption}\n\t\t\t\t\t\t\t\t\t\tref={removeButtonRef}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t{...removeButtonAttributes}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<CloseIcon height={removeIconHeight} width={removeIconWidth} {...removeIconAttributes} />\n\t\t\t\t\t\t\t\t\t\t{removeText}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t{canAddValues && (\n\t\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--input\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-autocomplete__input ${inputClassName}`.trim()}\n\t\t\t\t\t\t\t\tid={id || name}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\t\tonKeyUp={onKeyUp}\n\t\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={filter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\n\t\t\t\t{isOpen && filteredOptions.length > 0 && (\n\t\t\t\t\t<ul className={`formosa-autocomplete__options ${optionListClassName}`.trim()} {...optionListAttributes}>\n\t\t\t\t\t\t{filteredOptions.map((option, index) => {\n\t\t\t\t\t\t\tlet optionClassName = ['formosa-autocomplete__option'];\n\t\t\t\t\t\t\tif (highlightedIndex === index) {\n\t\t\t\t\t\t\t\toptionClassName.push('formosa-autocomplete__option--highlighted');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionClassName = optionClassName.join(' ');\n\n\t\t\t\t\t\t\tlet val = option.value;\n\t\t\t\t\t\t\tlet isJson = false;\n\t\t\t\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\t\t\tval = JSON.stringify(val);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tclassName={`${optionClassName} ${optionListItemClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tkey={val}\n\t\t\t\t\t\t\t\t\t{...optionListItemAttributes}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__option__button ${optionButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\t\tdata-json={isJson}\n\t\t\t\t\t\t\t\t\t\tdata-value={val}\n\t\t\t\t\t\t\t\t\t\tonClick={onClickOption}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t{...optionButtonAttributes}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\n\t\t\t\t{showClear && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={`formosa-autocomplete__clear ${clearButtonClassName}`.trim()}\n\t\t\t\t\t\t\tonClick={clear}\n\t\t\t\t\t\t\tref={clearButtonRef}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t{...clearButtonAttributes}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CloseIcon height={clearIconHeight} width={clearIconWidth} {...clearIconAttributes} />\n\t\t\t\t\t\t\t{clearText}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nAutocomplete.propTypes = {\n\tafterAdd: PropTypes.func,\n\tafterChange: PropTypes.func,\n\tclearable: PropTypes.bool,\n\tclearButtonAttributes: PropTypes.object,\n\tclearButtonClassName: PropTypes.string,\n\tclearIconAttributes: PropTypes.object,\n\tclearIconHeight: PropTypes.number,\n\tclearIconWidth: PropTypes.number,\n\tclearText: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputClassName: PropTypes.string,\n\tlabelFn: PropTypes.func,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tmax: PropTypes.number,\n\tname: PropTypes.string,\n\toptionButtonAttributes: PropTypes.object,\n\toptionButtonClassName: PropTypes.string,\n\toptionListAttributes: PropTypes.object,\n\toptionListClassName: PropTypes.string,\n\toptionListItemAttributes: PropTypes.object,\n\toptionListItemClassName: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tplaceholder: PropTypes.string,\n\treadOnly: PropTypes.bool,\n\tremoveButtonAttributes: PropTypes.object,\n\tremoveButtonClassName: PropTypes.string,\n\tremoveIconAttributes: PropTypes.object,\n\tremoveIconHeight: PropTypes.number,\n\tremoveIconWidth: PropTypes.number,\n\tremoveText: PropTypes.string,\n\tsetValue: PropTypes.func,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.arrayOf(PropTypes.object),\n\t\tPropTypes.arrayOf(PropTypes.string),\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nAutocomplete.defaultProps = {\n\tafterAdd: null,\n\tafterChange: null,\n\tclearable: true,\n\tclearButtonAttributes: null,\n\tclearButtonClassName: '',\n\tclearIconAttributes: null,\n\tclearIconHeight: 12,\n\tclearIconWidth: 12,\n\tclearText: 'Clear',\n\tdisabled: false,\n\tid: '',\n\tinputClassName: '',\n\tlabelFn: null,\n\tlabelKey: 'name',\n\tmax: null,\n\tname: '',\n\toptionButtonAttributes: null,\n\toptionButtonClassName: '',\n\toptionListAttributes: null,\n\toptionListClassName: '',\n\toptionListItemAttributes: null,\n\toptionListItemClassName: '',\n\toptions: null,\n\tplaceholder: 'Search',\n\treadOnly: false,\n\tremoveButtonAttributes: null,\n\tremoveButtonClassName: '',\n\tremoveIconAttributes: null,\n\tremoveIconHeight: 12,\n\tremoveIconWidth: 12,\n\tremoveText: 'Remove',\n\tsetValue: null,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Checkbox({\n\tafterChange,\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tname,\n\tsetValue,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tlet checked = false;\n\tif (setValue !== null) {\n\t\tchecked = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Checkbox> component must be inside a <Form> component.');\n\t\t}\n\t\tchecked = !!get(formState.row, name);\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.checked;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\tchecked={checked}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<CheckIcon className={`formosa-icon--check ${iconClassName}`.trim()} height={iconHeight} width={iconWidth} {...iconAttributes} />\n\t\t</>\n\t);\n}\n\nCheckbox.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.bool,\n};\n\nCheckbox.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tvalue: null,\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function CheckboxList({\n\tafterChange,\n\tclassName,\n\tdisabled,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tlabelAttributes,\n\tlabelClassName,\n\tlabelKey,\n\tlistAttributes,\n\tlistClassName,\n\tlistItemAttributes,\n\tlistItemClassName,\n\tname,\n\toptions,\n\treadOnly,\n\tsetValue,\n\turl,\n\tvalue,\n\tvalueKey,\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t\treturn () => {};\n\t}, [options]);\n\n\tlet currentValue = [];\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<CheckboxList> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined || currentValue === '') {\n\t\tcurrentValue = [];\n\t}\n\tcurrentValue = currentValue.map((val) => (typeof val === 'object' ? JSON.stringify(val) : val));\n\n\tconst onChange = (e) => {\n\t\tconst newValue = [...currentValue];\n\t\tlet val = e.target.value;\n\n\t\tif (e.target.checked) {\n\t\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\t\tval = JSON.parse(val);\n\t\t\t}\n\t\t\tnewValue.push(val);\n\t\t} else {\n\t\t\tconst index = currentValue.indexOf(val);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\treturn (\n\t\t<ul className={`formosa-radio ${listClassName}`.trim()} {...listAttributes}>\n\t\t\t{optionValues.map((optionValue, index) => {\n\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\tlet isJson = false;\n\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\tisJson = true;\n\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t}\n\n\t\t\t\tconst checked = currentValue.includes(optionValueVal);\n\n\t\t\t\tconst optionProps = {};\n\t\t\t\tif (isJson) {\n\t\t\t\t\toptionProps['data-json'] = true;\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\toptionProps.name = `${name}[]`;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<li className={`formosa-radio__item ${listItemClassName}`.trim()} key={optionValueVal} {...listItemAttributes}>\n\t\t\t\t\t\t<div className=\"formosa-input-wrapper formosa-input-wrapper--checkbox\">\n\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\tclassName={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${labelClassName}`.trim()}\n\t\t\t\t\t\t\t\t{...labelAttributes}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\treadOnly={readOnly}\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tvalue={optionValueVal}\n\t\t\t\t\t\t\t\t\t{...optionProps}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\t\tclassName={`formosa-icon--check ${iconClassName}`.trim()}\n\t\t\t\t\t\t\t\t\theight={iconHeight}\n\t\t\t\t\t\t\t\t\twidth={iconWidth}\n\t\t\t\t\t\t\t\t\t{...iconAttributes}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{optionValue.label}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\n\nCheckboxList.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlistAttributes: PropTypes.object,\n\tlistClassName: PropTypes.string,\n\tlistItemAttributes: PropTypes.object,\n\tlistItemClassName: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\treadOnly: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.arrayOf(PropTypes.object),\n\t\tPropTypes.arrayOf(PropTypes.string),\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nCheckboxList.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tdisabled: false,\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tlabelAttributes: null,\n\tlabelClassName: '',\n\tlabelKey: 'name',\n\tlistAttributes: null,\n\tlistClassName: '',\n\tlistItemAttributes: null,\n\tlistItemClassName: '',\n\tname: '',\n\toptions: null,\n\treadOnly: false,\n\tsetValue: null,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n};\n","const pad = (n, width, z = '0') => {\n\tn = n.toString();\n\treturn n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n};\n\nexport const stringToObject = (datetimeString, timeZone) => {\n\tconst output = {\n\t\tyear: '',\n\t\tmonth: '',\n\t\tday: '',\n\t\thour: '',\n\t\tminute: '',\n\t\tsecond: '',\n\t\tampm: 'am',\n\t};\n\n\tif (!datetimeString) {\n\t\treturn output;\n\t}\n\n\tconst values = datetimeString.replace(/[^0-9]/g, '-').split('-');\n\tconst numValues = values.length;\n\n\tif (numValues >= 6) {\n\t\toutput.second = values[5];\n\t}\n\tif (numValues >= 5) {\n\t\toutput.minute = values[4];\n\t}\n\tif (numValues >= 4) {\n\t\toutput.hour = values[3];\n\t\tif (parseInt(output.hour, 10) > 12) {\n\t\t\toutput.hour -= 12;\n\t\t\toutput.ampm = 'pm';\n\t\t}\n\t}\n\tif (numValues >= 3) {\n\t\toutput.day = values[2] ? parseInt(values[2], 10) : '';\n\t}\n\tif (numValues >= 2) {\n\t\toutput.month = values[1] ? parseInt(values[1], 10) : '';\n\t}\n\tif (numValues >= 1) {\n\t\toutput.year = values[0] ? parseInt(values[0], 10) : '';\n\t}\n\n\treturn output;\n\n\t// hour12 doesn't work in Chromium: https://github.com/microsoft/vscode/issues/117970\n\t// let value = new Date(`${datetimeString.replace(' ', 'T')}.000Z`);\n\t// value = value.toLocaleString('en-CA', { hourCycle: 'h23', timeZone });\n\n\t// const date = value.substring(0, 10).split('-');\n\t// output.year = date[0];\n\t// output.month = parseInt(date[1], 10);\n\t// output.day = parseInt(date[2], 10);\n\n\t// const time = value.substring(12).split(':');\n\t// const hour = parseInt(time[0], 10);\n\t// if (hour > 12) {\n\t// \toutput.hour = hour - 12;\n\t// } else if (hour === 0) {\n\t// \toutput.hour = 12;\n\t// } else {\n\t// \toutput.hour = hour;\n\t// }\n\t// output.minute = time[1];\n\t// output.second = time[2];\n\t// output.ampm = hour >= 12 ? 'pm' : 'am';\n\n\t// return output;\n};\n\nexport const objectToString = (datetimeObject) => {\n\tlet hour = parseInt(datetimeObject.hour, 10);\n\tif (datetimeObject.ampm === 'pm' && hour < 12) {\n\t\thour += 12;\n\t} else if (datetimeObject.ampm === 'am' && hour === 12) {\n\t\thour = 0;\n\t}\n\n\treturn `${datetimeObject.year}-${datetimeObject.month}-${datetimeObject.day} ${hour}:${datetimeObject.minute}:${datetimeObject.second}`;\n\n\t// const year = datetimeObject.year ? pad(datetimeObject.year, 4) : '';\n\t// const month = datetimeObject.month ? pad(datetimeObject.month, 2) : '';\n\t// const day = datetimeObject.day ? pad(datetimeObject.day, 2) : '';\n\n\t// let hour = parseInt(datetimeObject.hour, 10);\n\t// if (datetimeObject.ampm === 'pm' && hour < 12) {\n\t// \thour += 12;\n\t// } else if (datetimeObject.ampm === 'am' && hour === 12) {\n\t// \thour = 0;\n\t// }\n\t// hour = hour ? pad(hour, 2) : '';\n\t// const minute = datetimeObject.minute ? pad(datetimeObject.minute, 2) : '';\n\t// const second = datetimeObject.second ? pad(datetimeObject.second, 2) : '';\n\n\t// try {\n\t// \treturn new Date(year, month - 1, day, hour, minute, second).toISOString().replace('T', ' ').substring(0, 19);\n\t// } catch {\n\t// \treturn '';\n\t// }\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CaretIcon } from '../../svg/caret.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Select({\n\tafterChange,\n\tclassName,\n\thideBlank,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tlabelKey,\n\tname,\n\toptions,\n\tsetValue,\n\turl,\n\tvalue,\n\tvalueKey,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t\treturn () => {};\n\t}, [options]);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Select> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tif (typeof currentValue === 'object') {\n\t\tcurrentValue = JSON.stringify(currentValue);\n\t}\n\n\tconst onChange = (e) => {\n\t\tlet newValue = e.target.value;\n\t\tconst option = e.target.querySelector(`[value=\"${newValue.replace(/\"/g, '\\\\\"')}\"]`);\n\t\tif (option.getAttribute('data-json') === 'true') {\n\t\t\tnewValue = JSON.parse(newValue);\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<div className={`formosa-select-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<select\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--select ${className}`.trim()}\n\t\t\t\tonChange={onChange}\n\t\t\t\tvalue={currentValue}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t>\n\t\t\t\t{!hideBlank && <option value=\"\" />}\n\t\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\t\tlet isJson = false;\n\t\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t\t}\n\t\t\t\t\tconst optionProps = {};\n\t\t\t\t\tif (isJson) {\n\t\t\t\t\t\toptionProps['data-json'] = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<option key={optionValueVal} value={optionValueVal} {...optionProps}>{optionValue.label}</option>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</select>\n\t\t\t<CaretIcon className={`formosa-icon--caret ${iconClassName}`.trim()} height={iconHeight} width={iconWidth} {...iconAttributes} />\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\thideBlank: PropTypes.bool,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tsetValue: PropTypes.func,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSelect.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\thideBlank: false,\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tlabelKey: 'name',\n\tname: '',\n\toptions: null,\n\tsetValue: null,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import { objectToString, stringToObject } from '../Helpers/Datetime';\nimport React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\nimport Select from './Select';\n\nexport default function Datetime({\n\tafterChange,\n\tampmAttributes,\n\tconvertToTimezone,\n\tdayAttributes,\n\tdisabled,\n\thourAttributes,\n\tminuteAttributes,\n\tmonthAttributes,\n\tname,\n\tsecondAttributes,\n\tsetValue,\n\tvalue,\n\twrapperAttributes,\n\twrapperClassName,\n\tyearAttributes,\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Datetime> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t\tif (currentValue === null || currentValue === undefined) {\n\t\t\tcurrentValue = '';\n\t\t}\n\t}\n\tconsole.log('currentValue', currentValue);\n\n\tconst currentValueObject = stringToObject(currentValue, convertToTimezone);\n\tconsole.log('currentValueObject', currentValueObject);\n\n\tconst onChange = (e) => {\n\t\tconst key = e.target.getAttribute('data-datetime');\n\t\tconst newValueObject = {\n\t\t\t...currentValueObject,\n\t\t\t[key]: e.target.value,\n\t\t};\n\t\t// setCurrentValueObject(newValueObject);\n\t\tconsole.log('newValueObject', JSON.stringify(newValueObject));\n\n\t\tconst newValue = objectToString(newValueObject);\n\t\tconsole.log('newValue', newValue);\n\n\t\t// if (newValue.length === '0000-00-00 00:00:00'.length) {\n\t\t\tif (setValue) {\n\t\t\t\tsetValue(newValue);\n\t\t\t} else {\n\t\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t\t}\n\t\t// }\n\t};\n\n\treturn (\n\t\t<div className={`formosa-datetime-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Select\n\t\t\t\tdata-datetime=\"month\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-month`}\n\t\t\t\toptions={{\n\t\t\t\t\t1: 'January',\n\t\t\t\t\t2: 'February',\n\t\t\t\t\t3: 'March',\n\t\t\t\t\t4: 'April',\n\t\t\t\t\t5: 'May',\n\t\t\t\t\t6: 'June',\n\t\t\t\t\t7: 'July',\n\t\t\t\t\t8: 'August',\n\t\t\t\t\t9: 'September',\n\t\t\t\t\t10: 'October',\n\t\t\t\t\t11: 'November',\n\t\t\t\t\t12: 'December',\n\t\t\t\t}}\n\t\t\t\tsetValue={() => {\n\t\t\t\t\tonChange({ target: document.getElementById(`${name}-month`) });\n\t\t\t\t}}\n\t\t\t\ttype=\"select\"\n\t\t\t\tvalue={currentValueObject.month}\n\t\t\t\twrapperClassName=\"formosa-field__input--date formosa-field__input--month\"\n\t\t\t\t{...monthAttributes}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\tclassName=\"formosa-field__input formosa-field__input--date formosa-field__input--day\"\n\t\t\t\tdata-datetime=\"day\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-day`}\n\t\t\t\tinputMode=\"numeric\"\n\t\t\t\tmaxLength={2}\n\t\t\t\tonChange={onChange}\n\t\t\t\tplaceholder=\"DD\"\n\t\t\t\tsize={4}\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={currentValueObject.day}\n\t\t\t\t{...dayAttributes}\n\t\t\t/>\n\t\t\t<div className=\"formosa-suffix-container\">\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"formosa-field__input formosa-field__input--date formosa-field__input--year\"\n\t\t\t\t\tdata-datetime=\"year\"\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tid={`${name}-year`}\n\t\t\t\t\tinputMode=\"numeric\"\n\t\t\t\t\tmaxLength={4}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tplaceholder=\"YYYY\"\n\t\t\t\t\tsize={6}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={currentValueObject.year}\n\t\t\t\t\t{...yearAttributes}\n\t\t\t\t/>\n\t\t\t\t<span className=\"formosa-suffix\">,</span>\n\t\t\t</div>\n\n\t\t\t<div className=\"formosa-suffix-container\">\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"formosa-field__input formosa-field__input--date formosa-field__input--hour\"\n\t\t\t\t\tdata-datetime=\"hour\"\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tid={`${name}-hour`}\n\t\t\t\t\tinputMode=\"numeric\"\n\t\t\t\t\tmaxLength={2}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tplaceholder=\"hh\"\n\t\t\t\t\tsize={4}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={currentValueObject.hour}\n\t\t\t\t\t{...hourAttributes}\n\t\t\t\t/>\n\t\t\t\t<span className=\"formosa-suffix\">:</span>\n\t\t\t</div>\n\t\t\t<div className=\"formosa-suffix-container\">\n\t\t\t\t<input\n\t\t\t\t\tclassName=\"formosa-field__input formosa-field__input--date formosa-field__input--minute\"\n\t\t\t\t\tdata-datetime=\"minute\"\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tid={`${name}-minute`}\n\t\t\t\t\tinputMode=\"numeric\"\n\t\t\t\t\tmaxLength={2}\n\t\t\t\t\tonChange={onChange}\n\t\t\t\t\tplaceholder=\"mm\"\n\t\t\t\t\tsize={4}\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={currentValueObject.minute}\n\t\t\t\t\t{...minuteAttributes}\n\t\t\t\t/>\n\t\t\t\t<span className=\"formosa-suffix\">:</span>\n\t\t\t</div>\n\t\t\t<input\n\t\t\t\tclassName=\"formosa-field__input formosa-field__input--date formosa-field__input--second\"\n\t\t\t\tdata-datetime=\"second\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-second`}\n\t\t\t\tinputMode=\"numeric\"\n\t\t\t\tmaxLength={2}\n\t\t\t\tonChange={onChange}\n\t\t\t\tplaceholder=\"ss\"\n\t\t\t\tsize={4}\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalue={currentValueObject.second}\n\t\t\t\t{...secondAttributes}\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tdata-datetime=\"ampm\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\thideBlank\n\t\t\t\tid={`${name}-ampm`}\n\t\t\t\toptions={{\n\t\t\t\t\tam: 'am',\n\t\t\t\t\tpm: 'pm',\n\t\t\t\t}}\n\t\t\t\tsetValue={() => {\n\t\t\t\t\tonChange({ target: document.getElementById(`${name}-ampm`) });\n\t\t\t\t}}\n\t\t\t\ttype=\"select\"\n\t\t\t\tvalue={currentValueObject.ampm}\n\t\t\t\twrapperClassName=\"formosa-field__input--date formosa-field__input--ampm\"\n\t\t\t\t{...ampmAttributes}\n\t\t\t/>\n\n\t\t\t<input\n\t\t\t\tname={name}\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tvalue={currentValue}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nDatetime.propTypes = {\n\tafterChange: PropTypes.func,\n\tampmAttributes: PropTypes.object,\n\tconvertToTimezone: PropTypes.string,\n\tdayAttributes: PropTypes.object,\n\tdisabled: PropTypes.bool,\n\thourAttributes: PropTypes.object,\n\tminuteAttributes: PropTypes.object,\n\tmonthAttributes: PropTypes.object,\n\tname: PropTypes.string,\n\tsecondAttributes: PropTypes.object,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n\tyearAttributes: PropTypes.object,\n};\n\nDatetime.defaultProps = {\n\tafterChange: null,\n\tampmAttributes: null,\n\tconvertToTimezone: 'UTC',\n\tdayAttributes: null,\n\tdisabled: false,\n\thourAttributes: null,\n\tminuteAttributes: null,\n\tmonthAttributes: null,\n\tname: '',\n\tsecondAttributes: null,\n\tsetValue: null,\n\tvalue: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n\tyearAttributes: null,\n};\n","import React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function File({\n\tafterChange,\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\tdisabled,\n\temptyText,\n\tid,\n\timageAttributes,\n\timageClassName,\n\timageHeight,\n\timagePrefix,\n\timagePreview,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tlinkAttributes,\n\tlinkClassName,\n\tlinkImage,\n\tmultiple,\n\tname,\n\treadOnly,\n\tremoveText,\n\trequired,\n\tsetValue,\n\tvalue,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst inputRef = useRef(null);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<File> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tconst hasValue = multiple ? currentValue.length > 0 : !!currentValue;\n\n\tconst getFilenames = (v) => {\n\t\tif (v instanceof FileList) {\n\t\t\tconst numFiles = v.length;\n\t\t\tconst output = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < numFiles; i += 1) {\n\t\t\t\toutput.push(v.item(i).name);\n\t\t\t}\n\t\t\treturn output.join(', ');\n\t\t}\n\t\tif (Array.isArray(v)) {\n\t\t\treturn v.join(', ');\n\t\t}\n\t\tif (typeof v === 'object') {\n\t\t\treturn v.name;\n\t\t}\n\t\treturn v;\n\t};\n\n\tconst getSrcs = (v) => {\n\t\tconst output = [];\n\t\tif (v instanceof FileList) {\n\t\t\tconst numFiles = v.length;\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < numFiles; i += 1) {\n\t\t\t\toutput.push(URL.createObjectURL(v.item(i)));\n\t\t\t}\n\t\t} else if (Array.isArray(v)) {\n\t\t\treturn v.map((v2) => (`${imagePrefix}${v2}`));\n\t\t} else if (typeof v === 'object') {\n\t\t\toutput.push(URL.createObjectURL(v));\n\t\t} else if (typeof v === 'string') {\n\t\t\toutput.push(`${imagePrefix}${v}`);\n\t\t}\n\t\treturn output;\n\t};\n\n\tconst [filenames, setFilenames] = useState(getFilenames(currentValue));\n\tconst [srcs, setSrcs] = useState(getSrcs(currentValue));\n\n\tuseEffect(() => {\n\t\tsetFilenames(getFilenames(currentValue));\n\t\tsetSrcs(getSrcs(currentValue));\n\t}, [currentValue]);\n\n\tconst onChange = (e) => {\n\t\tconst newFiles = multiple ? e.target.files : e.target.files.item(0);\n\n\t\tsetFilenames(getFilenames(newFiles));\n\t\tif (imagePreview) {\n\t\t\tsetSrcs(getSrcs(newFiles));\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newFiles);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newFiles, afterChange, newFiles);\n\t\t}\n\t};\n\n\tconst onRemove = (e) => {\n\t\tsetFilenames('');\n\n\t\tconst newValue = '';\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange, newValue);\n\t\t}\n\n\t\tinputRef.current.focus();\n\t};\n\n\tlet prefixClassName = inputWrapperClassName;\n\tif (hasValue && !disabled && !readOnly) {\n\t\tprefixClassName += ' formosa-prefix';\n\t}\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\n\tconst hiddenProps = {};\n\tif (name) {\n\t\thiddenProps.name = name;\n\t}\n\n\tconst buttonProps = {};\n\tif (id || name) {\n\t\tbuttonProps.id = `${id || name}-remove`;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{(hasValue && imagePreview) && (\n\t\t\t\tsrcs.map((src) => {\n\t\t\t\t\tconst img = (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\tclassName={`formosa-file-image ${imageClassName}`.trim()}\n\t\t\t\t\t\t\theight={imageHeight}\n\t\t\t\t\t\t\tkey={src}\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\t{...imageAttributes}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\tif (linkImage) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a className={`formosa-file-link ${linkClassName}`.trim()} href={src} key={src} {...linkAttributes}>\n\t\t\t\t\t\t\t\t{img}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn img;\n\t\t\t\t})\n\t\t\t)}\n\t\t\t<div className={`formosa-file-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t\t<div className={`formosa-file-input-wrapper ${prefixClassName}`.trim()} {...inputWrapperAttributes}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`formosa-file-name${!filenames ? ' formosa-file-name--empty' : ''}`}\n\t\t\t\t\t\tid={`${id || name}-name`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filenames || emptyText}\n\t\t\t\t\t</div>\n\t\t\t\t\t{!readOnly && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-field__input--file ${className}`.trim()}\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\tmultiple={multiple}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\tvalue={currentValue}\n\t\t\t\t\t\t\t\t{...hiddenProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{hasValue && !disabled && !readOnly && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button formosa-button--remove-file formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...buttonProps}\n\t\t\t\t\t\t{...buttonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{removeText}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nFile.propTypes = {\n\tafterChange: PropTypes.func,\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\temptyText: PropTypes.string,\n\tid: PropTypes.string,\n\timageAttributes: PropTypes.object,\n\timageClassName: PropTypes.string,\n\timageHeight: PropTypes.number,\n\timagePrefix: PropTypes.string,\n\timagePreview: PropTypes.bool,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tlinkAttributes: PropTypes.object,\n\tlinkClassName: PropTypes.string,\n\tlinkImage: PropTypes.bool,\n\tmultiple: PropTypes.bool,\n\tname: PropTypes.string,\n\treadOnly: PropTypes.bool,\n\tremoveText: PropTypes.string,\n\trequired: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nFile.defaultProps = {\n\tafterChange: null,\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\tdisabled: false,\n\temptyText: 'No file selected.',\n\tid: '',\n\timageAttributes: null,\n\timageClassName: '',\n\timageHeight: 100,\n\timagePrefix: '',\n\timagePreview: false,\n\tinputWrapperAttributes: null,\n\tinputWrapperClassName: '',\n\tlinkAttributes: null,\n\tlinkClassName: '',\n\tlinkImage: false,\n\tmultiple: false,\n\tname: '',\n\treadOnly: false,\n\tremoveText: 'Remove',\n\trequired: false,\n\tsetValue: null,\n\tvalue: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function ConditionalWrapper({ children, className, condition }) {\n\tif (!condition) {\n\t\treturn children;\n\t}\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n\nConditionalWrapper.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tclassName: PropTypes.string,\n\tcondition: PropTypes.any,\n};\n\nConditionalWrapper.defaultProps = {\n\tclassName: '',\n\tcondition: false,\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport ConditionalWrapper from './ConditionalWrapper';\nimport FormContext from './FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Input({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsetValue,\n\tsuffix,\n\ttype,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Input> component must be inside a <Form> component.');\n\t\t}\n\t\tif (type !== 'file') {\n\t\t\tcurrentValue = get(formState.row, name);\n\t\t\tif (currentValue === null || currentValue === undefined) {\n\t\t\t\tcurrentValue = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.value;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<ConditionalWrapper className=\"formosa-suffix-container\" condition={suffix}>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input ${className}`.trim()}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype={type}\n\t\t\t\tvalue={currentValue}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t{suffix && <span className=\"formosa-suffix\">{suffix}</span>}\n\t\t</ConditionalWrapper>\n\t);\n}\n\nInput.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\tvalue: PropTypes.string,\n};\n\nInput.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tsuffix: '',\n\ttype: 'text',\n\tvalue: null,\n};\n","import React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Input from '../Input';\nimport PropTypes from 'prop-types';\n\nexport default function Password({\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\thideText,\n\tshowText,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst [tempType, setTempType] = useState('password');\n\tconst togglePassword = () => {\n\t\tif (tempType === 'password') {\n\t\t\tsetTempType('text');\n\t\t} else {\n\t\t\tsetTempType('password');\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={`formosa-password-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tclassName={`formosa-field__input--password formosa-prefix ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t\ttype={tempType}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName={`formosa-button formosa-button--toggle-password formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\tonClick={togglePassword}\n\t\t\t\ttype=\"button\"\n\t\t\t\t{...buttonAttributes}\n\t\t\t>\n\t\t\t\t{tempType === 'password' ? showText : hideText}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nPassword.propTypes = {\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\thideText: PropTypes.string,\n\tshowText: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nPassword.defaultProps = {\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\thideText: 'Hide',\n\tshowText: 'Show',\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Radio({\n\tafterChange,\n\tclassName,\n\tlabel,\n\tlabelAttributes,\n\tlabelClassName,\n\tlabelKey,\n\tlistAttributes,\n\tlistClassName,\n\tlistItemAttributes,\n\tlistItemClassName,\n\tname,\n\toptions,\n\trequired,\n\tsetValue,\n\turl,\n\tvalue,\n\tvalueKey,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t\treturn () => {};\n\t}, [options]);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Radio> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tif (typeof currentValue === 'object') {\n\t\tcurrentValue = JSON.stringify(currentValue);\n\t}\n\n\tconst onChange = (e) => {\n\t\tlet newValue = e.target.value;\n\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\tnewValue = JSON.parse(newValue);\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\treturn (\n\t\t<ul className={`formosa-radio ${listClassName}`.trim()} {...listAttributes}>\n\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\tlet isJson = false;\n\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\tisJson = true;\n\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t}\n\n\t\t\t\tconst checked = currentValue === optionValueVal;\n\n\t\t\t\tconst optionProps = {};\n\t\t\t\tif (isJson) {\n\t\t\t\t\toptionProps['data-json'] = true;\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\toptionProps.name = name;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<li className={`formosa-radio__item ${listItemClassName}`.trim()} key={optionValueVal} {...listItemAttributes}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${labelClassName}`.trim()}\n\t\t\t\t\t\t\t{...labelAttributes}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-radio__input ${className}`.trim()}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tvalue={optionValueVal}\n\t\t\t\t\t\t\t\t{...optionProps}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{optionValue.label}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\n\nRadio.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlistAttributes: PropTypes.object,\n\tlistClassName: PropTypes.string,\n\tlistItemAttributes: PropTypes.object,\n\tlistItemClassName: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\trequired: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nRadio.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tlabel: '',\n\tlabelAttributes: null,\n\tlabelClassName: '',\n\tlabelKey: 'name',\n\tlistAttributes: null,\n\tlistClassName: '',\n\tlistItemAttributes: null,\n\tlistItemClassName: '',\n\tname: '',\n\toptions: null,\n\trequired: false,\n\tsetValue: null,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n};\n","import Input from '../Input';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as SearchIcon } from '../../svg/search.svg';\n\nexport default function Search({\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className={`formosa-search-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tclassName={`formosa-field__input--search ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<SearchIcon className={`formosa-icon--search ${iconClassName}`.trim()} height={iconHeight} width={iconWidth} {...iconAttributes} />\n\t\t</div>\n\t);\n}\n\nSearch.propTypes = {\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSearch.defaultProps = {\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Textarea({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsetValue,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Textarea> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.value;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<textarea\n\t\t\tclassName={`formosa-field__input formosa-field__input--textarea ${className}`.trim()}\n\t\t\tonChange={onChange}\n\t\t\tvalue={currentValue}\n\t\t\t{...props}\n\t\t\t{...otherProps}\n\t\t/>\n\t);\n}\n\nTextarea.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.string,\n};\n\nTextarea.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tvalue: null,\n};\n","import Autocomplete from './Input/Autocomplete';\nimport Checkbox from './Input/Checkbox';\nimport CheckboxList from './Input/CheckboxList';\nimport Datetime from './Input/Datetime';\nimport File from './Input/File';\nimport Input from './Input';\nimport Password from './Input/Password';\nimport Radio from './Input/Radio';\nimport Search from './Input/Search';\nimport Select from './Input/Select';\nimport Textarea from './Input/Textarea';\n\nexport default (type, component) => {\n\tif (component) {\n\t\treturn component;\n\t}\n\tif (type === 'select') {\n\t\treturn Select;\n\t}\n\tif (type === 'textarea') {\n\t\treturn Textarea;\n\t}\n\tif (type === 'radio') {\n\t\treturn Radio;\n\t}\n\tif (type === 'checkbox') {\n\t\treturn Checkbox;\n\t}\n\tif (type === 'password') {\n\t\treturn Password;\n\t}\n\tif (type === 'datetime') {\n\t\treturn Datetime;\n\t}\n\tif (type === 'search') {\n\t\treturn Search;\n\t}\n\tif (type === 'autocomplete') {\n\t\treturn Autocomplete;\n\t}\n\tif (type === 'file') {\n\t\treturn File;\n\t}\n\tif (type === 'checkbox-list') {\n\t\treturn CheckboxList;\n\t}\n\treturn Input;\n};\n","export default (oldDirty, name) => {\n\tconst newDirty = [...oldDirty];\n\tif (!newDirty.includes(name)) {\n\t\tnewDirty.push(name);\n\t}\n\treturn newDirty;\n};\n","import React, { useContext, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport getInputElement from '../FieldInput';\nimport getNewDirty from '../Helpers/FormState';\nimport PropTypes from 'prop-types';\nimport set from 'set-value';\n\nexport default function HasMany({\n\tattributes,\n\tbuttonClassName,\n\tname,\n\trecordType,\n\tremovable,\n}) {\n\tconst { formState, setFormState } = useContext(FormContext);\n\tconst [tempId, setTempId] = useState(1);\n\tconst values = get(formState.row, name) || [];\n\n\tconst onAdd = () => {\n\t\tconst newValue = get(formState.row, `_new.${name}`);\n\t\tconst hasNewValue = newValue && Object.keys(newValue).length > 0;\n\t\tif (!hasNewValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tnewValue.id = `temp-${tempId}`;\n\t\tnewValue.type = recordType;\n\t\tsetTempId(tempId + 1);\n\n\t\tconst newRow = { ...formState.row };\n\t\tconst newValues = get(newRow, name) || [];\n\t\tnewValues.push(newValue);\n\n\t\tset(newRow, name, newValues);\n\t\tset(newRow, `_new.${name}`, {});\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\tdirtyIncluded: getNewDirty(formState.dirtyIncluded, `${newValue.type}.${newValue.id}`),\n\t\t\trow: newRow,\n\t\t});\n\n\t\tdocument.getElementById(`_new.${name}.${attributes[0].name}`).focus();\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key !== 'Enter') {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = get(formState.row, `_new.${name}`);\n\t\tconst hasNewValue = newValue && Object.keys(newValue).length > 0;\n\t\tif (hasNewValue) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tonAdd();\n\t\t}\n\t};\n\n\tconst onRemove = (e) => {\n\t\tconst i = e.target.getAttribute('data-index');\n\t\tif (i < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newRow = { ...formState.row };\n\t\tconst newValues = get(newRow, name);\n\t\tnewValues.splice(i, 1);\n\n\t\tset(newRow, name, newValues);\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\trow: newRow,\n\t\t});\n\t};\n\n\tconst afterChange = (e) => {\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\tdirtyIncluded: getNewDirty(formState.dirtyIncluded, e.target.getAttribute('data-unique-name')),\n\t\t});\n\t};\n\n\tconst visibleAttributes = attributes.filter((attribute) => (attribute.type !== 'hidden'));\n\tconst hiddenAttributes = attributes.filter((attribute) => (attribute.type === 'hidden'));\n\thiddenAttributes.push({\n\t\tname: 'id',\n\t\ttype: 'hidden',\n\t});\n\thiddenAttributes.push({\n\t\tname: 'type',\n\t\ttype: 'hidden',\n\t});\n\tconst showHeader = visibleAttributes.some((attribute) => (attribute.label));\n\n\treturn (\n\t\t<table className=\"formosa-has-many\">\n\t\t\t{showHeader && (\n\t\t\t\t<thead className=\"formosa-has-many__head\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{visibleAttributes.map((attribute) => (\n\t\t\t\t\t\t\t<th key={attribute.name}>{attribute.label}</th>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<th />\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t)}\n\t\t\t<tbody className=\"formosa-has-many__body\">\n\t\t\t\t{values.map((value, i) => {\n\t\t\t\t\tlet isRemovable = typeof removable === 'boolean' && removable;\n\t\t\t\t\tif (typeof removable === 'function') {\n\t\t\t\t\t\tisRemovable = removable(value);\n\t\t\t\t\t}\n\t\t\t\t\tconst rowKey = `included.${value.type}.${value.id}`;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr className=\"formosa-has-many__row\" key={rowKey}>\n\t\t\t\t\t\t\t{visibleAttributes.map((attribute) => {\n\t\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\t\tconst fieldKey = `${rowKey}.${attribute.name}`;\n\t\t\t\t\t\t\t\tconst hasError = Object.prototype.hasOwnProperty.call(formState.errors, fieldKey);\n\t\t\t\t\t\t\t\tconst className = ['formosa-has-many__column'];\n\t\t\t\t\t\t\t\tif (hasError) {\n\t\t\t\t\t\t\t\t\tclassName.push('formosa-field--has-error');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td className={className.join(' ')} key={attribute.name}>\n\t\t\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\t\t\tafterChange={afterChange}\n\t\t\t\t\t\t\t\t\t\t\tdata-unique-name={`${name}.${value.id}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t\tname={`${name}.${i}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{hasError && <div className=\"formosa-field__error\">{formState.errors[rowKey].join((<br />))}</div>}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<td className=\"formosa-has-many__column formosa-has-many__column--button\">\n\t\t\t\t\t\t\t\t{hiddenAttributes.map((attribute) => {\n\t\t\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\t\t\tkey={attribute.name}\n\t\t\t\t\t\t\t\t\t\t\tname={`${name}.${i}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-button formosa-button--remove-has-many formosa-has-many__button ${buttonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-index={i}\n\t\t\t\t\t\t\t\t\tdisabled={!isRemovable}\n\t\t\t\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t\t<tfoot className=\"formosa-has-many__foot\">\n\t\t\t\t<tr className=\"formosa-has-many__row formosa-has-many__row--new\">\n\t\t\t\t\t{visibleAttributes.map((attribute) => {\n\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<td className=\"formosa-has-many__column\" key={attribute.name}>\n\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\tname={`_new.${name}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<td className=\"formosa-has-many__column formosa-has-many__column--button\">\n\t\t\t\t\t\t{hiddenAttributes.map((attribute) => {\n\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\tkey={attribute.name}\n\t\t\t\t\t\t\t\t\tname={`_new.${name}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={`formosa-button formosa-button--add-has-many formosa-has-many__button ${buttonClassName}`.trim()}\n\t\t\t\t\t\t\tonClick={onAdd}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tfoot>\n\t\t</table>\n\t);\n}\n\nHasMany.propTypes = {\n\tattributes: PropTypes.array,\n\tbuttonClassName: PropTypes.string,\n\tname: PropTypes.string,\n\trecordType: PropTypes.string.isRequired,\n\tremovable: PropTypes.oneOfType([\n\t\tPropTypes.bool,\n\t\tPropTypes.func,\n\t]),\n};\n\nHasMany.defaultProps = {\n\tattributes: [],\n\tbuttonClassName: '',\n\tname: '',\n\tremovable: true,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Label({\n\tclassName,\n\thtmlFor,\n\tlabel,\n\tnote,\n\trequired,\n\ttype,\n\t...otherProps\n}) {\n\tlet labelClassName = 'formosa-label';\n\tif (required) {\n\t\tlabelClassName += ' formosa-label--required';\n\t}\n\n\tlet wrapperClassName = 'formosa-label-wrapper';\n\tif (type === 'checkbox') {\n\t\twrapperClassName += ' formosa-label-wrapper--checkbox';\n\t}\n\n\tconst props = {};\n\tif (htmlFor && type !== 'has-many') {\n\t\tprops.htmlFor = htmlFor;\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassName}>\n\t\t\t<label className={`${labelClassName} ${className}`.trim()} {...props} {...otherProps}>{label}</label>\n\t\t\t{note && <span className=\"formosa-label__note\">{note}</span>}\n\t\t</div>\n\t);\n}\n\nLabel.propTypes = {\n\tclassName: PropTypes.string,\n\thtmlFor: PropTypes.string,\n\tlabel: PropTypes.string,\n\tnote: PropTypes.string,\n\trequired: PropTypes.bool,\n\ttype: PropTypes.string,\n};\n\nLabel.defaultProps = {\n\tclassName: '',\n\thtmlFor: '',\n\tlabel: '',\n\tnote: '',\n\trequired: false,\n\ttype: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport Error from './Error';\nimport FormContext from './FormContext';\nimport getInputElement from './FieldInput';\nimport HasMany from './Input/HasMany';\nimport Label from './Label';\nimport PropTypes from 'prop-types';\n\nexport default function Field({\n\tcomponent,\n\tdisabled,\n\tid,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tlabel,\n\tlabelAttributes,\n\tlabelClassName,\n\tlabelNote,\n\tlabelPosition,\n\tname,\n\tnote,\n\tprefix,\n\tpostfix,\n\treadOnly,\n\trequired,\n\tsuffix,\n\ttype,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tconst inputProps = { ...otherProps };\n\tif (id) {\n\t\tinputProps.id = id;\n\t}\n\tif (name) {\n\t\tinputProps.name = name;\n\t}\n\tif (disabled) {\n\t\tinputProps.disabled = disabled;\n\t}\n\tif (readOnly) {\n\t\tinputProps.readOnly = readOnly;\n\t}\n\tif (required) {\n\t\tinputProps.required = required;\n\t}\n\tif (suffix) {\n\t\tinputProps.suffix = suffix;\n\t}\n\tif (type) {\n\t\tinputProps.type = type;\n\t\tif (readOnly && type === 'number') {\n\t\t\tinputProps.type = 'text';\n\t\t}\n\t}\n\n\tlet InputComponent = getInputElement(type, component);\n\tif (type === 'has-many') {\n\t\t// This prevents a dependency cycle.\n\t\tInputComponent = HasMany;\n\t}\n\n\tconst input = (\n\t\t<InputComponent {...inputProps} />\n\t);\n\n\tif (type === 'hidden') {\n\t\treturn input;\n\t}\n\n\tconst htmlFor = id || name;\n\n\tconst labelComponent = (\n\t\t<Label\n\t\t\tclassName={labelClassName}\n\t\t\thtmlFor={type === 'datetime' ? `${htmlFor}-month` : htmlFor}\n\t\t\tlabel={label}\n\t\t\tnote={labelNote}\n\t\t\trequired={required}\n\t\t\ttype={type}\n\t\t\t{...labelAttributes}\n\t\t/>\n\t);\n\n\tconst hasError = formState && Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst cleanName = htmlFor.replace(/[^a-z0-9_-]/gi, '');\n\tconst wrapperClassNameList = ['formosa-field'];\n\tif (cleanName) {\n\t\twrapperClassNameList.push(`formosa-field--${cleanName}`);\n\t}\n\tif (wrapperClassName) {\n\t\twrapperClassNameList.push(wrapperClassName);\n\t}\n\tif (hasError) {\n\t\twrapperClassNameList.push('formosa-field--has-error');\n\t}\n\tif (disabled) {\n\t\twrapperClassNameList.push('formosa-field--disabled');\n\t}\n\tif (readOnly) {\n\t\twrapperClassNameList.push('formosa-field--read-only');\n\t}\n\tif (prefix) {\n\t\twrapperClassNameList.push('formosa-field--has-prefix');\n\t}\n\tif (postfix) {\n\t\twrapperClassNameList.push('formosa-field--has-postfix');\n\t}\n\tif (labelPosition === 'after') {\n\t\twrapperClassNameList.push('formosa-field--label-after');\n\t}\n\n\tconst inputWrapperClassNameList = ['formosa-input-wrapper', `formosa-input-wrapper--${type}`];\n\tif (inputWrapperClassName) {\n\t\tinputWrapperClassNameList.push(inputWrapperClassName);\n\t}\n\tif (suffix) {\n\t\tinputWrapperClassNameList.push('formosa-field--has-suffix');\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassNameList.join(' ')} {...wrapperAttributes}>\n\t\t\t{label && labelPosition === 'before' && labelComponent}\n\t\t\t{label && labelPosition === 'after' && <div className=\"formosa-label-wrapper\" />}\n\t\t\t<div className={inputWrapperClassNameList.join(' ')} {...inputWrapperAttributes}>\n\t\t\t\t{prefix}\n\t\t\t\t{input}\n\t\t\t\t{label && labelPosition === 'after' && labelComponent}\n\t\t\t\t{note && (\n\t\t\t\t\t<div className=\"formosa-field__note\">{note}</div>\n\t\t\t\t)}\n\t\t\t\t{postfix}\n\t\t\t\t<Error id={id} name={name} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nField.propTypes = {\n\tcomponent: PropTypes.func,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tlabelNote: PropTypes.string,\n\tlabelPosition: PropTypes.string,\n\tname: PropTypes.string,\n\tnote: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n\treadOnly: PropTypes.bool,\n\trequired: PropTypes.bool,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nField.defaultProps = {\n\tcomponent: null,\n\tdisabled: false,\n\tid: null,\n\tinputWrapperAttributes: {},\n\tinputWrapperClassName: '',\n\tlabel: '',\n\tlabelAttributes: {},\n\tlabelClassName: '',\n\tlabelNote: '',\n\tlabelPosition: 'before',\n\tname: '',\n\tnote: '',\n\tprefix: null,\n\tpostfix: null,\n\treadOnly: false,\n\trequired: false,\n\tsuffix: '',\n\ttype: 'text',\n\twrapperAttributes: {},\n\twrapperClassName: '',\n};\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\taddToast: null,\n\t\tremoveToast: null,\n\t\ttoasts: {},\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\n\nexport default function Message() {\n\tconst { formState } = useContext(FormContext);\n\tconst hasErrors = Object.prototype.hasOwnProperty.call(formState.errors, '');\n\n\treturn (\n\t\t<>\n\t\t\t{hasErrors && (<p className=\"formosa-message formosa-message--error\">{formState.errors[''].join(' ')}</p>)}\n\t\t\t{formState.message && (<p className=\"formosa-message formosa-message--success\">{formState.message}</p>)}\n\t\t</>\n\t);\n}\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from './Helpers/Api';\nimport FormContext from './FormContext';\nimport FormosaContext from './FormosaContext';\nimport { getBody } from './Helpers/JsonApi';\nimport Message from './Message';\nimport PropTypes from 'prop-types';\n\nexport default function FormInner({\n\tafterNoSubmit,\n\tafterSubmit,\n\tbeforeSubmit,\n\tchildren,\n\tclearOnSubmit,\n\tdefaultRow,\n\tfilterBody,\n\tfilterValues,\n\thtmlId,\n\tid,\n\tmethod,\n\tparams,\n\tpath,\n\tpreventEmptyRequest,\n\trelationshipNames,\n\tshowMessage,\n\tsuccessMessageText,\n\tsuccessToastText,\n\t...otherProps\n}) {\n\tconst { formState, setFormState } = useContext(FormContext);\n\tconst { formosaState } = useContext(FormosaContext);\n\n\tconst submitApiRequest = (e) => {\n\t\te.preventDefault();\n\n\t\tif (preventEmptyRequest && formState.dirty.length <= 0) {\n\t\t\tformosaState.addToast('No changes to save.');\n\t\t\tif (afterNoSubmit) {\n\t\t\t\tafterNoSubmit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (beforeSubmit && !beforeSubmit(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet url = path;\n\t\tif (id) {\n\t\t\turl = `${path}/${id}`;\n\t\t}\n\t\tif (params) {\n\t\t\turl += `?${params}`;\n\t\t}\n\n\t\tconst body = getBody(\n\t\t\tmethod,\n\t\t\tpath,\n\t\t\tid,\n\t\t\tformState,\n\t\t\trelationshipNames,\n\t\t\tfilterBody,\n\t\t\tfilterValues\n\t\t);\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\terrors: {},\n\t\t\tmessage: '',\n\t\t});\n\n\t\tApi.request(method, url, body)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst newState = {\n\t\t\t\t\t...formState,\n\t\t\t\t\tdirty: [],\n\t\t\t\t\tdirtyIncluded: [],\n\t\t\t\t\terrors: {},\n\t\t\t\t\tmessage: successMessageText,\n\t\t\t\t};\n\t\t\t\tif (clearOnSubmit) {\n\t\t\t\t\tnewState.row = defaultRow;\n\t\t\t\t}\n\t\t\t\tsetFormState(newState);\n\n\t\t\t\tif (successToastText) {\n\t\t\t\t\tformosaState.addToast(successToastText, 'success');\n\t\t\t\t}\n\t\t\t\tif (afterSubmit) {\n\t\t\t\t\tafterSubmit(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(response, 'errors')) {\n\t\t\t\t\tformosaState.addToast('Error.', 'error');\n\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(response, 'message')) {\n\t\t\t\t\tformosaState.addToast(response.message, 'error', 10000);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tformosaState.addToast('Server error.', 'error');\n\t\t\t\t\tthrow response;\n\t\t\t\t}\n\n\t\t\t\tconst errors = {};\n\t\t\t\tlet key;\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'source')) {\n\t\t\t\t\t\tkey = error.source.pointer.replace('/data/attributes/', '');\n\t\t\t\t\t\tkey = key.replace('/data/meta/', 'meta.');\n\t\t\t\t\t\tif (key.startsWith('/included/')) {\n\t\t\t\t\t\t\tconst i = key.replace(/^\\/included\\/(\\d+)\\/.+$/g, '$1');\n\t\t\t\t\t\t\tconst includedRecord = body.included[parseInt(i, 10)];\n\t\t\t\t\t\t\tkey = key.replace(/^\\/included\\/(\\d+)\\//g, `included.${includedRecord.type}.${includedRecord.id}.`);\n\t\t\t\t\t\t\tkey = key.replace(/\\//g, '.');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!document.querySelector(`[data-name=\"${key}\"].formosa-field__error`)) {\n\t\t\t\t\t\t\tkey = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tkey = '';\n\t\t\t\t\t}\n\t\t\t\t\tif (!Object.prototype.hasOwnProperty.call(errors, key)) {\n\t\t\t\t\t\terrors[key] = [];\n\t\t\t\t\t}\n\t\t\t\t\terrors[key].push(error.title);\n\t\t\t\t});\n\t\t\t\tsetFormState({\n\t\t\t\t\t...formState,\n\t\t\t\t\terrors,\n\t\t\t\t\tmessage: '',\n\t\t\t\t});\n\t\t\t});\n\t};\n\tif (method && path && !Object.prototype.hasOwnProperty.call(otherProps, 'onSubmit')) {\n\t\totherProps.onSubmit = submitApiRequest;\n\t}\n\tif (htmlId) {\n\t\totherProps.id = htmlId;\n\t}\n\n\treturn (\n\t\t<form {...otherProps}>\n\t\t\t{showMessage && <Message />}\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\nFormInner.propTypes = {\n\tafterNoSubmit: PropTypes.func,\n\tafterSubmit: PropTypes.func,\n\tbeforeSubmit: PropTypes.func,\n\tchildren: PropTypes.node,\n\tclearOnSubmit: PropTypes.bool,\n\tdefaultRow: PropTypes.object,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\thtmlId: PropTypes.string,\n\tid: PropTypes.string,\n\tmethod: PropTypes.string,\n\tparams: PropTypes.string,\n\tpath: PropTypes.string,\n\tpreventEmptyRequest: PropTypes.bool,\n\trelationshipNames: PropTypes.array,\n\tshowMessage: PropTypes.bool,\n\tsuccessMessageText: PropTypes.string,\n\tsuccessToastText: PropTypes.string,\n};\n\nFormInner.defaultProps = {\n\tafterNoSubmit: null,\n\tafterSubmit: null,\n\tbeforeSubmit: null,\n\tchildren: null,\n\tclearOnSubmit: false,\n\tdefaultRow: {},\n\tfilterBody: null,\n\tfilterValues: null,\n\thtmlId: '',\n\tid: '',\n\tmethod: null,\n\tparams: '',\n\tpath: null,\n\tpreventEmptyRequest: false,\n\trelationshipNames: [],\n\tshowMessage: true,\n\tsuccessMessageText: '',\n\tsuccessToastText: '',\n};\n","import React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport FormInner from './FormInner';\nimport getNewDirty from './Helpers/FormState';\nimport PropTypes from 'prop-types';\nimport set from 'set-value';\n\nexport default function Form({\n\tchildren,\n\trow,\n\tsetRow,\n\t...otherProps\n}) {\n\tconst [formState, setFormState] = useState({\n\t\tdirty: [],\n\t\tdirtyIncluded: [],\n\t\terrors: {},\n\t\tfiles: {},\n\t\tmessage: '',\n\t\trow,\n\t\tsetRow,\n\t\tsetValues: (fs, e, name, value, afterChange = null, files = null) => {\n\t\t\tlet newDirty = getNewDirty(fs.dirty, name);\n\t\t\tconst newRow = { ...fs.row };\n\t\t\tset(newRow, name, value);\n\n\t\t\tif (afterChange) {\n\t\t\t\tconst additionalChanges = afterChange(e, newRow, value);\n\t\t\t\tObject.keys(additionalChanges).forEach((key) => {\n\t\t\t\t\tset(newRow, key, additionalChanges[key]);\n\t\t\t\t\tnewDirty = getNewDirty(newDirty, key);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst newFormState = {\n\t\t\t\t...fs,\n\t\t\t\tdirty: newDirty,\n\t\t\t\trow: newRow,\n\t\t\t};\n\t\t\tif (files !== null) {\n\t\t\t\tset(newFormState, `files.${name}`, files);\n\t\t\t}\n\n\t\t\tsetFormState(newFormState);\n\t\t\tif (fs.setRow) {\n\t\t\t\tfs.setRow(newRow);\n\t\t\t}\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\trow,\n\t\t});\n\t}, [row]);\n\n\treturn (\n\t\t<FormContext.Provider value={{ formState, setFormState }}>\n\t\t\t<FormInner {...otherProps}>\n\t\t\t\t{children}\n\t\t\t</FormInner>\n\t\t</FormContext.Provider>\n\t);\n}\n\nForm.propTypes = {\n\tchildren: PropTypes.node,\n\trow: PropTypes.object,\n\tsetRow: PropTypes.func,\n};\n\nForm.defaultProps = {\n\tchildren: null,\n\trow: {},\n\tsetRow: null,\n};\n","import React from 'react'; // eslint-disable-line import/no-unresolved\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nconst Spinner = () => {\n\tconst { promiseInProgress } = usePromiseTracker();\n\tif (!promiseInProgress) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<div className=\"formosa-spinner\" />\n\t);\n};\n\nexport default Spinner;\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CloseIcon } from '../svg/x.svg';\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\n\nexport default function Toast({\n\tclassName,\n\tid,\n\tmilliseconds,\n\ttext,\n}) {\n\tconst { formosaState, setFormosaState } = useContext(FormosaContext);\n\tconst removeToast = () => {\n\t\tconst toasts = { ...formosaState.toasts };\n\t\tdelete toasts[id];\n\t\tsetFormosaState({ ...formosaState, toasts });\n\t};\n\treturn (\n\t\t<div className={`formosa-toast ${className}`.trim()} style={{ animationDuration: `${milliseconds}ms` }}>\n\t\t\t<div className=\"formosa-toast__text\">{text}</div>\n\t\t\t<button className=\"formosa-toast__close\" onClick={removeToast} type=\"button\">\n\t\t\t\t<CloseIcon className=\"formosa-toast__close-icon\" height={12} width={12} />\n\t\t\t\tClose\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nToast.propTypes = {\n\tclassName: PropTypes.string,\n\tid: PropTypes.string.isRequired,\n\tmilliseconds: PropTypes.number.isRequired,\n\ttext: PropTypes.string.isRequired,\n};\n\nToast.defaultProps = {\n\tclassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport Toast from './Toast';\n\nexport default function ToastContainer() {\n\tconst { formosaState } = useContext(FormosaContext);\n\treturn (\n\t\t<div className=\"formosa-toast-container\">\n\t\t\t{Object.keys(formosaState.toasts).map((id) => (\n\t\t\t\t<Toast\n\t\t\t\t\tclassName={formosaState.toasts[id].className}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tid={id}\n\t\t\t\t\tmilliseconds={formosaState.toasts[id].milliseconds}\n\t\t\t\t\ttext={formosaState.toasts[id].text}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\nimport Spinner from './Spinner';\nimport ToastContainer from './ToastContainer';\n\nexport default function FormContainer({ children }) {\n\tconst [formosaState, setFormosaState] = useState({\n\t\taddToast: null,\n\t\tremoveToast: null,\n\t\ttoasts: {},\n\t});\n\n\tconst formosaStateRef = useRef(formosaState);\n\tformosaStateRef.current = formosaState;\n\n\tuseEffect(() => {\n\t\tconst removeToast = (toastId) => {\n\t\t\tconst toasts = { ...formosaStateRef.current.toasts };\n\t\t\tdelete toasts[toastId];\n\t\t\tsetFormosaState({ ...formosaStateRef.current, toasts });\n\t\t};\n\t\tconst addToast = (text, type = '', milliseconds = 5000) => {\n\t\t\tconst toastId = new Date().getTime();\n\t\t\tconst toast = {\n\t\t\t\tclassName: type ? `formosa-toast--${type}` : '',\n\t\t\t\ttext,\n\t\t\t\tmilliseconds,\n\t\t\t};\n\t\t\tconst toasts = {\n\t\t\t\t...formosaStateRef.current.toasts,\n\t\t\t\t[toastId]: toast,\n\t\t\t};\n\t\t\tsetFormosaState({ ...formosaStateRef.current, toasts });\n\t\t\tsetTimeout(() => {\n\t\t\t\tformosaStateRef.current.removeToast(toastId);\n\t\t\t}, milliseconds);\n\t\t};\n\t\tsetFormosaState({\n\t\t\t...formosaStateRef.current,\n\t\t\taddToast,\n\t\t\tremoveToast,\n\t\t});\n\t\treturn () => {};\n\t}, []);\n\n\treturn (\n\t\t<FormosaContext.Provider value={{ formosaState, setFormosaState }}>\n\t\t\t{children}\n\t\t\t<Spinner />\n\t\t\t<ToastContainer />\n\t\t</FormosaContext.Provider>\n\t);\n}\n\nFormContainer.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Submit({\n\tclassName,\n\tlabel,\n\tprefix,\n\tpostfix,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className=\"formosa-field formosa-field--submit\">\n\t\t\t<div className=\"formosa-label-wrapper formosa-label-wrapper--submit\" />\n\t\t\t<div className=\"formosa-input-wrapper formosa-input-wrapper--submit\">\n\t\t\t\t{prefix}\n\t\t\t\t<button\n\t\t\t\t\tclassName={`formosa-button formosa-button--submit ${className}`.trim()}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t{...otherProps}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</button>\n\t\t\t\t{postfix}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSubmit.propTypes = {\n\tclassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n};\n\nSubmit.defaultProps = {\n\tclassName: '',\n\tlabel: 'Submit',\n\tprefix: null,\n\tpostfix: null,\n};\n","import './style.scss';\nimport api from './js/Helpers/Api';\nimport { ReactComponent as checkIcon } from './svg/check.svg';\nimport error from './js/Error';\nimport field from './js/Field';\nimport form from './js/Form';\nimport formContainer from './js/FormContainer';\nimport formContext from './js/FormContext';\nimport formosaContext from './js/FormosaContext';\nimport input from './js/Input';\nimport label from './js/Label';\nimport message from './js/Message';\nimport submit from './js/Submit';\n\nexport const Api = api;\nexport const CheckIcon = checkIcon;\nexport const Error = error;\nexport const Field = field;\nexport const Form = form;\nexport const FormContainer = formContainer;\nexport const FormContext = formContext;\nexport const FormosaContext = formosaContext;\nexport const Input = input;\nexport const Label = label;\nexport const Message = message;\nexport const Submit = submit;\n"],"names":["findIncluded","included","id","type","mainRecord","output","Object","prototype","hasOwnProperty","call","attributes","meta","find","data","deserializeSingle","otherRows","includedRecord","keys","relationships","forEach","relationshipName","Array","isArray","rel","i","deserialize","body","push","cleanSingleRelationship","values","cleanRelationship","map","value","getIncluded","dirtyIncluded","relationshipNames","dirtyKeys","key","startsWith","currentKeys","split","k","get","join","set","length","relData","getBody","method","formState","filterBody","filterValues","dirty","row","fileKeys","files","cleanKey","replace","includes","JSON","parse","filenames","filter","filename","formData","FormData","append","stringify","Api","url","request","delete","post","put","options","headers","getToken","Authorization","trackPromise","fetch","process","env","REACT_APP_API_URL","then","response","ok","json","status","catch","error","SyntaxError","errors","title","window","FORMOSA_TOKEN","setToken","token","React","createContext","message","setRow","setValues","Error","name","useContext","FormContext","hasError","props","e","propTypes","PropTypes","string","defaultProps","normalizeOptions","labelKey","valueKey","option","label","escapeRegExp","toSlug","s","toLowerCase","filterByKey","records","escapedValue","record","recordValue","toString","match","RegExp","sort","a","b","aValue","bValue","aPos","indexOf","bPos","localeCompare","Autocomplete","afterAdd","afterChange","clearable","clearButtonAttributes","clearButtonClassName","clearIconAttributes","clearIconHeight","clearIconWidth","clearText","disabled","inputClassName","labelFn","max","optionButtonAttributes","optionButtonClassName","optionListAttributes","optionListClassName","optionListItemAttributes","optionListItemClassName","placeholder","readOnly","removeButtonAttributes","removeButtonClassName","removeIconAttributes","removeIconHeight","removeIconWidth","removeText","setValue","wrapperAttributes","wrapperClassName","otherProps","clearButtonRef","useRef","inputRef","removeButtonRef","setFilter","useState","isOpen","setIsOpen","highlightedIndex","setHighlightedIndex","optionValues","setOptionValues","useEffect","currentValue","undefined","isSelected","findIndex","v","filteredOptions","focus","setTimeout","current","addValue","newValue","target","removeValue","index","splice","onChange","onFocus","onKeyDown","filterValue","numValues","preventDefault","onKeyUp","onClickOption","val","getAttribute","onClickRemoveOption","button","tagName","toUpperCase","parentNode","clear","showClear","className","canAddValues","wrapperProps","trim","display","isJson","o","CloseIcon","optionClassName","func","bool","object","number","oneOfType","array","arrayOf","Checkbox","iconAttributes","iconClassName","iconHeight","iconWidth","checked","CheckIcon","CheckboxList","labelAttributes","labelClassName","listAttributes","listClassName","listItemAttributes","listItemClassName","optionValue","optionValueVal","optionProps","stringToObject","datetimeString","timeZone","year","month","day","hour","minute","second","ampm","parseInt","objectToString","datetimeObject","Select","hideBlank","querySelector","CaretIcon","Datetime","ampmAttributes","convertToTimezone","dayAttributes","hourAttributes","minuteAttributes","monthAttributes","secondAttributes","yearAttributes","console","log","currentValueObject","newValueObject","document","getElementById","am","pm","File","buttonAttributes","buttonClassName","emptyText","imageAttributes","imageClassName","imageHeight","imagePrefix","imagePreview","inputWrapperAttributes","inputWrapperClassName","linkAttributes","linkClassName","linkImage","multiple","required","hasValue","getFilenames","FileList","numFiles","item","getSrcs","URL","createObjectURL","v2","setFilenames","srcs","setSrcs","newFiles","onRemove","prefixClassName","hiddenProps","buttonProps","src","img","ConditionalWrapper","children","condition","node","isRequired","any","Input","suffix","Password","hideText","showText","tempType","setTempType","togglePassword","Radio","Search","SearchIcon","Textarea","component","oldDirty","newDirty","HasMany","recordType","removable","setFormState","tempId","setTempId","onAdd","hasNewValue","newRow","newValues","getNewDirty","stopPropagation","visibleAttributes","attribute","hiddenAttributes","showHeader","some","isRemovable","rowKey","Component","getInputElement","fieldKey","Label","htmlFor","note","Field","labelNote","labelPosition","prefix","postfix","inputProps","InputComponent","input","labelComponent","cleanName","wrapperClassNameList","inputWrapperClassNameList","addToast","removeToast","toasts","Message","hasErrors","FormInner","afterNoSubmit","afterSubmit","beforeSubmit","clearOnSubmit","defaultRow","htmlId","params","path","preventEmptyRequest","showMessage","successMessageText","successToastText","formosaState","FormosaContext","submitApiRequest","newState","source","pointer","onSubmit","Form","fs","additionalChanges","newFormState","Spinner","promiseInProgress","usePromiseTracker","Toast","milliseconds","text","setFormosaState","animationDuration","ToastContainer","FormContainer","formosaStateRef","toastId","Date","getTime","toast","Submit","api","checkIcon","field","form","formContainer","formContext","formosaContext","submit"],"mappings":";;;;;;AAGA,MAAMA,YAAY,GAAG,CAACC,QAAD,EAAWC,EAAX,EAAeC,IAAf,EAAqBC,UAArB,KAAoC;AACxD,MAAIA,UAAU,IAAIF,EAAE,KAAKE,UAAU,CAACF,EAAhC,IAAsCC,IAAI,KAAKC,UAAU,CAACD,IAA9D,EAAoE;AACnE,UAAME,MAAM,GAAG;AACdH,MAAAA,EAAE,EAAEE,UAAU,CAACF,EADD;AAEdC,MAAAA,IAAI,EAAEC,UAAU,CAACD;AAFH,KAAf;;AAIA,QAAIG,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCL,UAArC,EAAiD,YAAjD,CAAJ,EAAoE;AACnEC,MAAAA,MAAM,CAACK,UAAP,GAAoBN,UAAU,CAACM,UAA/B;AACA;;AACD,QAAIJ,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCL,UAArC,EAAiD,MAAjD,CAAJ,EAA8D;AAC7DC,MAAAA,MAAM,CAACM,IAAP,GAAcP,UAAU,CAACO,IAAzB;AACA;;AACD,WAAON,MAAP;AACA;;AACD,SAAOJ,QAAQ,CAACW,IAAT,CAAeC,IAAD,IAAWA,IAAI,CAACX,EAAL,KAAYA,EAAZ,IAAkBW,IAAI,CAACV,IAAL,KAAcA,IAAzD,CAAP;AACA,CAfD;;AAiBA,MAAMW,iBAAiB,GAAG,CAACD,IAAD,EAAOE,SAAS,GAAG,EAAnB,EAAuBd,QAAQ,GAAG,EAAlC,EAAsCG,UAAU,GAAG,IAAnD,KAA4D;AACrF,MAAI,CAACS,IAAL,EAAW;AACV,WAAOA,IAAP;AACA;;AACD,QAAMR,MAAM,GAAG;AACdH,IAAAA,EAAE,EAAEW,IAAI,CAACX,EADK;AAEdC,IAAAA,IAAI,EAAEU,IAAI,CAACV,IAFG;AAGd,OAAGU,IAAI,CAACH;AAHM,GAAf;;AAMA,MAAIJ,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCI,IAArC,EAA2C,eAA3C,CAAJ,EAAiE;AAChE,QAAIG,cAAJ;AACAV,IAAAA,MAAM,CAACW,IAAP,CAAYJ,IAAI,CAACK,aAAjB,EAAgCC,OAAhC,CAAyCC,gBAAD,IAAsB;AAC7Df,MAAAA,MAAM,CAACe,gBAAD,CAAN,GAA2BP,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAAhE;;AACA,UAAIQ,KAAK,CAACC,OAAN,CAAcjB,MAAM,CAACe,gBAAD,CAApB,CAAJ,EAA6C;AAC5Cf,QAAAA,MAAM,CAACe,gBAAD,CAAN,CAAyBD,OAAzB,CAAiC,CAACI,GAAD,EAAMC,CAAN,KAAY;AAC5CR,UAAAA,cAAc,GAAGhB,YAAY,CAACC,QAAD,EAAWsB,GAAG,CAACrB,EAAf,EAAmBqB,GAAG,CAACpB,IAAvB,EAA6BC,UAA7B,CAA7B;;AACA,cAAIY,cAAJ,EAAoB;AACnBX,YAAAA,MAAM,CAACe,gBAAD,CAAN,CAAyBI,CAAzB,IAA8BV,iBAAiB,CAACE,cAAD,EAAiBD,SAAjB,EAA4Bd,QAA5B,EAAsCG,UAAtC,CAA/C;AACA,WAFD,MAEO;AACNY,YAAAA,cAAc,GAAGhB,YAAY,CAACe,SAAD,EAAYQ,GAAG,CAACrB,EAAhB,EAAoBqB,GAAG,CAACpB,IAAxB,EAA8BC,UAA9B,CAA7B;;AACA,gBAAIY,cAAJ,EAAoB;AACnBX,cAAAA,MAAM,CAACe,gBAAD,CAAN,CAAyBI,CAAzB,IAA8BV,iBAAiB,CAACE,cAAD,EAAiBD,SAAjB,EAA4Bd,QAA5B,EAAsCG,UAAtC,CAA/C;AACA;AACD;AACD,SAVD;AAWA,OAZD,MAYO,IAAIC,MAAM,CAACe,gBAAD,CAAN,KAA6B,IAAjC,EAAuC;AAC7CJ,QAAAA,cAAc,GAAGhB,YAAY,CAACC,QAAD,EAAWI,MAAM,CAACe,gBAAD,CAAN,CAAyBlB,EAApC,EAAwCG,MAAM,CAACe,gBAAD,CAAN,CAAyBjB,IAAjE,EAAuEC,UAAvE,CAA7B;;AACA,YAAIY,cAAJ,EAAoB;AACnBX,UAAAA,MAAM,CAACe,gBAAD,CAAN,GAA2BN,iBAAiB,CAACE,cAAD,EAAiBD,SAAjB,EAA4Bd,QAA5B,EAAsCG,UAAtC,CAA5C;AACA,SAFD,MAEO;AACNY,UAAAA,cAAc,GAAGhB,YAAY,CAACe,SAAD,EAAYV,MAAM,CAACe,gBAAD,CAAN,CAAyBlB,EAArC,EAAyCG,MAAM,CAACe,gBAAD,CAAN,CAAyBjB,IAAlE,EAAwEC,UAAxE,CAA7B;;AACA,cAAIY,cAAJ,EAAoB;AACnBX,YAAAA,MAAM,CAACe,gBAAD,CAAN,GAA2BN,iBAAiB,CAACE,cAAD,EAAiBD,SAAjB,EAA4Bd,QAA5B,EAAsCG,UAAtC,CAA5C;AACA;AACD;AACD;AACD,KAzBD;AA0BA;;AAED,MAAIE,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCI,IAArC,EAA2C,MAA3C,CAAJ,EAAwD;AACvDR,IAAAA,MAAM,CAACM,IAAP,GAAcE,IAAI,CAACF,IAAnB;AACA;;AAED,SAAON,MAAP;AACA,CA7CD;;AA+CO,MAAMoB,WAAW,GAAIC,IAAD,IAAU;AACpC,MAAIL,KAAK,CAACC,OAAN,CAAcI,IAAI,CAACb,IAAnB,CAAJ,EAA8B;AAC7B,UAAMR,MAAM,GAAG,EAAf;AACAqB,IAAAA,IAAI,CAACb,IAAL,CAAUM,OAAV,CAAmBN,IAAD,IAAU;AAC3BR,MAAAA,MAAM,CAACsB,IAAP,CAAYb,iBAAiB,CAACD,IAAD,EAAOa,IAAI,CAACb,IAAZ,EAAkBa,IAAI,CAACzB,QAAvB,EAAiC,IAAjC,CAA7B;AACA,KAFD;AAGA,WAAOI,MAAP;AACA;;AACD,SAAOS,iBAAiB,CAACY,IAAI,CAACb,IAAN,EAAY,EAAZ,EAAgBa,IAAI,CAACzB,QAArB,EAA+ByB,IAAI,CAACb,IAApC,CAAxB;AACA,CATM;;AAWP,MAAMe,uBAAuB,GAAIC,MAAD,KAAa;AAC5C3B,EAAAA,EAAE,EAAE2B,MAAM,CAAC3B,EADiC;AAE5CC,EAAAA,IAAI,EAAE0B,MAAM,CAAC1B;AAF+B,CAAb,CAAhC;;AAKA,MAAM2B,iBAAiB,GAAID,MAAD,IAAY;AACrC,MAAIR,KAAK,CAACC,OAAN,CAAcO,MAAd,CAAJ,EAA2B;AAC1B,WAAOA,MAAM,CAACE,GAAP,CAAYC,KAAD,IAAWJ,uBAAuB,CAACI,KAAD,CAA7C,CAAP;AACA;;AACD,SAAOJ,uBAAuB,CAACC,MAAD,CAA9B;AACA,CALD;;AAOA,MAAMI,WAAW,GAAG,CAACpB,IAAD,EAAOqB,aAAP,EAAsBC,iBAAtB,KAA4C;AAC/D,QAAMlC,QAAQ,GAAG,EAAjB;AAEA,QAAMmC,SAAS,GAAG,EAAlB;AACAF,EAAAA,aAAa,CAACf,OAAd,CAAuBkB,GAAD,IAAS;AAC9B,QAAI,CAACA,GAAG,CAACC,UAAJ,CAAe,OAAf,CAAL,EAA8B;AAC7B,YAAMC,WAAW,GAAG,EAApB;AACAF,MAAAA,GAAG,CAACG,KAAJ,CAAU,GAAV,EAAerB,OAAf,CAAwBsB,CAAD,IAAO;AAC7BF,QAAAA,WAAW,CAACZ,IAAZ,CAAiBc,CAAjB;;AACA,YAAI,OAAOC,GAAG,CAACN,SAAD,EAAYG,WAAW,CAACI,IAAZ,CAAiB,GAAjB,CAAZ,CAAV,KAAiD,WAArD,EAAkE;AACjEC,UAAAA,GAAG,CAACR,SAAD,EAAYG,WAAW,CAACI,IAAZ,CAAiB,GAAjB,CAAZ,EAAmC,EAAnC,CAAH;AACA;AACD,OALD;AAMA;AACD,GAVD;AAYAR,EAAAA,iBAAiB,CAAChB,OAAlB,CAA2BC,gBAAD,IAAsB;AAC/C,QAAI,CAACd,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCI,IAAI,CAACK,aAA1C,EAAyDE,gBAAzD,CAAL,EAAiF;AAEhF;AACA;;AAED,QAAI,CAACd,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC2B,SAArC,EAAgDhB,gBAAhD,CAAL,EAAwE;AAEvE;AACA;;AAED,QAAI,CAACC,KAAK,CAACC,OAAN,CAAcT,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAAnD,CAAL,EAA+D;AAC9D;AACA;;AAEDA,IAAAA,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAArC,CAA0CM,OAA1C,CAAmDI,GAAD,IAAS;AAC1D,UAAIjB,MAAM,CAACW,IAAP,CAAYM,GAAZ,EAAiBsB,MAAjB,IAA2B,CAA/B,EAAkC;AAEjC;AACA;;AAED,UAAIvC,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC2B,SAAS,CAAChB,gBAAD,CAA9C,EAAkEG,GAAG,CAACrB,EAAtE,CAAJ,EAA+E;AAC9E,cAAM4C,OAAO,GAAG;AACf5C,UAAAA,EAAE,EAAEqB,GAAG,CAACrB,EADO;AAEfC,UAAAA,IAAI,EAAEoB,GAAG,CAACpB,IAFK;AAGfO,UAAAA,UAAU,EAAE;AAHG,SAAhB;;AAMA,YAAIJ,MAAM,CAACW,IAAP,CAAYmB,SAAS,CAAChB,gBAAD,CAAT,CAA4BG,GAAG,CAACrB,EAAhC,CAAZ,EAAiD2C,MAAjD,KAA4D,CAAhE,EAAmE;AAElEvC,UAAAA,MAAM,CAACW,IAAP,CAAYM,GAAZ,EAAiBJ,OAAjB,CAA0BkB,GAAD,IAAS;AACjC,gBAAIA,GAAG,KAAK,IAAR,IAAgBA,GAAG,KAAK,MAA5B,EAAoC;AACnCO,cAAAA,GAAG,CAACE,OAAO,CAACpC,UAAT,EAAqB2B,GAArB,EAA0Bd,GAAG,CAACc,GAAD,CAA7B,CAAH;AACA;AACD,WAJD;AAKA,SAPD,MAOO;AAEN/B,UAAAA,MAAM,CAACW,IAAP,CAAYM,GAAZ,EAAiBJ,OAAjB,CAA0BkB,GAAD,IAAS;AACjC,gBAAI/B,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC2B,SAAS,CAAChB,gBAAD,CAAT,CAA4BG,GAAG,CAACrB,EAAhC,CAArC,EAA0EmC,GAA1E,CAAJ,EAAoF;AACnFO,cAAAA,GAAG,CAACE,OAAO,CAACpC,UAAT,EAAqB2B,GAArB,EAA0Bd,GAAG,CAACc,GAAD,CAA7B,CAAH;AACA;AACD,WAJD;AAKA;;AACDpC,QAAAA,QAAQ,CAAC0B,IAAT,CAAcmB,OAAd;AACA;AACD,KA9BD;AA+BA,GA9CD;AAgDA,SAAO7C,QAAP;AACA,CAjED;;AAmEO,MAAM8C,OAAO,GAAG,CACtBC,MADsB,EAEtB7C,IAFsB,EAGtBD,EAHsB,EAItB+C,SAJsB,EAKtBd,iBALsB,EAMtBe,UANsB,EAOtBC,YAPsB,KAQlB;AACJ,MAAIzB,IAAI,GAAG,IAAX;;AAEA,MAAIsB,MAAM,KAAK,KAAX,IAAoBA,MAAM,KAAK,MAAnC,EAA2C;AAC1CtB,IAAAA,IAAI,GAAG,EAAP;AACA,UAAMb,IAAI,GAAG;AACZV,MAAAA,IADY;AAEZO,MAAAA,UAAU,EAAE,EAFA;AAGZC,MAAAA,IAAI,EAAE,EAHM;AAIZO,MAAAA,aAAa,EAAE;AAJH,KAAb;AAMA,UAAMD,IAAI,GAAG+B,MAAM,KAAK,KAAX,GAAmBC,SAAS,CAACG,KAA7B,GAAqC9C,MAAM,CAACW,IAAP,CAAYgC,SAAS,CAACI,GAAtB,CAAlD;;AAEA,QAAIL,MAAM,KAAK,KAAX,IAAoB9C,EAAxB,EAA4B;AAC3BW,MAAAA,IAAI,CAACX,EAAL,GAAUA,EAAV;AACA;;AAED,QAAI2B,MAAM,GAAG,EAAE,GAAGoB,SAAS,CAACI;AAAf,KAAb;;AACA,QAAIF,YAAJ,EAAkB;AACjBtB,MAAAA,MAAM,GAAGsB,YAAY,CAACtB,MAAD,CAArB;AACA;;AAED,UAAMyB,QAAQ,GAAGhD,MAAM,CAACW,IAAP,CAAYgC,SAAS,CAACM,KAAtB,CAAjB;AAEAtC,IAAAA,IAAI,CAACE,OAAL,CAAckB,GAAD,IAAS;AACrB,YAAMmB,QAAQ,GAAGnB,GAAG,CAACoB,OAAJ,CAAY,OAAZ,EAAqB,EAArB,CAAjB;;AACA,UAAItB,iBAAiB,CAACuB,QAAlB,CAA2BF,QAA3B,CAAJ,EAA0C;AACzC3C,QAAAA,IAAI,CAACK,aAAL,CAAmBsC,QAAnB,IAA+B;AAC9B3C,UAAAA,IAAI,EAAE6B,GAAG,CAACb,MAAD,EAAS2B,QAAT;AADqB,SAA/B;AAGA,OAJD,MAIO,IAAIrB,iBAAiB,CAACuB,QAAlB,CAA2BrB,GAA3B,CAAJ,EAAqC;AAC3CxB,QAAAA,IAAI,CAACK,aAAL,CAAmBmB,GAAnB,IAA0B;AACzBxB,UAAAA,IAAI,EAAE6B,GAAG,CAACb,MAAD,EAAS2B,QAAT;AADgB,SAA1B;AAGA,OAJM,MAIA,IAAInB,GAAG,CAACC,UAAJ,CAAe,OAAf,CAAJ,EAA6B;AACnCM,QAAAA,GAAG,CAAC/B,IAAD,EAAOwB,GAAP,EAAYK,GAAG,CAACb,MAAD,EAASQ,GAAT,CAAf,CAAH;AACA,OAFM,MAEA,IAAIA,GAAG,KAAK,MAAZ,EAAoB;AAC1BxB,QAAAA,IAAI,CAACF,IAAL,GAAYkB,MAAM,CAAClB,IAAnB;AACA,OAFM,MAEA,IAAI2C,QAAQ,CAACI,QAAT,CAAkBrB,GAAlB,CAAJ,EAA4B;AAClCO,QAAAA,GAAG,CAAC/B,IAAI,CAACH,UAAN,EAAkB2B,GAAlB,EAAuB,IAAvB,CAAH;AACA,OAFM,MAEA,IAAIA,GAAG,KAAK,MAAR,IAAkB,CAACA,GAAG,CAACC,UAAJ,CAAe,OAAf,CAAvB,EAAgD;AACtDM,QAAAA,GAAG,CAAC/B,IAAI,CAACH,UAAN,EAAkB2B,GAAlB,EAAuBK,GAAG,CAACb,MAAD,EAASQ,GAAT,CAA1B,CAAH;AACA;AACD,KAnBD;AAqBAX,IAAAA,IAAI,CAACb,IAAL,GAAYA,IAAZ;AAEA,UAAMZ,QAAQ,GAAGgC,WAAW,CAACpB,IAAD,EAAOoC,SAAS,CAACf,aAAjB,EAAgCC,iBAAhC,CAA5B;;AACA,QAAIlC,QAAQ,CAAC4C,MAAT,GAAkB,CAAtB,EAAyB;AACxBnB,MAAAA,IAAI,CAACzB,QAAL,GAAgBA,QAAhB;AACA;;AAEDK,IAAAA,MAAM,CAACW,IAAP,CAAYJ,IAAI,CAACK,aAAjB,EAAgCC,OAAhC,CAAyCC,gBAAD,IAAsB;AAC7D,UAAI,OAAOP,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAA5C,KAAqD,QAAzD,EAAmE;AAClEA,QAAAA,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAArC,GAA4C8C,IAAI,CAACC,KAAL,CAAW/C,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAAhD,CAA5C;AACA;;AACD,UAAIQ,KAAK,CAACC,OAAN,CAAcT,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAAnD,CAAJ,EAA8D;AAC7DA,QAAAA,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAArC,GAA4CA,IAAI,CAACK,aAAL,CAAmBE,gBAAnB,EAAqCP,IAArC,CAA0CkB,GAA1C,CAA+CR,GAAD,IAAUO,iBAAiB,CAACP,GAAD,CAAzE,CAA5C;AACA;AACD,KAPD;;AASA,QAAI2B,UAAJ,EAAgB;AACfxB,MAAAA,IAAI,GAAGwB,UAAU,CAACxB,IAAD,EAAOuB,SAAS,CAACI,GAAjB,CAAjB;AACA;;AAED,QAAI/C,MAAM,CAACW,IAAP,CAAYJ,IAAI,CAACH,UAAjB,EAA6BmC,MAA7B,IAAuC,CAA3C,EAA8C;AAC7C,aAAOhC,IAAI,CAACH,UAAZ;AACA;;AACD,QAAIJ,MAAM,CAACW,IAAP,CAAYJ,IAAI,CAACF,IAAjB,EAAuBkC,MAAvB,IAAiC,CAArC,EAAwC;AACvC,aAAOhC,IAAI,CAACF,IAAZ;AACA;;AACD,QAAIL,MAAM,CAACW,IAAP,CAAYJ,IAAI,CAACK,aAAjB,EAAgC2B,MAAhC,IAA0C,CAA9C,EAAiD;AAChD,aAAOhC,IAAI,CAACK,aAAZ;AACA;;AAED,UAAM2C,SAAS,GAAGP,QAAQ,CAACQ,MAAT,CAAiBC,QAAD,IAAed,SAAS,CAACM,KAAV,CAAgBQ,QAAhB,MAA8B,KAA7D,CAAlB;;AACA,QAAIF,SAAS,CAAChB,MAAV,GAAmB,CAAvB,EAA0B;AACzB,YAAMmB,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBP,IAAI,CAACQ,SAAL,CAAezC,IAAf,CAAxB;AACAsC,MAAAA,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBP,IAAI,CAACQ,SAAL,CAAeN,SAAf,CAAzB;AAEAA,MAAAA,SAAS,CAAC1C,OAAV,CAAmB4C,QAAD,IAAc;AAC/BC,QAAAA,QAAQ,CAACE,MAAT,CAAgBH,QAAhB,EAA0Bd,SAAS,CAACM,KAAV,CAAgBQ,QAAhB,CAA1B;AACA,OAFD;AAIArC,MAAAA,IAAI,GAAGsC,QAAP;AACA,KAVD,MAUO;AACNtC,MAAAA,IAAI,GAAGiC,IAAI,CAACQ,SAAL,CAAezC,IAAf,CAAP;AACA;AACD;;AAED,SAAOA,IAAP;AACA,CApGM;;AC1JQ,MAAM0C,GAAN,CAAU;AACd,SAAH1B,GAAG,CAAC2B,GAAD,EAAM;AACf,WAAOD,GAAG,CAACE,OAAJ,CAAY,KAAZ,EAAmBD,GAAnB,CAAP;AACA;;AAEY,SAANE,MAAM,CAACF,GAAD,EAAM;AAClB,WAAOD,GAAG,CAACE,OAAJ,CAAY,QAAZ,EAAsBD,GAAtB,CAAP;AACA;;AAEU,SAAJG,IAAI,CAACH,GAAD,EAAM3C,IAAN,EAAY;AACtB,WAAO0C,GAAG,CAACE,OAAJ,CAAY,MAAZ,EAAoBD,GAApB,EAAyB3C,IAAzB,CAAP;AACA;;AAES,SAAH+C,GAAG,CAACJ,GAAD,EAAM3C,IAAN,EAAY;AACrB,WAAO0C,GAAG,CAACE,OAAJ,CAAY,KAAZ,EAAmBD,GAAnB,EAAwB3C,IAAxB,CAAP;AACA;;AAEa,SAAP4C,OAAO,CAACtB,MAAD,EAASqB,GAAT,EAAc3C,IAAI,GAAG,IAArB,EAA2B;AACxC,UAAMgD,OAAO,GAAG;AACf1B,MAAAA,MADe;AAEf2B,MAAAA,OAAO,EAAE;AACR,4BAAoB;AADZ;AAFM,KAAhB;;AAMA,QAAI,OAAOjD,IAAP,KAAgB,QAApB,EAA8B;AAC7BgD,MAAAA,OAAO,CAACC,OAAR,CAAgB,cAAhB,IAAkC,kBAAlC;AACA;;AACD,QAAIP,GAAG,CAACQ,QAAJ,EAAJ,EAAoB;AACnBF,MAAAA,OAAO,CAACC,OAAR,CAAgBE,aAAhB,GAAiC,UAAST,GAAG,CAACQ,QAAJ,EAAe,EAAzD;AACA;;AACD,QAAIlD,IAAJ,EAAU;AACTgD,MAAAA,OAAO,CAAChD,IAAR,GAAeA,IAAf;AACA;;AAED,WAAOoD,YAAY,CAClBC,KAAK,CAAE,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,IAAGb,GAAI,EAAzC,EAA4CK,OAA5C,CAAL,CACES,IADF,CACQC,QAAD,IAAc;AACnB,UAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AACjB,eAAOD,QAAQ,CAACE,IAAT,GACLH,IADK,CACCG,IAAD,IAAU;AACfA,UAAAA,IAAI,CAACC,MAAL,GAAcH,QAAQ,CAACG,MAAvB;AACA,gBAAMD,IAAN;AACA,SAJK,EAKLE,KALK,CAKEC,KAAD,IAAW;AACjB,cAAIA,KAAK,YAAYC,WAArB,EAAkC;AACjC,kBAAM;AACLC,cAAAA,MAAM,EAAE,CACP;AACCC,gBAAAA,KAAK,EAAE,mCADR;AAECL,gBAAAA,MAAM,EAAE;AAFT,eADO,CADH;AAOLA,cAAAA,MAAM,EAAE;AAPH,aAAN;AASA,WAVD,MAUO;AACN,kBAAME,KAAN;AACA;AACD,SAnBK,CAAP;AAoBA;;AACD,UAAIL,QAAQ,CAACG,MAAT,KAAoB,GAAxB,EAA6B;AAC5B,eAAO,EAAP;AACA;;AACD,aAAOH,QAAQ,CAACE,IAAT,EAAP;AACA,KA5BF,EA6BEH,IA7BF,CA6BQG,IAAD,IAAU;AACf,UAAIhF,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC6E,IAArC,EAA2C,MAA3C,CAAJ,EAAwD;AACvD,eAAO7D,WAAW,CAAC6D,IAAD,CAAlB;AACA;;AACD,aAAOA,IAAP;AACA,KAlCF,CADkB,CAAnB;AAqCA;;AAEc,SAARV,QAAQ,GAAG;AACjB,WAAOiB,MAAM,CAACC,aAAd;AACA;;AAEc,SAARC,QAAQ,CAACC,KAAD,EAAQ;AACtBH,IAAAA,MAAM,CAACC,aAAP,GAAuBE,KAAvB;AACA;;AA/EuB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDzB,+BAAeC,cAAK,CAACC,aAAN,CACd;AACC9C,EAAAA,KAAK,EAAE,EADR;AAEClB,EAAAA,aAAa,EAAE,EAFhB;AAGCyD,EAAAA,MAAM,EAAE,EAHT;AAICpC,EAAAA,KAAK,EAAE,EAJR;AAKC4C,EAAAA,OAAO,EAAE,EALV;AAMC9C,EAAAA,GAAG,EAAE,EANN;AAOC+C,EAAAA,MAAM,EAAE,IAPT;AAQCC,EAAAA,SAAS,EAAE;AARZ,CADc,CAAf;;ACEe,SAASC,OAAT,CAAe;AAC7BpG,EAAAA,EAD6B;AAE7BqG,EAAAA;AAF6B,CAAf,EAGZ;AACF,QAAM;AAAEtD,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AACA,QAAMC,QAAQ,GAAGzD,SAAS,IAAI3C,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCwC,SAAS,CAAC0C,MAA/C,EAAuDY,IAAvD,CAA9B;AAEA,QAAMI,KAAK,GAAG,EAAd;;AACA,MAAIJ,IAAJ,EAAU;AAETI,IAAAA,KAAK,CAAC,WAAD,CAAL,GAAqBJ,IAArB;AACA;;AACD,MAAIrG,EAAE,IAAIqG,IAAV,EAAgB;AACfI,IAAAA,KAAK,CAACzG,EAAN,GAAY,GAAEA,EAAE,IAAIqG,IAAK,QAAzB;AACA;;AAED,sBACCN;AAAA,eAAe;AAAf,KAA0CU,KAA1C,GACED,QAAQ,IAAIzD,SAAS,CAAC0C,MAAV,CAAiBY,IAAjB,EAAuBxE,GAAvB,CAA4B6E,CAAD,iBAAQX;AAAK,IAAA,GAAG,EAAEW;AAAV,KAAcA,CAAd,CAAnC,CADd,CADD;AAKA;AAEDN,OAAK,CAACO,SAAN,GAAkB;AACjB3G,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MADG;AAEjBR,EAAAA,IAAI,EAAEO,SAAS,CAACC;AAFC,CAAlB;AAKAT,OAAK,CAACU,YAAN,GAAqB;AACpB9G,EAAAA,EAAE,EAAE,IADgB;AAEpBqG,EAAAA,IAAI,EAAE;AAFc,CAArB;;AC9BO,MAAMU,gBAAgB,GAAG,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAAQ,GAAG,IAA/B,KAAwC;AACvE,MAAI,CAACzC,OAAL,EAAc;AACb,WAAO,EAAP;AACA;;AAED,QAAMrE,MAAM,GAAG,EAAf;;AACA,MAAIgB,KAAK,CAACC,OAAN,CAAcoD,OAAd,CAAJ,EAA4B;AAC3BA,IAAAA,OAAO,CAACvD,OAAR,CAAiBiG,MAAD,IAAY;AAC3B,UAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC/B/G,QAAAA,MAAM,CAACsB,IAAP,CAAY;AACX0F,UAAAA,KAAK,EAAED,MADI;AAEXpF,UAAAA,KAAK,EAAEoF;AAFI,SAAZ;AAIA,OALD,MAKO;AACN/G,QAAAA,MAAM,CAACsB,IAAP,CAAY,EACX,GAAGyF,MADQ;AAEXC,UAAAA,KAAK,EAAE,OAAOH,QAAP,KAAoB,UAApB,GAAiCA,QAAQ,CAACE,MAAD,CAAzC,GAAoD1E,GAAG,CAAC0E,MAAD,EAASF,QAAT,CAFnD;AAGXlF,UAAAA,KAAK,EAAE,OAAOmF,QAAP,KAAoB,UAApB,GAAiCA,QAAQ,CAACC,MAAD,CAAzC,GAAoD1E,GAAG,CAAC0E,MAAD,EAASD,QAAT;AAHnD,SAAZ;AAKA;AACD,KAbD;AAcA,GAfD,MAeO;AACN7G,IAAAA,MAAM,CAACW,IAAP,CAAYyD,OAAZ,EAAqBvD,OAArB,CAA8Ba,KAAD,IAAW;AACvC,YAAMoF,MAAM,GAAG1C,OAAO,CAAC1C,KAAD,CAAtB;;AACA,UAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC9B3B,QAAAA,MAAM,CAACsB,IAAP,CAAY;AACX0F,UAAAA,KAAK,EAAED,MADI;AAEXpF,UAAAA;AAFW,SAAZ;AAIA,OALD,MAKO;AACN3B,QAAAA,MAAM,CAACsB,IAAP,CAAY,EACX,GAAGyF,MADQ;AAEXC,UAAAA,KAAK,EAAE,OAAOH,QAAP,KAAoB,UAApB,GAAiCA,QAAQ,CAACE,MAAD,CAAzC,GAAoD1E,GAAG,CAAC0E,MAAD,EAASF,QAAT,CAFnD;AAGXlF,UAAAA,KAAK,EAAE,OAAOmF,QAAP,KAAoB,UAApB,GAAiCA,QAAQ,CAACC,MAAD,CAAzC,GAAoD1E,GAAG,CAAC0E,MAAD,EAASD,QAAT;AAHnD,SAAZ;AAKA;AACD,KAdD;AAeA;;AAED,SAAO9G,MAAP;AACA,CAxCM;AA2CP,AAAO,MAAMiH,YAAY,GAAIP,MAAD,IAAaA,MAAM,CAACtD,OAAP,CAAe,uBAAf,EAAwC,MAAxC,CAAlC;;AAEP,MAAM8D,MAAM,GAAIC,CAAD,IACdA,CAAC,CAACC,WAAF,GACEhE,OADF,CACU,MADV,EACkB,OADlB,EAEEA,OAFF,CAEU,UAFV,EAEsB,EAFtB,EAGEA,OAHF,CAGU,QAHV,EAGoB,EAHpB,EAIEA,OAJF,CAIU,cAJV,EAI0B,GAJ1B,EAKEA,OALF,CAKU,KALV,EAKiB,EALjB,EAMEA,OANF,CAMU,KANV,EAMiB,EANjB,EAOEA,OAPF,CAOU,MAPV,EAOkB,GAPlB,CADD;;AAWA,AAAO,MAAMiE,WAAW,GAAG,CAACC,OAAD,EAAUtF,GAAV,EAAeL,KAAf,KAAyB;AACnDA,EAAAA,KAAK,GAAGA,KAAK,CAACyF,WAAN,EAAR;AACA,QAAMG,YAAY,GAAGN,YAAY,CAACtF,KAAD,CAAjC;AACA2F,EAAAA,OAAO,GAAGA,OAAO,CAAC7D,MAAR,CAAgB+D,MAAD,IAAY;AACpC,UAAMC,WAAW,GAAGpF,GAAG,CAACmF,MAAD,EAASxF,GAAT,CAAH,CAAiB0F,QAAjB,GAA4BN,WAA5B,MAA6C,EAAjE;AACA,WAAOK,WAAW,CAACE,KAAZ,CAAkB,IAAIC,MAAJ,CAAY,aAAYL,YAAa,EAArC,CAAlB,CAAP;AACA,GAHS,CAAV;AAIA5F,EAAAA,KAAK,GAAGuF,MAAM,CAACvF,KAAD,CAAd;AACA2F,EAAAA,OAAO,GAAGA,OAAO,CAACO,IAAR,CAAa,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAChC,UAAMC,MAAM,GAAGd,MAAM,CAAC7E,GAAG,CAACyF,CAAD,EAAI9F,GAAJ,CAAH,CAAY0F,QAAZ,EAAD,CAArB;AACA,UAAMO,MAAM,GAAGf,MAAM,CAAC7E,GAAG,CAAC0F,CAAD,EAAI/F,GAAJ,CAAH,CAAY0F,QAAZ,EAAD,CAArB;AACA,UAAMQ,IAAI,GAAGF,MAAM,CAACG,OAAP,CAAexG,KAAf,MAA0B,CAAvC;AACA,UAAMyG,IAAI,GAAGH,MAAM,CAACE,OAAP,CAAexG,KAAf,MAA0B,CAAvC;;AACA,QAAKuG,IAAI,IAAIE,IAAT,IAAmB,CAACF,IAAD,IAAS,CAACE,IAAjC,EAAwC;AACvC,aAAOJ,MAAM,CAACK,aAAP,CAAqBJ,MAArB,CAAP;AACA;;AACD,QAAIC,IAAI,IAAI,CAACE,IAAb,EAAmB;AAClB,aAAO,CAAC,CAAR;AACA;;AACD,WAAO,CAAP;AACA,GAZS,CAAV;AAaA,SAAOd,OAAP;AACA,CAtBM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClDQ,SAASgB,YAAT,CAAsB;AACpCC,EAAAA,QADoC;AAEpCC,EAAAA,WAFoC;AAGpCC,EAAAA,SAHoC;AAIpCC,EAAAA,qBAJoC;AAKpCC,EAAAA,oBALoC;AAMpCC,EAAAA,mBANoC;AAOpCC,EAAAA,eAPoC;AAQpCC,EAAAA,cARoC;AASpCC,EAAAA,SAToC;AAUpCC,EAAAA,QAVoC;AAWpCnJ,EAAAA,EAXoC;AAYpCoJ,EAAAA,cAZoC;AAapCC,EAAAA,OAboC;AAcpCrC,EAAAA,QAdoC;AAepCsC,EAAAA,GAfoC;AAgBpCjD,EAAAA,IAhBoC;AAiBpCkD,EAAAA,sBAjBoC;AAkBpCC,EAAAA,qBAlBoC;AAmBpCC,EAAAA,oBAnBoC;AAoBpCC,EAAAA,mBApBoC;AAqBpCC,EAAAA,wBArBoC;AAsBpCC,EAAAA,uBAtBoC;AAuBpCpF,EAAAA,OAvBoC;AAwBpCqF,EAAAA,WAxBoC;AAyBpCC,EAAAA,QAzBoC;AA0BpCC,EAAAA,sBA1BoC;AA2BpCC,EAAAA,qBA3BoC;AA4BpCC,EAAAA,oBA5BoC;AA6BpCC,EAAAA,gBA7BoC;AA8BpCC,EAAAA,eA9BoC;AA+BpCC,EAAAA,UA/BoC;AAgCpCC,EAAAA,QAhCoC;AAiCpClG,EAAAA,GAjCoC;AAkCpCrC,EAAAA,KAlCoC;AAmCpCmF,EAAAA,QAnCoC;AAoCpCqD,EAAAA,iBApCoC;AAqCpCC,EAAAA,gBArCoC;AAsCpC,KAAGC;AAtCiC,CAAtB,EAuCZ;AACF,QAAM;AAAEzH,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AACA,QAAMkE,cAAc,GAAGC,MAAM,CAAC,IAAD,CAA7B;AACA,QAAMC,QAAQ,GAAGD,MAAM,CAAC,IAAD,CAAvB;AACA,QAAME,eAAe,GAAGF,MAAM,CAAC,IAAD,CAA9B;AACA,QAAM,CAAC9G,MAAD,EAASiH,SAAT,IAAsBC,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBF,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACG,gBAAD,EAAmBC,mBAAnB,IAA0CJ,QAAQ,CAAC,CAAD,CAAxD;AACA,QAAM,CAACK,YAAD,EAAeC,eAAf,IAAkCN,QAAQ,CAACtG,OAAO,GAAGuC,gBAAgB,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAApB,CAAnB,GAAmD,EAA3D,CAAhD;AAEAoE,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIlH,GAAJ,EAAS;AACRD,MAAAA,GAAG,CAAC1B,GAAJ,CAAQ2B,GAAR,EACEc,IADF,CACQC,QAAD,IAAc;AACnBkG,QAAAA,eAAe,CAACrE,gBAAgB,CAAC7B,QAAD,EAAW8B,QAAX,EAAqBC,QAArB,CAAjB,CAAf;AACA,OAHF;AAIA;;AACD,WAAO,MAAM,EAAb;AACA,GARQ,EAQN,CAAC9C,GAAD,CARM,CAAT;AAUAkH,EAAAA,SAAS,CAAC,MAAM;AACfD,IAAAA,eAAe,CAAC5G,OAAO,GAAGuC,gBAAgB,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAApB,CAAnB,GAAmD,EAA3D,CAAf;AACA,WAAO,MAAM,EAAb;AACA,GAHQ,EAGN,CAACzC,OAAD,CAHM,CAAT;AAKA,MAAI8G,YAAY,GAAG,EAAnB;;AACA,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACtBiB,IAAAA,YAAY,GAAGxJ,KAAf;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,6DAAV,CAAN;AACA;;AACDkF,IAAAA,YAAY,GAAG9I,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAlB;AACA;;AACD,MAAIiF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAKC,SAA1C,IAAuDD,YAAY,KAAK,EAA5E,EAAgF;AAC/EA,IAAAA,YAAY,GAAG,EAAf;AACA,GAFD,MAEO,IAAIhC,GAAG,KAAK,CAAR,IAAa,CAACnI,KAAK,CAACC,OAAN,CAAckK,YAAd,CAAlB,EAA+C;AACrDA,IAAAA,YAAY,GAAG,CAACA,YAAD,CAAf;AACA;;AAED,QAAME,UAAU,GAAItE,MAAD,IAClBoE,YAAY,CAACG,SAAb,CAAwBC,CAAD,IAAQA,CAAC,CAAC5J,KAAF,KAAYoF,MAAM,CAACpF,KAAlD,IAA4D,CAAC,CAD9D;;AAIA,MAAI6J,eAAe,GAAG,EAAtB;;AACA,MAAI/H,MAAJ,EAAY;AACX+H,IAAAA,eAAe,GAAGnE,WAAW,CAAC2D,YAAD,EAAe,OAAf,EAAwBvH,MAAxB,CAA7B;AACA+H,IAAAA,eAAe,GAAGA,eAAe,CAAC/H,MAAhB,CAAwBsD,MAAD,IAAa,CAACsE,UAAU,CAACtE,MAAD,CAA/C,CAAlB;AACA;;AAED,QAAM0E,KAAK,GAAG,MAAM;AACnBC,IAAAA,UAAU,CAAC,MAAM;AAChB,UAAIlB,QAAQ,CAACmB,OAAb,EAAsB;AACrBnB,QAAAA,QAAQ,CAACmB,OAAT,CAAiBF,KAAjB;AACA;AACD,KAJS,CAAV;AAKA,GAND;;AAQA,QAAMG,QAAQ,GAAIL,CAAD,IAAO;AACvB,QAAIM,QAAJ;;AACA,QAAI1C,GAAG,KAAK,CAAZ,EAAe;AACd0C,MAAAA,QAAQ,GAAGN,CAAX;AACA,KAFD,MAEO;AACNM,MAAAA,QAAQ,GAAG,CAAC,GAAGV,YAAJ,EAAkBI,CAAlB,CAAX;AACA;;AAED,QAAIrB,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACN,YAAMtF,CAAC,GAAG;AAAEuF,QAAAA,MAAM,EAAE;AAAE5F,UAAAA;AAAF;AAAV,OAAV;AACAtD,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;;AAEDqC,IAAAA,SAAS,CAAC,KAAD,CAAT;AACAH,IAAAA,SAAS,CAAC,EAAD,CAAT;;AACA,QAAIvB,GAAG,KAAK,CAAZ,EAAe;AACduC,MAAAA,UAAU,CAAC,MAAM;AAChB,YAAIjB,eAAe,CAACkB,OAApB,EAA6B;AAC5BlB,UAAAA,eAAe,CAACkB,OAAhB,CAAwBF,KAAxB;AACA;AACD,OAJS,CAAV;AAKA,KAND,MAMO,IAAItC,GAAG,KAAKgC,YAAY,CAAC3I,MAAzB,EAAiC;AACvCkJ,MAAAA,UAAU,CAAC,MAAM;AAChB,YAAIpB,cAAc,CAACqB,OAAnB,EAA4B;AAC3BrB,UAAAA,cAAc,CAACqB,OAAf,CAAuBF,KAAvB;AACA;AACD,OAJS,CAAV;AAKA,KANM,MAMA;AACNA,MAAAA,KAAK;AACL;;AAED,QAAIlD,QAAJ,EAAc;AACbA,MAAAA,QAAQ;AACR;AACD,GApCD;;AAsCA,QAAMwD,WAAW,GAAIR,CAAD,IAAO;AAC1B,QAAIM,QAAQ,GAAG,CAAC,GAAGV,YAAJ,CAAf;;AACA,QAAIhC,GAAG,KAAK,CAAZ,EAAe;AACd,YAAM6C,KAAK,GAAGH,QAAQ,CAAC1D,OAAT,CAAiBoD,CAAjB,CAAd;;AACA,UAAIS,KAAK,GAAG,CAAC,CAAb,EAAgB;AACfH,QAAAA,QAAQ,CAACI,MAAT,CAAgBD,KAAhB,EAAuB,CAAvB;AACA;AACD,KALD,MAKO;AACNH,MAAAA,QAAQ,GAAG,EAAX;AACA;;AAED,QAAI3B,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACN,YAAMtF,CAAC,GAAG;AAAEuF,QAAAA,MAAM,EAAE;AAAE5F,UAAAA;AAAF;AAAV,OAAV;AACAtD,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;;AAEDiD,IAAAA,KAAK;AACL,GAnBD;;AAqBA,QAAMS,QAAQ,GAAI3F,CAAD,IAAO;AACvBmE,IAAAA,SAAS,CAACnE,CAAC,CAACuF,MAAF,CAASnK,KAAV,CAAT;AACA,GAFD;;AAIA,QAAMwK,OAAO,GAAG,MAAM;AACrBpB,IAAAA,mBAAmB,CAAC,CAAD,CAAnB;AACAF,IAAAA,SAAS,CAACpH,MAAM,CAACjB,MAAP,GAAgB,CAAjB,CAAT;AACA,GAHD;;AAKA,QAAM4J,SAAS,GAAI7F,CAAD,IAAO;AACxB,UAAM8F,WAAW,GAAG9F,CAAC,CAACuF,MAAF,CAASnK,KAA7B;AACA,UAAM2K,SAAS,GAAGnB,YAAY,GAAGA,YAAY,CAAC3I,MAAhB,GAAyB,CAAvD;;AACA,QAAI+D,CAAC,CAACvE,GAAF,KAAU,OAAV,IAAqBqK,WAArB,IAAoCb,eAAe,CAAChJ,MAAhB,GAAyB,CAAjE,EAAoE;AACnE+D,MAAAA,CAAC,CAACgG,cAAF;AACA,KAFD,MAEO,IAAIhG,CAAC,CAACvE,GAAF,KAAU,WAAV,IAAyB,CAACyB,MAA1B,IAAoC6I,SAAS,GAAG,CAApD,EAAuD;AAC7DP,MAAAA,WAAW,CAACZ,YAAY,CAACmB,SAAS,GAAG,CAAb,CAAb,CAAX;AACA;AACD,GARD;;AAUA,QAAME,OAAO,GAAIjG,CAAD,IAAO;AACtB,UAAM8F,WAAW,GAAG9F,CAAC,CAACuF,MAAF,CAASnK,KAA7B;;AACA,QAAI4E,CAAC,CAACvE,GAAF,KAAU,OAAV,IAAqBqK,WAArB,IAAoCb,eAAe,CAAChJ,MAAhB,GAAyB,CAAjE,EAAoE;AACnE+D,MAAAA,CAAC,CAACgG,cAAF;AACAX,MAAAA,QAAQ,CAACJ,eAAe,CAACV,gBAAD,CAAf,CAAkCnJ,KAAnC,CAAR;AACA,KAHD,MAGO,IAAI4E,CAAC,CAACvE,GAAF,KAAU,WAAd,EAA2B;AACjC,UAAI8I,gBAAgB,IAAKU,eAAe,CAAChJ,MAAhB,GAAyB,CAAlD,EAAsD;AACrDuI,QAAAA,mBAAmB,CAAC,CAAD,CAAnB;AACA,OAFD,MAEO;AACNA,QAAAA,mBAAmB,CAACD,gBAAgB,GAAG,CAApB,CAAnB;AACA;AACD,KANM,MAMA,IAAIvE,CAAC,CAACvE,GAAF,KAAU,SAAd,EAAyB;AAC/B,UAAI8I,gBAAgB,GAAG,CAAvB,EAA0B;AACzBC,QAAAA,mBAAmB,CAACD,gBAAgB,GAAG,CAApB,CAAnB;AACA,OAFD,MAEO;AACNC,QAAAA,mBAAmB,CAACS,eAAe,CAAChJ,MAAhB,GAAyB,CAA1B,CAAnB;AACA;AACD,KANM,MAMA,IAAI+D,CAAC,CAACvE,GAAF,KAAU,QAAd,EAAwB;AAC9B6I,MAAAA,SAAS,CAAC,KAAD,CAAT;AACA,KAFM,MAEA;AACNE,MAAAA,mBAAmB,CAAC,CAAD,CAAnB;AACAF,MAAAA,SAAS,CAACwB,WAAW,CAAC7J,MAAZ,GAAqB,CAAtB,CAAT;AACA;AACD,GAvBD;;AAyBA,QAAMiK,aAAa,GAAIlG,CAAD,IAAO;AAC5B,QAAImG,GAAG,GAAGnG,CAAC,CAACuF,MAAF,CAASa,YAAT,CAAsB,YAAtB,CAAV;;AACA,QAAIpG,CAAC,CAACuF,MAAF,CAASa,YAAT,CAAsB,WAAtB,MAAuC,MAA3C,EAAmD;AAClDD,MAAAA,GAAG,GAAGpJ,IAAI,CAACC,KAAL,CAAWmJ,GAAX,CAAN;AACA;;AACDd,IAAAA,QAAQ,CAACc,GAAD,CAAR;AACA,GAND;;AAQA,QAAME,mBAAmB,GAAIrG,CAAD,IAAO;AAClC,QAAIsG,MAAM,GAAGtG,CAAC,CAACuF,MAAf;;AACA,WAAOe,MAAM,IAAIA,MAAM,CAACC,OAAP,CAAeC,WAAf,OAAiC,QAAlD,EAA4D;AAC3DF,MAAAA,MAAM,GAAGA,MAAM,CAACG,UAAhB;AACA;;AACDjB,IAAAA,WAAW,CAACZ,YAAY,CAAC0B,MAAM,CAACF,YAAP,CAAoB,YAApB,CAAD,CAAb,CAAX;AACA,GAND;;AAQA,QAAMM,KAAK,GAAG,MAAM;AACnB,UAAMpB,QAAQ,GAAG,EAAjB;;AAEA,QAAI3B,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACN,YAAMtF,CAAC,GAAG;AAAEuF,QAAAA,MAAM,EAAE;AAAE5F,UAAAA;AAAF;AAAV,OAAV;AACAtD,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;;AAEDkC,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAe,IAAAA,KAAK;AACL,GAZD;;AAcA,QAAMyB,SAAS,GAAGzE,SAAS,IAAIU,GAAG,KAAK,CAArB,IAA0BgC,YAAY,CAAC3I,MAAb,GAAsB,CAAhD,IAAqD,CAACwG,QAAtD,IAAkE,CAACW,QAArF;AAEA,MAAIwD,SAAS,GAAG,CAAC,sBAAD,CAAhB;;AACA,MAAID,SAAJ,EAAe;AACdC,IAAAA,SAAS,CAAC7L,IAAV,CAAe,iCAAf;AACA;;AACD6L,EAAAA,SAAS,GAAGA,SAAS,CAAC7K,IAAV,CAAe,GAAf,CAAZ;AAEA,QAAM8K,YAAY,GAAG,CAACpE,QAAD,IAAa,CAACW,QAAd,KAA2BR,GAAG,KAAK,IAAR,IAAgBgC,YAAY,CAAC3I,MAAb,GAAsB2G,GAAjE,CAArB;AAEA,QAAMkE,YAAY,GAAG,EAArB;;AACA,MAAIxN,EAAE,IAAIqG,IAAV,EAAgB;AACfmH,IAAAA,YAAY,CAACxN,EAAb,GAAmB,GAAEA,EAAE,IAAIqG,IAAK,UAAhC;AACA;;AAED,sBACCN;AAAA,eACa,GAAEuH,SAAU,IAAG/C,gBAAiB,EAAjC,CAAmCkD,IAAnC,EADZ;AAAA,kBAEahK,IAAI,CAACQ,SAAL,CAAeqF,GAAG,KAAK,CAAR,IAAagC,YAAY,CAAC3I,MAAb,GAAsB,CAAnC,GAAuC2I,YAAY,CAAC,CAAD,CAAnD,GAAyDA,YAAxE;AAFb,KAGKkC,YAHL,EAIKlD,iBAJL,gBAMCvE;AAAK,IAAA,KAAK,EAAE;AAAE2H,MAAAA,OAAO,EAAE;AAAX;AAAZ,kBACC3H;AAAI,IAAA,SAAS,EAAC;AAAd,KACEuF,YAAY,IAAIA,YAAY,CAACzJ,GAAb,CAAiB,CAAC6J,CAAD,EAAIS,KAAJ,KAAc;AAC/C,QAAIU,GAAG,GAAGnB,CAAV;AACA,QAAIiC,MAAM,GAAG,KAAb;;AACA,QAAI,OAAOd,GAAP,KAAe,QAAnB,EAA6B;AAC5BA,MAAAA,GAAG,GAAGpJ,IAAI,CAACQ,SAAL,CAAe4I,GAAf,CAAN;AACAc,MAAAA,MAAM,GAAG,IAAT;AACA;;AAED,UAAMzG,MAAM,GAAGiE,YAAY,CAACzK,IAAb,CAAmBkN,CAAD,IAChCD,MAAM,GAAGlK,IAAI,CAACQ,SAAL,CAAe2J,CAAC,CAAC9L,KAAjB,MAA4B+K,GAA/B,GAAqCe,CAAC,CAAC9L,KAAF,KAAY+K,GADzC,CAAf;AAIA,QAAI1F,KAAK,GAAG,EAAZ;;AACA,QAAIkC,OAAJ,EAAa;AACZlC,MAAAA,KAAK,GAAGkC,OAAO,CAACnC,MAAM,IAAIwE,CAAX,CAAf;AACA,KAFD,MAEO,IAAIxE,MAAM,IAAI9G,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC2G,MAArC,EAA6C,OAA7C,CAAd,EAAqE;AAC3EC,MAAAA,KAAK,GAAGD,MAAM,CAACC,KAAf;AACA;;AAED,wBACCpB;AAAI,MAAA,SAAS,EAAC,+DAAd;AAA8E,MAAA,GAAG,EAAE8G;AAAnF,OACE1F,KADF,EAEE,CAACgC,QAAD,IAAa,CAACW,QAAd,iBACA/D;AAAA,iBACa,uCAAsCiE,qBAAsB,EAA7D,CAA+DyD,IAA/D,EADZ;AAAA,oBAEatB,KAFb;AAAA,eAGUY,mBAHV;AAAA,WAIMnC,eAJN;AAAA,YAKM;AALN,OAMKb,sBANL,gBAQChE,6BAAC8H,IAAD;AAAA,cAAmB3D,gBAAnB;AAAA,aAA4CC;AAA5C,OAAiEF,oBAAjE,EARD,EASEG,UATF,CAHF,CADD;AAkBA,GArCgB,CADlB,EAuCEmD,YAAY,iBACZxH;AAAI,IAAA,SAAS,EAAC;AAAd,kBACCA,wDACKyE,UADL;AAAA,kBAEc,KAFd;AAAA,eAGa,oDAAmDpB,cAAe,EAAnE,CAAqEqE,IAArE,EAHZ;AAAA,QAIKzN,EAAE,IAAIqG,IAJX;AAAA,cAKWgG,QALX;AAAA,aAMUC,OANV;AAAA,eAOYC,SAPZ;AAAA,aAQUI,OARV;AAAA,iBASc9C,WATd;AAAA,SAUMc,QAVN;AAAA,UAWM,MAXN;AAAA,WAYQ/G;AAZR,KADD,CAxCF,CADD,EA4DEmH,MAAM,IAAIY,eAAe,CAAChJ,MAAhB,GAAyB,CAAnC,iBACAoD;AAAA,eAAgB,iCAAgC2D,mBAAoB,EAArD,CAAuD+D,IAAvD;AAAf,KAAkFhE,oBAAlF,GACEkC,eAAe,CAAC9J,GAAhB,CAAoB,CAACqF,MAAD,EAASiF,KAAT,KAAmB;AACvC,QAAI2B,eAAe,GAAG,CAAC,8BAAD,CAAtB;;AACA,QAAI7C,gBAAgB,KAAKkB,KAAzB,EAAgC;AAC/B2B,MAAAA,eAAe,CAACrM,IAAhB,CAAqB,2CAArB;AACA;;AACDqM,IAAAA,eAAe,GAAGA,eAAe,CAACrL,IAAhB,CAAqB,GAArB,CAAlB;AAEA,QAAIoK,GAAG,GAAG3F,MAAM,CAACpF,KAAjB;AACA,QAAI6L,MAAM,GAAG,KAAb;;AACA,QAAI,OAAOd,GAAP,KAAe,QAAnB,EAA6B;AAC5Bc,MAAAA,MAAM,GAAG,IAAT;AACAd,MAAAA,GAAG,GAAGpJ,IAAI,CAACQ,SAAL,CAAe4I,GAAf,CAAN;AACA;;AAED,wBACC9G;AAAA,iBACa,GAAE+H,eAAgB,IAAGlE,uBAAwB,EAA9C,CAAgD6D,IAAhD,EADZ;AAAA,WAEMZ;AAFN,OAGKlD,wBAHL,gBAKC5D;AAAA,iBACa,wCAAuCyD,qBAAsB,EAA9D,CAAgEiE,IAAhE,EADZ;AAAA,mBAEYE,MAFZ;AAAA,oBAGad,GAHb;AAAA,eAIUD,aAJV;AAAA,YAKM;AALN,OAMKrD,sBANL,GAQErC,MAAM,CAACC,KART,CALD,CADD;AAkBA,GAhCA,CADF,CA7DF,EAkGEkG,SAAS,iBACTtH,uDACCA;AAAA,eACa,+BAA8B+C,oBAAqB,EAApD,CAAsD2E,IAAtD,EADZ;AAAA,aAEUL,KAFV;AAAA,SAGM3C,cAHN;AAAA,UAIM;AAJN,KAKK5B,qBALL,gBAOC9C,6BAAC8H,IAAD;AAAA,YAAmB7E,eAAnB;AAAA,WAA2CC;AAA3C,KAA+DF,mBAA/D,EAPD,EAQEG,SARF,CADD,CAnGF,CAND,CADD;AA0HA;AAEDT,YAAY,CAAC9B,SAAb,GAAyB;AACxB+B,EAAAA,QAAQ,EAAE9B,SAAS,CAACmH,IADI;AAExBpF,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IAFC;AAGxBnF,EAAAA,SAAS,EAAEhC,SAAS,CAACoH,IAHG;AAIxBnF,EAAAA,qBAAqB,EAAEjC,SAAS,CAACqH,MAJT;AAKxBnF,EAAAA,oBAAoB,EAAElC,SAAS,CAACC,MALR;AAMxBkC,EAAAA,mBAAmB,EAAEnC,SAAS,CAACqH,MANP;AAOxBjF,EAAAA,eAAe,EAAEpC,SAAS,CAACsH,MAPH;AAQxBjF,EAAAA,cAAc,EAAErC,SAAS,CAACsH,MARF;AASxBhF,EAAAA,SAAS,EAAEtC,SAAS,CAACC,MATG;AAUxBsC,EAAAA,QAAQ,EAAEvC,SAAS,CAACoH,IAVI;AAWxBhO,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MAXU;AAYxBuC,EAAAA,cAAc,EAAExC,SAAS,CAACC,MAZF;AAaxBwC,EAAAA,OAAO,EAAEzC,SAAS,CAACmH,IAbK;AAcxB/G,EAAAA,QAAQ,EAAEJ,SAAS,CAACuH,SAAV,CAAoB,CAC7BvH,SAAS,CAACmH,IADmB,EAE7BnH,SAAS,CAACC,MAFmB,CAApB,CAdc;AAkBxByC,EAAAA,GAAG,EAAE1C,SAAS,CAACsH,MAlBS;AAmBxB7H,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAnBQ;AAoBxB0C,EAAAA,sBAAsB,EAAE3C,SAAS,CAACqH,MApBV;AAqBxBzE,EAAAA,qBAAqB,EAAE5C,SAAS,CAACC,MArBT;AAsBxB4C,EAAAA,oBAAoB,EAAE7C,SAAS,CAACqH,MAtBR;AAuBxBvE,EAAAA,mBAAmB,EAAE9C,SAAS,CAACC,MAvBP;AAwBxB8C,EAAAA,wBAAwB,EAAE/C,SAAS,CAACqH,MAxBZ;AAyBxBrE,EAAAA,uBAAuB,EAAEhD,SAAS,CAACC,MAzBX;AA0BxBrC,EAAAA,OAAO,EAAEoC,SAAS,CAACuH,SAAV,CAAoB,CAC5BvH,SAAS,CAACwH,KADkB,EAE5BxH,SAAS,CAACqH,MAFkB,CAApB,CA1Be;AA8BxBpE,EAAAA,WAAW,EAAEjD,SAAS,CAACC,MA9BC;AA+BxBiD,EAAAA,QAAQ,EAAElD,SAAS,CAACoH,IA/BI;AAgCxBjE,EAAAA,sBAAsB,EAAEnD,SAAS,CAACqH,MAhCV;AAiCxBjE,EAAAA,qBAAqB,EAAEpD,SAAS,CAACC,MAjCT;AAkCxBoD,EAAAA,oBAAoB,EAAErD,SAAS,CAACqH,MAlCR;AAmCxB/D,EAAAA,gBAAgB,EAAEtD,SAAS,CAACsH,MAnCJ;AAoCxB/D,EAAAA,eAAe,EAAEvD,SAAS,CAACsH,MApCH;AAqCxB9D,EAAAA,UAAU,EAAExD,SAAS,CAACC,MArCE;AAsCxBwD,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IAtCI;AAuCxB5J,EAAAA,GAAG,EAAEyC,SAAS,CAACC,MAvCS;AAwCxB/E,EAAAA,KAAK,EAAE8E,SAAS,CAACuH,SAAV,CAAoB,CAC1BvH,SAAS,CAACyH,OAAV,CAAkBzH,SAAS,CAACsH,MAA5B,CAD0B,EAE1BtH,SAAS,CAACyH,OAAV,CAAkBzH,SAAS,CAACqH,MAA5B,CAF0B,EAG1BrH,SAAS,CAACyH,OAAV,CAAkBzH,SAAS,CAACC,MAA5B,CAH0B,EAI1BD,SAAS,CAACsH,MAJgB,EAK1BtH,SAAS,CAACqH,MALgB,EAM1BrH,SAAS,CAACC,MANgB,CAApB,CAxCiB;AAgDxBI,EAAAA,QAAQ,EAAEL,SAAS,CAACuH,SAAV,CAAoB,CAC7BvH,SAAS,CAACmH,IADmB,EAE7BnH,SAAS,CAACC,MAFmB,CAApB,CAhDc;AAoDxByD,EAAAA,iBAAiB,EAAE1D,SAAS,CAACqH,MApDL;AAqDxB1D,EAAAA,gBAAgB,EAAE3D,SAAS,CAACC;AArDJ,CAAzB;AAwDA4B,YAAY,CAAC3B,YAAb,GAA4B;AAC3B4B,EAAAA,QAAQ,EAAE,IADiB;AAE3BC,EAAAA,WAAW,EAAE,IAFc;AAG3BC,EAAAA,SAAS,EAAE,IAHgB;AAI3BC,EAAAA,qBAAqB,EAAE,IAJI;AAK3BC,EAAAA,oBAAoB,EAAE,EALK;AAM3BC,EAAAA,mBAAmB,EAAE,IANM;AAO3BC,EAAAA,eAAe,EAAE,EAPU;AAQ3BC,EAAAA,cAAc,EAAE,EARW;AAS3BC,EAAAA,SAAS,EAAE,OATgB;AAU3BC,EAAAA,QAAQ,EAAE,KAViB;AAW3BnJ,EAAAA,EAAE,EAAE,EAXuB;AAY3BoJ,EAAAA,cAAc,EAAE,EAZW;AAa3BC,EAAAA,OAAO,EAAE,IAbkB;AAc3BrC,EAAAA,QAAQ,EAAE,MAdiB;AAe3BsC,EAAAA,GAAG,EAAE,IAfsB;AAgB3BjD,EAAAA,IAAI,EAAE,EAhBqB;AAiB3BkD,EAAAA,sBAAsB,EAAE,IAjBG;AAkB3BC,EAAAA,qBAAqB,EAAE,EAlBI;AAmB3BC,EAAAA,oBAAoB,EAAE,IAnBK;AAoB3BC,EAAAA,mBAAmB,EAAE,EApBM;AAqB3BC,EAAAA,wBAAwB,EAAE,IArBC;AAsB3BC,EAAAA,uBAAuB,EAAE,EAtBE;AAuB3BpF,EAAAA,OAAO,EAAE,IAvBkB;AAwB3BqF,EAAAA,WAAW,EAAE,QAxBc;AAyB3BC,EAAAA,QAAQ,EAAE,KAzBiB;AA0B3BC,EAAAA,sBAAsB,EAAE,IA1BG;AA2B3BC,EAAAA,qBAAqB,EAAE,EA3BI;AA4B3BC,EAAAA,oBAAoB,EAAE,IA5BK;AA6B3BC,EAAAA,gBAAgB,EAAE,EA7BS;AA8B3BC,EAAAA,eAAe,EAAE,EA9BU;AA+B3BC,EAAAA,UAAU,EAAE,QA/Be;AAgC3BC,EAAAA,QAAQ,EAAE,IAhCiB;AAiC3BlG,EAAAA,GAAG,EAAE,IAjCsB;AAkC3BrC,EAAAA,KAAK,EAAE,IAlCoB;AAmC3BmF,EAAAA,QAAQ,EAAE,IAnCiB;AAoC3BqD,EAAAA,iBAAiB,EAAE,IApCQ;AAqC3BC,EAAAA,gBAAgB,EAAE;AArCS,CAA5B;;AC3ae,SAAS+D,QAAT,CAAkB;AAChC3F,EAAAA,WADgC;AAEhC2E,EAAAA,SAFgC;AAGhCiB,EAAAA,cAHgC;AAIhCC,EAAAA,aAJgC;AAKhCC,EAAAA,UALgC;AAMhCC,EAAAA,SANgC;AAOhC1O,EAAAA,EAPgC;AAQhCqG,EAAAA,IARgC;AAShCgE,EAAAA,QATgC;AAUhCvI,EAAAA,KAVgC;AAWhC,KAAG0I;AAX6B,CAAlB,EAYZ;AACF,QAAM;AAAEzH,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AAEA,MAAIoI,OAAO,GAAG,KAAd;;AACA,MAAItE,QAAQ,KAAK,IAAjB,EAAuB;AACtBsE,IAAAA,OAAO,GAAG7M,KAAV;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,yDAAV,CAAN;AACA;;AACDuI,IAAAA,OAAO,GAAG,CAAC,CAACnM,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAf;AACA;;AAED,QAAMgG,QAAQ,GAAI3F,CAAD,IAAO;AACvB,UAAMsF,QAAQ,GAAGtF,CAAC,CAACuF,MAAF,CAAS0C,OAA1B;;AACA,QAAItE,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACNjJ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;AACD,GAPD;;AASA,QAAMlC,KAAK,GAAG,EAAd;;AACA,MAAIzG,EAAE,IAAIqG,IAAV,EAAgB;AACfI,IAAAA,KAAK,CAACzG,EAAN,GAAWA,EAAE,IAAIqG,IAAjB;AACA;;AACD,MAAIA,IAAJ,EAAU;AACTI,IAAAA,KAAK,CAACJ,IAAN,GAAaA,IAAb;AACA;;AAED,sBACCN,yEACCA;AAAA,eACa,uDAAsDuH,SAAU,EAAjE,CAAmEG,IAAnE,EADZ;AAAA,aAEUkB,OAFV;AAAA,cAGWtC,QAHX;AAAA,UAIM;AAJN,KAKK5F,KALL,EAMK+D,UANL,EADD,eASCzE,6BAAC6I,QAAD;AAAA,eAAuB,uBAAsBJ,aAAc,EAArC,CAAuCf,IAAvC,EAAtB;AAAA,YAA6EgB,UAA7E;AAAA,WAAgGC;AAAhG,KAA+GH,cAA/G,EATD,CADD;AAaA;AAEDD,QAAQ,CAAC3H,SAAT,GAAqB;AACpBgC,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IADH;AAEpBT,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAFD;AAGpB0H,EAAAA,cAAc,EAAE3H,SAAS,CAACqH,MAHN;AAIpBO,EAAAA,aAAa,EAAE5H,SAAS,CAACC,MAJL;AAKpB4H,EAAAA,UAAU,EAAE7H,SAAS,CAACsH,MALF;AAMpBQ,EAAAA,SAAS,EAAE9H,SAAS,CAACsH,MAND;AAOpBlO,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MAPM;AAQpBR,EAAAA,IAAI,EAAEO,SAAS,CAACC,MARI;AASpBwD,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IATA;AAUpBjM,EAAAA,KAAK,EAAE8E,SAAS,CAACoH;AAVG,CAArB;AAaAM,QAAQ,CAACxH,YAAT,GAAwB;AACvB6B,EAAAA,WAAW,EAAE,IADU;AAEvB2E,EAAAA,SAAS,EAAE,EAFY;AAGvBiB,EAAAA,cAAc,EAAE,IAHO;AAIvBC,EAAAA,aAAa,EAAE,EAJQ;AAKvBC,EAAAA,UAAU,EAAE,EALW;AAMvBC,EAAAA,SAAS,EAAE,EANY;AAOvB1O,EAAAA,EAAE,EAAE,IAPmB;AAQvBqG,EAAAA,IAAI,EAAE,EARiB;AASvBgE,EAAAA,QAAQ,EAAE,IATa;AAUvBvI,EAAAA,KAAK,EAAE;AAVgB,CAAxB;;ACpEe,SAAS+M,YAAT,CAAsB;AACpClG,EAAAA,WADoC;AAEpC2E,EAAAA,SAFoC;AAGpCnE,EAAAA,QAHoC;AAIpCoF,EAAAA,cAJoC;AAKpCC,EAAAA,aALoC;AAMpCC,EAAAA,UANoC;AAOpCC,EAAAA,SAPoC;AAQpCI,EAAAA,eARoC;AASpCC,EAAAA,cAToC;AAUpC/H,EAAAA,QAVoC;AAWpCgI,EAAAA,cAXoC;AAYpCC,EAAAA,aAZoC;AAapCC,EAAAA,kBAboC;AAcpCC,EAAAA,iBAdoC;AAepC9I,EAAAA,IAfoC;AAgBpC7B,EAAAA,OAhBoC;AAiBpCsF,EAAAA,QAjBoC;AAkBpCO,EAAAA,QAlBoC;AAmBpClG,EAAAA,GAnBoC;AAoBpCrC,EAAAA,KApBoC;AAqBpCmF,EAAAA;AArBoC,CAAtB,EAsBZ;AACF,QAAM;AAAElE,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AACA,QAAM,CAAC4E,YAAD,EAAeC,eAAf,IAAkCN,QAAQ,CAACtG,OAAO,GAAGuC,gBAAgB,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAApB,CAAnB,GAAmD,EAA3D,CAAhD;AAEAoE,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIlH,GAAJ,EAAS;AACRD,MAAAA,GAAG,CAAC1B,GAAJ,CAAQ2B,GAAR,EACEc,IADF,CACQC,QAAD,IAAc;AACnBkG,QAAAA,eAAe,CAACrE,gBAAgB,CAAC7B,QAAD,EAAW8B,QAAX,EAAqBC,QAArB,CAAjB,CAAf;AACA,OAHF;AAIA;;AACD,WAAO,MAAM,EAAb;AACA,GARQ,EAQN,CAAC9C,GAAD,CARM,CAAT;AAUAkH,EAAAA,SAAS,CAAC,MAAM;AACfD,IAAAA,eAAe,CAAC5G,OAAO,GAAGuC,gBAAgB,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAApB,CAAnB,GAAmD,EAA3D,CAAf;AACA,WAAO,MAAM,EAAb;AACA,GAHQ,EAGN,CAACzC,OAAD,CAHM,CAAT;AAKA,MAAI8G,YAAY,GAAG,EAAnB;;AACA,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACtBiB,IAAAA,YAAY,GAAGxJ,KAAf;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,6DAAV,CAAN;AACA;;AACDkF,IAAAA,YAAY,GAAG9I,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAlB;AACA;;AACD,MAAIiF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAKC,SAA1C,IAAuDD,YAAY,KAAK,EAA5E,EAAgF;AAC/EA,IAAAA,YAAY,GAAG,EAAf;AACA;;AACDA,EAAAA,YAAY,GAAGA,YAAY,CAACzJ,GAAb,CAAkBgL,GAAD,IAAU,OAAOA,GAAP,KAAe,QAAf,GAA0BpJ,IAAI,CAACQ,SAAL,CAAe4I,GAAf,CAA1B,GAAgDA,GAA3E,CAAf;;AAEA,QAAMR,QAAQ,GAAI3F,CAAD,IAAO;AACvB,UAAMsF,QAAQ,GAAG,CAAC,GAAGV,YAAJ,CAAjB;AACA,QAAIuB,GAAG,GAAGnG,CAAC,CAACuF,MAAF,CAASnK,KAAnB;;AAEA,QAAI4E,CAAC,CAACuF,MAAF,CAAS0C,OAAb,EAAsB;AACrB,UAAIjI,CAAC,CAACuF,MAAF,CAASa,YAAT,CAAsB,WAAtB,MAAuC,MAA3C,EAAmD;AAClDD,QAAAA,GAAG,GAAGpJ,IAAI,CAACC,KAAL,CAAWmJ,GAAX,CAAN;AACA;;AACDb,MAAAA,QAAQ,CAACvK,IAAT,CAAcoL,GAAd;AACA,KALD,MAKO;AACN,YAAMV,KAAK,GAAGb,YAAY,CAAChD,OAAb,CAAqBuE,GAArB,CAAd;;AACA,UAAIV,KAAK,GAAG,CAAC,CAAb,EAAgB;AACfH,QAAAA,QAAQ,CAACI,MAAT,CAAgBD,KAAhB,EAAuB,CAAvB;AACA;AACD;;AAED,QAAI9B,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACNjJ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;AACD,GArBD;;AAuBA,sBACC5C;AAAA,eAAgB,iBAAgBkJ,aAAc,EAA/B,CAAiCxB,IAAjC;AAAf,KAA4DuB,cAA5D,GACE7D,YAAY,CAACtJ,GAAb,CAAiB,CAACuN,WAAD,EAAcjD,KAAd,KAAwB;AACzC,QAAIkD,cAAc,GAAGD,WAAW,CAACtN,KAAjC;AACA,QAAI6L,MAAM,GAAG,KAAb;;AACA,QAAI,OAAO0B,cAAP,KAA0B,QAA9B,EAAwC;AACvC1B,MAAAA,MAAM,GAAG,IAAT;AACA0B,MAAAA,cAAc,GAAG5L,IAAI,CAACQ,SAAL,CAAeoL,cAAf,CAAjB;AACA;;AAED,UAAMV,OAAO,GAAGrD,YAAY,CAAC9H,QAAb,CAAsB6L,cAAtB,CAAhB;AAEA,UAAMC,WAAW,GAAG,EAApB;;AACA,QAAI3B,MAAJ,EAAY;AACX2B,MAAAA,WAAW,CAAC,WAAD,CAAX,GAA2B,IAA3B;AACA;;AACD,QAAIjJ,IAAJ,EAAU;AACTiJ,MAAAA,WAAW,CAACjJ,IAAZ,GAAoB,GAAEA,IAAK,IAA3B;AACA;;AAED,wBACCN;AAAA,iBAAgB,uBAAsBoJ,iBAAkB,EAAzC,CAA2C1B,IAA3C,EAAf;AAAA,WAAuE4B;AAAvE,OAA2FH,kBAA3F,gBACCnJ;AAAK,MAAA,SAAS,EAAC;AAAf,oBACCA;AAAA,iBACa,uBAAsB4I,OAAO,GAAG,gCAAH,GAAsC,EAAG,IAAGI,cAAe,EAAzF,CAA2FtB,IAA3F;AADZ,OAEKqB,eAFL,gBAIC/I;AAAA,eACU4I,OADV;AAAA,iBAEa,uDAAsDrB,SAAU,EAAjE,CAAmEG,IAAnE,EAFZ;AAAA,gBAGWtE,QAHX;AAAA,gBAIWkD,QAJX;AAAA,gBAKWvC,QALX;AAAA,YAMM,UANN;AAAA,aAOQuF;AAPR,OAQKC,WARL,EAJD,eAcCvJ,6BAAC6I,QAAD;AAAA,iBACa,uBAAsBJ,aAAc,EAArC,CAAuCf,IAAvC,EADZ;AAAA,cAESgB,UAFT;AAAA,aAGQC;AAHR,OAIKH,cAJL,EAdD,EAoBEa,WAAW,CAACjI,KApBd,CADD,CADD,CADD;AA4BA,GA9CA,CADF,CADD;AAmDA;AAED0H,YAAY,CAAClI,SAAb,GAAyB;AACxBgC,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IADC;AAExBT,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAFG;AAGxBsC,EAAAA,QAAQ,EAAEvC,SAAS,CAACoH,IAHI;AAIxBO,EAAAA,cAAc,EAAE3H,SAAS,CAACqH,MAJF;AAKxBO,EAAAA,aAAa,EAAE5H,SAAS,CAACC,MALD;AAMxB4H,EAAAA,UAAU,EAAE7H,SAAS,CAACsH,MANE;AAOxBQ,EAAAA,SAAS,EAAE9H,SAAS,CAACsH,MAPG;AAQxBY,EAAAA,eAAe,EAAElI,SAAS,CAACqH,MARH;AASxBc,EAAAA,cAAc,EAAEnI,SAAS,CAACC,MATF;AAUxBG,EAAAA,QAAQ,EAAEJ,SAAS,CAACuH,SAAV,CAAoB,CAC7BvH,SAAS,CAACmH,IADmB,EAE7BnH,SAAS,CAACC,MAFmB,CAApB,CAVc;AAcxBmI,EAAAA,cAAc,EAAEpI,SAAS,CAACqH,MAdF;AAexBgB,EAAAA,aAAa,EAAErI,SAAS,CAACC,MAfD;AAgBxBqI,EAAAA,kBAAkB,EAAEtI,SAAS,CAACqH,MAhBN;AAiBxBkB,EAAAA,iBAAiB,EAAEvI,SAAS,CAACC,MAjBL;AAkBxBR,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAlBQ;AAmBxBrC,EAAAA,OAAO,EAAEoC,SAAS,CAACuH,SAAV,CAAoB,CAC5BvH,SAAS,CAACwH,KADkB,EAE5BxH,SAAS,CAACqH,MAFkB,CAApB,CAnBe;AAuBxBnE,EAAAA,QAAQ,EAAElD,SAAS,CAACoH,IAvBI;AAwBxB3D,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IAxBI;AAyBxB5J,EAAAA,GAAG,EAAEyC,SAAS,CAACC,MAzBS;AA0BxB/E,EAAAA,KAAK,EAAE8E,SAAS,CAACuH,SAAV,CAAoB,CAC1BvH,SAAS,CAACyH,OAAV,CAAkBzH,SAAS,CAACsH,MAA5B,CAD0B,EAE1BtH,SAAS,CAACyH,OAAV,CAAkBzH,SAAS,CAACqH,MAA5B,CAF0B,EAG1BrH,SAAS,CAACyH,OAAV,CAAkBzH,SAAS,CAACC,MAA5B,CAH0B,CAApB,CA1BiB;AA+BxBI,EAAAA,QAAQ,EAAEL,SAAS,CAACuH,SAAV,CAAoB,CAC7BvH,SAAS,CAACmH,IADmB,EAE7BnH,SAAS,CAACC,MAFmB,CAApB;AA/Bc,CAAzB;AAqCAgI,YAAY,CAAC/H,YAAb,GAA4B;AAC3B6B,EAAAA,WAAW,EAAE,IADc;AAE3B2E,EAAAA,SAAS,EAAE,EAFgB;AAG3BnE,EAAAA,QAAQ,EAAE,KAHiB;AAI3BoF,EAAAA,cAAc,EAAE,IAJW;AAK3BC,EAAAA,aAAa,EAAE,EALY;AAM3BC,EAAAA,UAAU,EAAE,EANe;AAO3BC,EAAAA,SAAS,EAAE,EAPgB;AAQ3BI,EAAAA,eAAe,EAAE,IARU;AAS3BC,EAAAA,cAAc,EAAE,EATW;AAU3B/H,EAAAA,QAAQ,EAAE,MAViB;AAW3BgI,EAAAA,cAAc,EAAE,IAXW;AAY3BC,EAAAA,aAAa,EAAE,EAZY;AAa3BC,EAAAA,kBAAkB,EAAE,IAbO;AAc3BC,EAAAA,iBAAiB,EAAE,EAdQ;AAe3B9I,EAAAA,IAAI,EAAE,EAfqB;AAgB3B7B,EAAAA,OAAO,EAAE,IAhBkB;AAiB3BsF,EAAAA,QAAQ,EAAE,KAjBiB;AAkB3BO,EAAAA,QAAQ,EAAE,IAlBiB;AAmB3BlG,EAAAA,GAAG,EAAE,IAnBsB;AAoB3BrC,EAAAA,KAAK,EAAE,IApBoB;AAqB3BmF,EAAAA,QAAQ,EAAE;AArBiB,CAA5B;;AC3KO,MAAMsI,cAAc,GAAG,CAACC,cAAD,EAAiBC,QAAjB,KAA8B;AAC3D,QAAMtP,MAAM,GAAG;AACduP,IAAAA,IAAI,EAAE,EADQ;AAEdC,IAAAA,KAAK,EAAE,EAFO;AAGdC,IAAAA,GAAG,EAAE,EAHS;AAIdC,IAAAA,IAAI,EAAE,EAJQ;AAKdC,IAAAA,MAAM,EAAE,EALM;AAMdC,IAAAA,MAAM,EAAE,EANM;AAOdC,IAAAA,IAAI,EAAE;AAPQ,GAAf;;AAUA,MAAI,CAACR,cAAL,EAAqB;AACpB,WAAOrP,MAAP;AACA;;AAED,QAAMwB,MAAM,GAAG6N,cAAc,CAACjM,OAAf,CAAuB,SAAvB,EAAkC,GAAlC,EAAuCjB,KAAvC,CAA6C,GAA7C,CAAf;AACA,QAAMmK,SAAS,GAAG9K,MAAM,CAACgB,MAAzB;;AAEA,MAAI8J,SAAS,IAAI,CAAjB,EAAoB;AACnBtM,IAAAA,MAAM,CAAC4P,MAAP,GAAgBpO,MAAM,CAAC,CAAD,CAAtB;AACA;;AACD,MAAI8K,SAAS,IAAI,CAAjB,EAAoB;AACnBtM,IAAAA,MAAM,CAAC2P,MAAP,GAAgBnO,MAAM,CAAC,CAAD,CAAtB;AACA;;AACD,MAAI8K,SAAS,IAAI,CAAjB,EAAoB;AACnBtM,IAAAA,MAAM,CAAC0P,IAAP,GAAclO,MAAM,CAAC,CAAD,CAApB;;AACA,QAAIsO,QAAQ,CAAC9P,MAAM,CAAC0P,IAAR,EAAc,EAAd,CAAR,GAA4B,EAAhC,EAAoC;AACnC1P,MAAAA,MAAM,CAAC0P,IAAP,IAAe,EAAf;AACA1P,MAAAA,MAAM,CAAC6P,IAAP,GAAc,IAAd;AACA;AACD;;AACD,MAAIvD,SAAS,IAAI,CAAjB,EAAoB;AACnBtM,IAAAA,MAAM,CAACyP,GAAP,GAAajO,MAAM,CAAC,CAAD,CAAN,GAAYsO,QAAQ,CAACtO,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAApB,GAAsC,EAAnD;AACA;;AACD,MAAI8K,SAAS,IAAI,CAAjB,EAAoB;AACnBtM,IAAAA,MAAM,CAACwP,KAAP,GAAehO,MAAM,CAAC,CAAD,CAAN,GAAYsO,QAAQ,CAACtO,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAApB,GAAsC,EAArD;AACA;;AACD,MAAI8K,SAAS,IAAI,CAAjB,EAAoB;AACnBtM,IAAAA,MAAM,CAACuP,IAAP,GAAc/N,MAAM,CAAC,CAAD,CAAN,GAAYsO,QAAQ,CAACtO,MAAM,CAAC,CAAD,CAAP,EAAY,EAAZ,CAApB,GAAsC,EAApD;AACA;;AAED,SAAOxB,MAAP;AAyBA,CAlEM;AAoEP,AAAO,MAAM+P,cAAc,GAAIC,cAAD,IAAoB;AACjD,MAAIN,IAAI,GAAGI,QAAQ,CAACE,cAAc,CAACN,IAAhB,EAAsB,EAAtB,CAAnB;;AACA,MAAIM,cAAc,CAACH,IAAf,KAAwB,IAAxB,IAAgCH,IAAI,GAAG,EAA3C,EAA+C;AAC9CA,IAAAA,IAAI,IAAI,EAAR;AACA,GAFD,MAEO,IAAIM,cAAc,CAACH,IAAf,KAAwB,IAAxB,IAAgCH,IAAI,KAAK,EAA7C,EAAiD;AACvDA,IAAAA,IAAI,GAAG,CAAP;AACA;;AAED,SAAQ,GAAEM,cAAc,CAACT,IAAK,IAAGS,cAAc,CAACR,KAAM,IAAGQ,cAAc,CAACP,GAAI,IAAGC,IAAK,IAAGM,cAAc,CAACL,MAAO,IAAGK,cAAc,CAACJ,MAAO,EAAtI;AAqBA,CA7BM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjEQ,SAASK,MAAT,CAAgB;AAC9BzH,EAAAA,WAD8B;AAE9B2E,EAAAA,SAF8B;AAG9B+C,EAAAA,SAH8B;AAI9B9B,EAAAA,cAJ8B;AAK9BC,EAAAA,aAL8B;AAM9BC,EAAAA,UAN8B;AAO9BC,EAAAA,SAP8B;AAQ9B1O,EAAAA,EAR8B;AAS9BgH,EAAAA,QAT8B;AAU9BX,EAAAA,IAV8B;AAW9B7B,EAAAA,OAX8B;AAY9B6F,EAAAA,QAZ8B;AAa9BlG,EAAAA,GAb8B;AAc9BrC,EAAAA,KAd8B;AAe9BmF,EAAAA,QAf8B;AAgB9BqD,EAAAA,iBAhB8B;AAiB9BC,EAAAA,gBAjB8B;AAkB9B,KAAGC;AAlB2B,CAAhB,EAmBZ;AACF,QAAM;AAAEzH,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AACA,QAAM,CAAC4E,YAAD,EAAeC,eAAf,IAAkCN,QAAQ,CAACtG,OAAO,GAAGuC,gBAAgB,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAApB,CAAnB,GAAmD,EAA3D,CAAhD;AAEAoE,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIlH,GAAJ,EAAS;AACRD,MAAAA,GAAG,CAAC1B,GAAJ,CAAQ2B,GAAR,EACEc,IADF,CACQC,QAAD,IAAc;AACnBkG,QAAAA,eAAe,CAACrE,gBAAgB,CAAC7B,QAAD,EAAW8B,QAAX,EAAqBC,QAArB,CAAjB,CAAf;AACA,OAHF;AAIA;;AACD,WAAO,MAAM,EAAb;AACA,GARQ,EAQN,CAAC9C,GAAD,CARM,CAAT;AAUAkH,EAAAA,SAAS,CAAC,MAAM;AACfD,IAAAA,eAAe,CAAC5G,OAAO,GAAGuC,gBAAgB,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAApB,CAAnB,GAAmD,EAA3D,CAAf;AACA,WAAO,MAAM,EAAb;AACA,GAHQ,EAGN,CAACzC,OAAD,CAHM,CAAT;AAKA,MAAI8G,YAAY,GAAG,EAAnB;;AACA,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACtBiB,IAAAA,YAAY,GAAGxJ,KAAf;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,uDAAV,CAAN;AACA;;AACDkF,IAAAA,YAAY,GAAG9I,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAlB;AACA;;AACD,MAAIiF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAKC,SAA9C,EAAyD;AACxDD,IAAAA,YAAY,GAAG,EAAf;AACA;;AACD,MAAI,OAAOA,YAAP,KAAwB,QAA5B,EAAsC;AACrCA,IAAAA,YAAY,GAAG7H,IAAI,CAACQ,SAAL,CAAeqH,YAAf,CAAf;AACA;;AAED,QAAMe,QAAQ,GAAI3F,CAAD,IAAO;AACvB,QAAIsF,QAAQ,GAAGtF,CAAC,CAACuF,MAAF,CAASnK,KAAxB;AACA,UAAMoF,MAAM,GAAGR,CAAC,CAACuF,MAAF,CAASqE,aAAT,CAAwB,WAAUtE,QAAQ,CAACzI,OAAT,CAAiB,IAAjB,EAAuB,KAAvB,CAA8B,IAAhE,CAAf;;AACA,QAAI2D,MAAM,CAAC4F,YAAP,CAAoB,WAApB,MAAqC,MAAzC,EAAiD;AAChDd,MAAAA,QAAQ,GAAGvI,IAAI,CAACC,KAAL,CAAWsI,QAAX,CAAX;AACA;;AAED,QAAI3B,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACNjJ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;AACD,GAZD;;AAcA,QAAMlC,KAAK,GAAG,EAAd;;AACA,MAAIzG,EAAE,IAAIqG,IAAV,EAAgB;AACfI,IAAAA,KAAK,CAACzG,EAAN,GAAWA,EAAE,IAAIqG,IAAjB;AACA;;AACD,MAAIA,IAAJ,EAAU;AACTI,IAAAA,KAAK,CAACJ,IAAN,GAAaA,IAAb;AACA;;AAED,sBACCN;AAAA,eAAiB,0BAAyBwE,gBAAiB,EAA3C,CAA6CkD,IAA7C;AAAhB,KAAyEnD,iBAAzE,gBACCvE;AAAA,eACa,qDAAoDuH,SAAU,EAA/D,CAAiEG,IAAjE,EADZ;AAAA,cAEWpB,QAFX;AAAA,WAGQf;AAHR,KAIK7E,KAJL,EAKK+D,UALL,GAOE,CAAC6F,SAAD,iBAActK;AAAQ,IAAA,KAAK,EAAC;AAAd,IAPhB,EAQEoF,YAAY,CAACtJ,GAAb,CAAkBuN,WAAD,IAAiB;AAClC,QAAIC,cAAc,GAAGD,WAAW,CAACtN,KAAjC;AACA,QAAI6L,MAAM,GAAG,KAAb;;AACA,QAAI,OAAO0B,cAAP,KAA0B,QAA9B,EAAwC;AACvC1B,MAAAA,MAAM,GAAG,IAAT;AACA0B,MAAAA,cAAc,GAAG5L,IAAI,CAACQ,SAAL,CAAeoL,cAAf,CAAjB;AACA;;AACD,UAAMC,WAAW,GAAG,EAApB;;AACA,QAAI3B,MAAJ,EAAY;AACX2B,MAAAA,WAAW,CAAC,WAAD,CAAX,GAA2B,IAA3B;AACA;;AACD,wBACCvJ;AAAA,WAAasJ,cAAb;AAAA,aAAoCA;AAApC,OAAwDC,WAAxD,GAAsEF,WAAW,CAACjI,KAAlF,CADD;AAGA,GAdA,CARF,CADD,eAyBCpB,6BAACwK,QAAD;AAAA,eAAuB,uBAAsB/B,aAAc,EAArC,CAAuCf,IAAvC,EAAtB;AAAA,YAA6EgB,UAA7E;AAAA,WAAgGC;AAAhG,KAA+GH,cAA/G,EAzBD,CADD;AA6BA;AAED6B,MAAM,CAACzJ,SAAP,GAAmB;AAClBgC,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IADL;AAElBT,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAFH;AAGlBwJ,EAAAA,SAAS,EAAEzJ,SAAS,CAACoH,IAHH;AAIlBO,EAAAA,cAAc,EAAE3H,SAAS,CAACqH,MAJR;AAKlBO,EAAAA,aAAa,EAAE5H,SAAS,CAACC,MALP;AAMlB4H,EAAAA,UAAU,EAAE7H,SAAS,CAACsH,MANJ;AAOlBQ,EAAAA,SAAS,EAAE9H,SAAS,CAACsH,MAPH;AAQlBlO,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MARI;AASlBG,EAAAA,QAAQ,EAAEJ,SAAS,CAACuH,SAAV,CAAoB,CAC7BvH,SAAS,CAACmH,IADmB,EAE7BnH,SAAS,CAACC,MAFmB,CAApB,CATQ;AAalBR,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAbE;AAclBrC,EAAAA,OAAO,EAAEoC,SAAS,CAACuH,SAAV,CAAoB,CAC5BvH,SAAS,CAACwH,KADkB,EAE5BxH,SAAS,CAACqH,MAFkB,CAApB,CAdS;AAkBlB5D,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IAlBF;AAmBlB5J,EAAAA,GAAG,EAAEyC,SAAS,CAACC,MAnBG;AAoBlB/E,EAAAA,KAAK,EAAE8E,SAAS,CAACuH,SAAV,CAAoB,CAC1BvH,SAAS,CAACsH,MADgB,EAE1BtH,SAAS,CAACqH,MAFgB,EAG1BrH,SAAS,CAACC,MAHgB,CAApB,CApBW;AAyBlBI,EAAAA,QAAQ,EAAEL,SAAS,CAACuH,SAAV,CAAoB,CAC7BvH,SAAS,CAACmH,IADmB,EAE7BnH,SAAS,CAACC,MAFmB,CAApB,CAzBQ;AA6BlByD,EAAAA,iBAAiB,EAAE1D,SAAS,CAACqH,MA7BX;AA8BlB1D,EAAAA,gBAAgB,EAAE3D,SAAS,CAACC;AA9BV,CAAnB;AAiCAuJ,MAAM,CAACtJ,YAAP,GAAsB;AACrB6B,EAAAA,WAAW,EAAE,IADQ;AAErB2E,EAAAA,SAAS,EAAE,EAFU;AAGrB+C,EAAAA,SAAS,EAAE,KAHU;AAIrB9B,EAAAA,cAAc,EAAE,IAJK;AAKrBC,EAAAA,aAAa,EAAE,EALM;AAMrBC,EAAAA,UAAU,EAAE,EANS;AAOrBC,EAAAA,SAAS,EAAE,EAPU;AAQrB1O,EAAAA,EAAE,EAAE,IARiB;AASrBgH,EAAAA,QAAQ,EAAE,MATW;AAUrBX,EAAAA,IAAI,EAAE,EAVe;AAWrB7B,EAAAA,OAAO,EAAE,IAXY;AAYrB6F,EAAAA,QAAQ,EAAE,IAZW;AAarBlG,EAAAA,GAAG,EAAE,IAbgB;AAcrBrC,EAAAA,KAAK,EAAE,IAdc;AAerBmF,EAAAA,QAAQ,EAAE,IAfW;AAgBrBqD,EAAAA,iBAAiB,EAAE,IAhBE;AAiBrBC,EAAAA,gBAAgB,EAAE;AAjBG,CAAtB;;AC7Ie,SAASiG,QAAT,CAAkB;AAChC7H,EAAAA,WADgC;AAEhC8H,EAAAA,cAFgC;AAGhCC,EAAAA,iBAHgC;AAIhCC,EAAAA,aAJgC;AAKhCxH,EAAAA,QALgC;AAMhCyH,EAAAA,cANgC;AAOhCC,EAAAA,gBAPgC;AAQhCC,EAAAA,eARgC;AAShCzK,EAAAA,IATgC;AAUhC0K,EAAAA,gBAVgC;AAWhC1G,EAAAA,QAXgC;AAYhCvI,EAAAA,KAZgC;AAahCwI,EAAAA,iBAbgC;AAchCC,EAAAA,gBAdgC;AAehCyG,EAAAA;AAfgC,CAAlB,EAgBZ;AACF,QAAM;AAAEjO,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AAEA,MAAI+E,YAAY,GAAG,EAAnB;;AACA,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACtBiB,IAAAA,YAAY,GAAGxJ,KAAf;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,yDAAV,CAAN;AACA;;AACDkF,IAAAA,YAAY,GAAG9I,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAlB;;AACA,QAAIiF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAKC,SAA9C,EAAyD;AACxDD,MAAAA,YAAY,GAAG,EAAf;AACA;AACD;;AACD2F,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4B5F,YAA5B;AAEA,QAAM6F,kBAAkB,GAAG5B,cAAc,CAACjE,YAAD,AAAA,CAAzC;AACA2F,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCC,kBAAlC;;AAEA,QAAM9E,QAAQ,GAAI3F,CAAD,IAAO;AACvB,UAAMvE,GAAG,GAAGuE,CAAC,CAACuF,MAAF,CAASa,YAAT,CAAsB,eAAtB,CAAZ;AACA,UAAMsE,cAAc,GAAG,EACtB,GAAGD,kBADmB;AAEtB,OAAChP,GAAD,GAAOuE,CAAC,CAACuF,MAAF,CAASnK;AAFM,KAAvB;AAKAmP,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BzN,IAAI,CAACQ,SAAL,CAAemN,cAAf,CAA9B;AAEA,UAAMpF,QAAQ,GAAGkE,cAAc,CAACkB,cAAD,CAA/B;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBlF,QAAxB;;AAGC,QAAI3B,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACNjJ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;AAEF,GAnBD;;AAqBA,sBACC5C;AAAA,eAAiB,4BAA2BwE,gBAAiB,EAA7C,CAA+CkD,IAA/C;AAAhB,KAA2EnD,iBAA3E,gBACCvE,6BAAC,MAAD;AAAA,qBACe,OADf;AAAA,cAEWoD,QAFX;AAAA,QAGM,GAAE9C,IAAK,QAHb;AAAA,aAIU;AACR,SAAG,SADK;AAER,SAAG,UAFK;AAGR,SAAG,OAHK;AAIR,SAAG,OAJK;AAKR,SAAG,KALK;AAMR,SAAG,MANK;AAOR,SAAG,MAPK;AAQR,SAAG,QARK;AASR,SAAG,WATK;AAUR,UAAI,SAVI;AAWR,UAAI,UAXI;AAYR,UAAI;AAZI,KAJV;AAAA,cAkBW,MAAM;AACfgG,MAAAA,QAAQ,CAAC;AAAEJ,QAAAA,MAAM,EAAEoF,QAAQ,CAACC,cAAT,CAAyB,GAAEjL,IAAK,QAAhC;AAAV,OAAD,CAAR;AACA,KApBF;AAAA,UAqBM,QArBN;AAAA,WAsBQ8K,kBAAkB,CAACxB,KAtB3B;AAAA,sBAuBkB;AAvBlB,KAwBKmB,eAxBL,EADD,eA2BC/K;AAAA,eACW,2EADX;AAAA,qBAEe,KAFf;AAAA,cAGWoD,QAHX;AAAA,QAIM,GAAE9C,IAAK,MAJb;AAAA,eAKW,SALX;AAAA,eAMY,CANZ;AAAA,cAOWgG,QAPX;AAAA,iBAQa,IARb;AAAA,UASO,CATP;AAAA,UAUM,MAVN;AAAA,WAWQ8E,kBAAkB,CAACvB;AAX3B,KAYKe,aAZL,EA3BD,eAyCC5K;AAAK,IAAA,SAAS,EAAC;AAAf,kBACCA;AAAA,eACW,4EADX;AAAA,qBAEe,MAFf;AAAA,cAGWoD,QAHX;AAAA,QAIM,GAAE9C,IAAK,OAJb;AAAA,eAKW,SALX;AAAA,eAMY,CANZ;AAAA,cAOWgG,QAPX;AAAA,iBAQa,MARb;AAAA,UASO,CATP;AAAA,UAUM,MAVN;AAAA,WAWQ8E,kBAAkB,CAACzB;AAX3B,KAYKsB,cAZL,EADD,eAeCjL;AAAM,IAAA,SAAS,EAAC;AAAhB,SAfD,CAzCD,eA2DCA;AAAK,IAAA,SAAS,EAAC;AAAf,kBACCA;AAAA,eACW,4EADX;AAAA,qBAEe,MAFf;AAAA,cAGWoD,QAHX;AAAA,QAIM,GAAE9C,IAAK,OAJb;AAAA,eAKW,SALX;AAAA,eAMY,CANZ;AAAA,cAOWgG,QAPX;AAAA,iBAQa,IARb;AAAA,UASO,CATP;AAAA,UAUM,MAVN;AAAA,WAWQ8E,kBAAkB,CAACtB;AAX3B,KAYKe,cAZL,EADD,eAeC7K;AAAM,IAAA,SAAS,EAAC;AAAhB,SAfD,CA3DD,eA4ECA;AAAK,IAAA,SAAS,EAAC;AAAf,kBACCA;AAAA,eACW,8EADX;AAAA,qBAEe,QAFf;AAAA,cAGWoD,QAHX;AAAA,QAIM,GAAE9C,IAAK,SAJb;AAAA,eAKW,SALX;AAAA,eAMY,CANZ;AAAA,cAOWgG,QAPX;AAAA,iBAQa,IARb;AAAA,UASO,CATP;AAAA,UAUM,MAVN;AAAA,WAWQ8E,kBAAkB,CAACrB;AAX3B,KAYKe,gBAZL,EADD,eAeC9K;AAAM,IAAA,SAAS,EAAC;AAAhB,SAfD,CA5ED,eA6FCA;AAAA,eACW,8EADX;AAAA,qBAEe,QAFf;AAAA,cAGWoD,QAHX;AAAA,QAIM,GAAE9C,IAAK,SAJb;AAAA,eAKW,SALX;AAAA,eAMY,CANZ;AAAA,cAOWgG,QAPX;AAAA,iBAQa,IARb;AAAA,UASO,CATP;AAAA,UAUM,MAVN;AAAA,WAWQ8E,kBAAkB,CAACpB;AAX3B,KAYKgB,gBAZL,EA7FD,eA2GChL,6BAAC,MAAD;AAAA,qBACe,MADf;AAAA,cAEWoD,QAFX;AAAA;AAAA,QAIM,GAAE9C,IAAK,OAJb;AAAA,aAKU;AACRkL,MAAAA,EAAE,EAAE,IADI;AAERC,MAAAA,EAAE,EAAE;AAFI,KALV;AAAA,cASW,MAAM;AACfnF,MAAAA,QAAQ,CAAC;AAAEJ,QAAAA,MAAM,EAAEoF,QAAQ,CAACC,cAAT,CAAyB,GAAEjL,IAAK,OAAhC;AAAV,OAAD,CAAR;AACA,KAXF;AAAA,UAYM,QAZN;AAAA,WAaQ8K,kBAAkB,CAACnB,IAb3B;AAAA,sBAckB;AAdlB,KAeKS,cAfL,EA3GD,eA6HC1K;AACC,IAAA,IAAI,EAAEM,IADP;AAEC,IAAA,IAAI,EAAC,QAFN;AAGC,IAAA,KAAK,EAAEiF;AAHR,IA7HD,CADD;AAqIA;AAEDkF,QAAQ,CAAC7J,SAAT,GAAqB;AACpBgC,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IADH;AAEpB0C,EAAAA,cAAc,EAAE7J,SAAS,CAACqH,MAFN;AAGpByC,EAAAA,iBAAiB,EAAE9J,SAAS,CAACC,MAHT;AAIpB8J,EAAAA,aAAa,EAAE/J,SAAS,CAACqH,MAJL;AAKpB9E,EAAAA,QAAQ,EAAEvC,SAAS,CAACoH,IALA;AAMpB4C,EAAAA,cAAc,EAAEhK,SAAS,CAACqH,MANN;AAOpB4C,EAAAA,gBAAgB,EAAEjK,SAAS,CAACqH,MAPR;AAQpB6C,EAAAA,eAAe,EAAElK,SAAS,CAACqH,MARP;AASpB5H,EAAAA,IAAI,EAAEO,SAAS,CAACC,MATI;AAUpBkK,EAAAA,gBAAgB,EAAEnK,SAAS,CAACqH,MAVR;AAWpB5D,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IAXA;AAYpBjM,EAAAA,KAAK,EAAE8E,SAAS,CAACC,MAZG;AAapByD,EAAAA,iBAAiB,EAAE1D,SAAS,CAACqH,MAbT;AAcpB1D,EAAAA,gBAAgB,EAAE3D,SAAS,CAACC,MAdR;AAepBmK,EAAAA,cAAc,EAAEpK,SAAS,CAACqH;AAfN,CAArB;AAkBAuC,QAAQ,CAAC1J,YAAT,GAAwB;AACvB6B,EAAAA,WAAW,EAAE,IADU;AAEvB8H,EAAAA,cAAc,EAAE,IAFO;AAGvBC,EAAAA,iBAAiB,EAAE,KAHI;AAIvBC,EAAAA,aAAa,EAAE,IAJQ;AAKvBxH,EAAAA,QAAQ,EAAE,KALa;AAMvByH,EAAAA,cAAc,EAAE,IANO;AAOvBC,EAAAA,gBAAgB,EAAE,IAPK;AAQvBC,EAAAA,eAAe,EAAE,IARM;AASvBzK,EAAAA,IAAI,EAAE,EATiB;AAUvB0K,EAAAA,gBAAgB,EAAE,IAVK;AAWvB1G,EAAAA,QAAQ,EAAE,IAXa;AAYvBvI,EAAAA,KAAK,EAAE,IAZgB;AAavBwI,EAAAA,iBAAiB,EAAE,IAbI;AAcvBC,EAAAA,gBAAgB,EAAE,EAdK;AAevByG,EAAAA,cAAc,EAAE;AAfO,CAAxB;;ACpNe,SAASS,IAAT,CAAc;AAC5B9I,EAAAA,WAD4B;AAE5B+I,EAAAA,gBAF4B;AAG5BC,EAAAA,eAH4B;AAI5BrE,EAAAA,SAJ4B;AAK5BnE,EAAAA,QAL4B;AAM5ByI,EAAAA,SAN4B;AAO5B5R,EAAAA,EAP4B;AAQ5B6R,EAAAA,eAR4B;AAS5BC,EAAAA,cAT4B;AAU5BC,EAAAA,WAV4B;AAW5BC,EAAAA,WAX4B;AAY5BC,EAAAA,YAZ4B;AAa5BC,EAAAA,sBAb4B;AAc5BC,EAAAA,qBAd4B;AAe5BC,EAAAA,cAf4B;AAgB5BC,EAAAA,aAhB4B;AAiB5BC,EAAAA,SAjB4B;AAkB5BC,EAAAA,QAlB4B;AAmB5BlM,EAAAA,IAnB4B;AAoB5ByD,EAAAA,QApB4B;AAqB5BM,EAAAA,UArB4B;AAsB5BoI,EAAAA,QAtB4B;AAuB5BnI,EAAAA,QAvB4B;AAwB5BvI,EAAAA,KAxB4B;AAyB5BwI,EAAAA,iBAzB4B;AA0B5BC,EAAAA,gBA1B4B;AA2B5B,KAAGC;AA3ByB,CAAd,EA4BZ;AACF,QAAM;AAAEzH,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AACA,QAAMoE,QAAQ,GAAGD,MAAM,CAAC,IAAD,CAAvB;AAEA,MAAIY,YAAY,GAAG,EAAnB;;AACA,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACtBiB,IAAAA,YAAY,GAAGxJ,KAAf;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,qDAAV,CAAN;AACA;;AACDkF,IAAAA,YAAY,GAAG9I,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAlB;AACA;;AACD,MAAIiF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAKC,SAA9C,EAAyD;AACxDD,IAAAA,YAAY,GAAG,EAAf;AACA;;AACD,QAAMmH,QAAQ,GAAGF,QAAQ,GAAGjH,YAAY,CAAC3I,MAAb,GAAsB,CAAzB,GAA6B,CAAC,CAAC2I,YAAxD;;AAEA,QAAMoH,YAAY,GAAIhH,CAAD,IAAO;AAC3B,QAAIA,CAAC,YAAYiH,QAAjB,EAA2B;AAC1B,YAAMC,QAAQ,GAAGlH,CAAC,CAAC/I,MAAnB;AACA,YAAMxC,MAAM,GAAG,EAAf;AACA,UAAImB,CAAJ;;AACA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGsR,QAAhB,EAA0BtR,CAAC,IAAI,CAA/B,EAAkC;AACjCnB,QAAAA,MAAM,CAACsB,IAAP,CAAYiK,CAAC,CAACmH,IAAF,CAAOvR,CAAP,EAAU+E,IAAtB;AACA;;AACD,aAAOlG,MAAM,CAACsC,IAAP,CAAY,IAAZ,CAAP;AACA;;AACD,QAAItB,KAAK,CAACC,OAAN,CAAcsK,CAAd,CAAJ,EAAsB;AACrB,aAAOA,CAAC,CAACjJ,IAAF,CAAO,IAAP,CAAP;AACA;;AACD,QAAI,OAAOiJ,CAAP,KAAa,QAAjB,EAA2B;AAC1B,aAAOA,CAAC,CAACrF,IAAT;AACA;;AACD,WAAOqF,CAAP;AACA,GAjBD;;AAmBA,QAAMoH,OAAO,GAAIpH,CAAD,IAAO;AACtB,UAAMvL,MAAM,GAAG,EAAf;;AACA,QAAIuL,CAAC,YAAYiH,QAAjB,EAA2B;AAC1B,YAAMC,QAAQ,GAAGlH,CAAC,CAAC/I,MAAnB;AACA,UAAIrB,CAAJ;;AACA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGsR,QAAhB,EAA0BtR,CAAC,IAAI,CAA/B,EAAkC;AACjCnB,QAAAA,MAAM,CAACsB,IAAP,CAAYsR,GAAG,CAACC,eAAJ,CAAoBtH,CAAC,CAACmH,IAAF,CAAOvR,CAAP,CAApB,CAAZ;AACA;AACD,KAND,MAMO,IAAIH,KAAK,CAACC,OAAN,CAAcsK,CAAd,CAAJ,EAAsB;AAC5B,aAAOA,CAAC,CAAC7J,GAAF,CAAOoR,EAAD,IAAU,GAAEjB,WAAY,GAAEiB,EAAG,EAAnC,CAAP;AACA,KAFM,MAEA,IAAI,OAAOvH,CAAP,KAAa,QAAjB,EAA2B;AACjCvL,MAAAA,MAAM,CAACsB,IAAP,CAAYsR,GAAG,CAACC,eAAJ,CAAoBtH,CAApB,CAAZ;AACA,KAFM,MAEA,IAAI,OAAOA,CAAP,KAAa,QAAjB,EAA2B;AACjCvL,MAAAA,MAAM,CAACsB,IAAP,CAAa,GAAEuQ,WAAY,GAAEtG,CAAE,EAA/B;AACA;;AACD,WAAOvL,MAAP;AACA,GAhBD;;AAkBA,QAAM,CAACwD,SAAD,EAAYuP,YAAZ,IAA4BpI,QAAQ,CAAC4H,YAAY,CAACpH,YAAD,CAAb,CAA1C;AACA,QAAM,CAAC6H,IAAD,EAAOC,OAAP,IAAkBtI,QAAQ,CAACgI,OAAO,CAACxH,YAAD,CAAR,CAAhC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACf6H,IAAAA,YAAY,CAACR,YAAY,CAACpH,YAAD,CAAb,CAAZ;AACA8H,IAAAA,OAAO,CAACN,OAAO,CAACxH,YAAD,CAAR,CAAP;AACA,GAHQ,EAGN,CAACA,YAAD,CAHM,CAAT;;AAKA,QAAMe,QAAQ,GAAI3F,CAAD,IAAO;AACvB,UAAM2M,QAAQ,GAAGd,QAAQ,GAAG7L,CAAC,CAACuF,MAAF,CAAS5I,KAAZ,GAAoBqD,CAAC,CAACuF,MAAF,CAAS5I,KAAT,CAAewP,IAAf,CAAoB,CAApB,CAA7C;AAEAK,IAAAA,YAAY,CAACR,YAAY,CAACW,QAAD,CAAb,CAAZ;;AACA,QAAIpB,YAAJ,EAAkB;AACjBmB,MAAAA,OAAO,CAACN,OAAO,CAACO,QAAD,CAAR,CAAP;AACA;;AAED,QAAIhJ,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAACgJ,QAAD,CAAR;AACA,KAFD,MAEO;AACNtQ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwCgN,QAAxC,EAAkD1K,WAAlD,EAA+D0K,QAA/D;AACA;AACD,GAbD;;AAeA,QAAMC,QAAQ,GAAI5M,CAAD,IAAO;AACvBwM,IAAAA,YAAY,CAAC,EAAD,CAAZ;AAEA,UAAMlH,QAAQ,GAAG,EAAjB;;AACA,QAAI3B,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACNjJ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD,EAA+DqD,QAA/D;AACA;;AAEDrB,IAAAA,QAAQ,CAACmB,OAAT,CAAiBF,KAAjB;AACA,GAXD;;AAaA,MAAI2H,eAAe,GAAGpB,qBAAtB;;AACA,MAAIM,QAAQ,IAAI,CAACtJ,QAAb,IAAyB,CAACW,QAA9B,EAAwC;AACvCyJ,IAAAA,eAAe,IAAI,iBAAnB;AACA;;AAED,QAAM9M,KAAK,GAAG,EAAd;;AACA,MAAIzG,EAAE,IAAIqG,IAAV,EAAgB;AACfI,IAAAA,KAAK,CAACzG,EAAN,GAAWA,EAAE,IAAIqG,IAAjB;AACA;;AAED,QAAMmN,WAAW,GAAG,EAApB;;AACA,MAAInN,IAAJ,EAAU;AACTmN,IAAAA,WAAW,CAACnN,IAAZ,GAAmBA,IAAnB;AACA;;AAED,QAAMoN,WAAW,GAAG,EAApB;;AACA,MAAIzT,EAAE,IAAIqG,IAAV,EAAgB;AACfoN,IAAAA,WAAW,CAACzT,EAAZ,GAAkB,GAAEA,EAAE,IAAIqG,IAAK,SAA/B;AACA;;AAED,sBACCN,4DACG0M,QAAQ,IAAIR,YAAb,IACAkB,IAAI,CAACtR,GAAL,CAAU6R,GAAD,IAAS;AACjB,UAAMC,GAAG,gBACR5N;AAAA,WACK,EADL;AAAA,iBAEa,sBAAqB+L,cAAe,EAArC,CAAuCrE,IAAvC,EAFZ;AAAA,cAGSsE,WAHT;AAAA,WAIM2B,GAJN;AAAA,WAKMA;AALN,OAMK7B,eANL,EADD;;AAWA,QAAIS,SAAJ,EAAe;AACd,0BACCvM;AAAA,mBAAe,qBAAoBsM,aAAc,EAAnC,CAAqC5E,IAArC,EAAd;AAAA,cAAiEiG,GAAjE;AAAA,aAA2EA;AAA3E,SAAoFtB,cAApF,GACEuB,GADF,CADD;AAKA;;AAED,WAAOA,GAAP;AACA,GArBD,CAFF,eAyBC5N;AAAA,eAAiB,wBAAuBwE,gBAAiB,EAAzC,CAA2CkD,IAA3C;AAAhB,KAAuEnD,iBAAvE,gBACCvE;AAAA,eAAiB,8BAA6BwN,eAAgB,EAA9C,CAAgD9F,IAAhD;AAAhB,KAA4EyE,sBAA5E,gBACCnM;AACC,IAAA,SAAS,EAAG,oBAAmB,CAACpC,SAAD,GAAa,2BAAb,GAA2C,EAAG,EAD9E;AAEC,IAAA,EAAE,EAAG,GAAE3D,EAAE,IAAIqG,IAAK;AAFnB,KAIE1C,SAAS,IAAIiO,SAJf,CADD,EAOE,CAAC9H,QAAD,iBACA/D,yEACCA;AAAA,eACa,mDAAkDuH,SAAU,EAA7D,CAA+DG,IAA/D,EADZ;AAAA,cAEWtE,QAFX;AAAA,cAGWoJ,QAHX;AAAA,cAIWlG,QAJX;AAAA,SAKM1B,QALN;AAAA,UAMM;AANN,KAOKlE,KAPL,EAQK+D,UARL,EADD,eAWCzE;AAAA,cACWoD,QADX;AAAA,cAEWqJ,QAFX;AAAA,UAGM,QAHN;AAAA,WAIQlH;AAJR,KAKKkI,WALL,EAXD,CARF,CADD,EA8BEf,QAAQ,IAAI,CAACtJ,QAAb,IAAyB,CAACW,QAA1B,iBACA/D;AAAA,eACa,8DAA6D4L,eAAgB,EAA9E,CAAgFlE,IAAhF,EADZ;AAAA,aAEU6F,QAFV;AAAA,UAGM;AAHN,KAIKG,WAJL,EAKK/B,gBALL,GAOEtH,UAPF,CA/BF,CAzBD,CADD;AAsEA;AAEDqH,IAAI,CAAC9K,SAAL,GAAiB;AAChBgC,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IADP;AAEhB2D,EAAAA,gBAAgB,EAAE9K,SAAS,CAACqH,MAFZ;AAGhB0D,EAAAA,eAAe,EAAE/K,SAAS,CAACC,MAHX;AAIhByG,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAJL;AAKhBsC,EAAAA,QAAQ,EAAEvC,SAAS,CAACoH,IALJ;AAMhB4D,EAAAA,SAAS,EAAEhL,SAAS,CAACC,MANL;AAOhB7G,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MAPE;AAQhBgL,EAAAA,eAAe,EAAEjL,SAAS,CAACqH,MARX;AAShB6D,EAAAA,cAAc,EAAElL,SAAS,CAACC,MATV;AAUhBkL,EAAAA,WAAW,EAAEnL,SAAS,CAACsH,MAVP;AAWhB8D,EAAAA,WAAW,EAAEpL,SAAS,CAACC,MAXP;AAYhBoL,EAAAA,YAAY,EAAErL,SAAS,CAACoH,IAZR;AAahBkE,EAAAA,sBAAsB,EAAEtL,SAAS,CAACqH,MAblB;AAchBkE,EAAAA,qBAAqB,EAAEvL,SAAS,CAACC,MAdjB;AAehBuL,EAAAA,cAAc,EAAExL,SAAS,CAACqH,MAfV;AAgBhBoE,EAAAA,aAAa,EAAEzL,SAAS,CAACC,MAhBT;AAiBhByL,EAAAA,SAAS,EAAE1L,SAAS,CAACoH,IAjBL;AAkBhBuE,EAAAA,QAAQ,EAAE3L,SAAS,CAACoH,IAlBJ;AAmBhB3H,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAnBA;AAoBhBiD,EAAAA,QAAQ,EAAElD,SAAS,CAACoH,IApBJ;AAqBhB5D,EAAAA,UAAU,EAAExD,SAAS,CAACC,MArBN;AAsBhB2L,EAAAA,QAAQ,EAAE5L,SAAS,CAACoH,IAtBJ;AAuBhB3D,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IAvBJ;AAwBhBjM,EAAAA,KAAK,EAAE8E,SAAS,CAACuH,SAAV,CAAoB,CAC1BvH,SAAS,CAACwH,KADgB,EAE1BxH,SAAS,CAACqH,MAFgB,EAG1BrH,SAAS,CAACC,MAHgB,CAApB,CAxBS;AA6BhByD,EAAAA,iBAAiB,EAAE1D,SAAS,CAACqH,MA7Bb;AA8BhB1D,EAAAA,gBAAgB,EAAE3D,SAAS,CAACC;AA9BZ,CAAjB;AAiCA4K,IAAI,CAAC3K,YAAL,GAAoB;AACnB6B,EAAAA,WAAW,EAAE,IADM;AAEnB+I,EAAAA,gBAAgB,EAAE,IAFC;AAGnBC,EAAAA,eAAe,EAAE,EAHE;AAInBrE,EAAAA,SAAS,EAAE,EAJQ;AAKnBnE,EAAAA,QAAQ,EAAE,KALS;AAMnByI,EAAAA,SAAS,EAAE,mBANQ;AAOnB5R,EAAAA,EAAE,EAAE,EAPe;AAQnB6R,EAAAA,eAAe,EAAE,IARE;AASnBC,EAAAA,cAAc,EAAE,EATG;AAUnBC,EAAAA,WAAW,EAAE,GAVM;AAWnBC,EAAAA,WAAW,EAAE,EAXM;AAYnBC,EAAAA,YAAY,EAAE,KAZK;AAanBC,EAAAA,sBAAsB,EAAE,IAbL;AAcnBC,EAAAA,qBAAqB,EAAE,EAdJ;AAenBC,EAAAA,cAAc,EAAE,IAfG;AAgBnBC,EAAAA,aAAa,EAAE,EAhBI;AAiBnBC,EAAAA,SAAS,EAAE,KAjBQ;AAkBnBC,EAAAA,QAAQ,EAAE,KAlBS;AAmBnBlM,EAAAA,IAAI,EAAE,EAnBa;AAoBnByD,EAAAA,QAAQ,EAAE,KApBS;AAqBnBM,EAAAA,UAAU,EAAE,QArBO;AAsBnBoI,EAAAA,QAAQ,EAAE,KAtBS;AAuBnBnI,EAAAA,QAAQ,EAAE,IAvBS;AAwBnBvI,EAAAA,KAAK,EAAE,IAxBY;AAyBnBwI,EAAAA,iBAAiB,EAAE,IAzBA;AA0BnBC,EAAAA,gBAAgB,EAAE;AA1BC,CAApB;;ACtPe,SAASqJ,kBAAT,CAA4B;AAAEC,EAAAA,QAAF;AAAYvG,EAAAA,SAAZ;AAAuBwG,EAAAA;AAAvB,CAA5B,EAAgE;AAC9E,MAAI,CAACA,SAAL,EAAgB;AACf,WAAOD,QAAP;AACA;;AAED,sBACC9N;AAAK,IAAA,SAAS,EAAEuH;AAAhB,KACEuG,QADF,CADD;AAKA;AAEDD,kBAAkB,CAACjN,SAAnB,GAA+B;AAC9BkN,EAAAA,QAAQ,EAAEjN,SAAS,CAACmN,IAAV,CAAeC,UADK;AAE9B1G,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAFS;AAG9BiN,EAAAA,SAAS,EAAElN,SAAS,CAACqN;AAHS,CAA/B;AAMAL,kBAAkB,CAAC9M,YAAnB,GAAkC;AACjCwG,EAAAA,SAAS,EAAE,EADsB;AAEjCwG,EAAAA,SAAS,EAAE;AAFsB,CAAlC;;ACfe,SAASI,KAAT,CAAe;AAC7BvL,EAAAA,WAD6B;AAE7B2E,EAAAA,SAF6B;AAG7BtN,EAAAA,EAH6B;AAI7BqG,EAAAA,IAJ6B;AAK7BgE,EAAAA,QAL6B;AAM7B8J,EAAAA,MAN6B;AAO7BlU,EAAAA,IAP6B;AAQ7B6B,EAAAA,KAR6B;AAS7B,KAAG0I;AAT0B,CAAf,EAUZ;AACF,QAAM;AAAEzH,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AAEA,MAAI+E,YAAY,GAAG,EAAnB;;AACA,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACtBiB,IAAAA,YAAY,GAAGxJ,KAAf;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,sDAAV,CAAN;AACA;;AACD,QAAInG,IAAI,KAAK,MAAb,EAAqB;AACpBqL,MAAAA,YAAY,GAAG9I,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAlB;;AACA,UAAIiF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAKC,SAA9C,EAAyD;AACxDD,QAAAA,YAAY,GAAG,EAAf;AACA;AACD;AACD;;AAED,QAAMe,QAAQ,GAAI3F,CAAD,IAAO;AACvB,UAAMsF,QAAQ,GAAGtF,CAAC,CAACuF,MAAF,CAASnK,KAA1B;;AACA,QAAIuI,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACNjJ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;AACD,GAPD;;AASA,QAAMlC,KAAK,GAAG,EAAd;;AACA,MAAIzG,EAAE,IAAIqG,IAAV,EAAgB;AACfI,IAAAA,KAAK,CAACzG,EAAN,GAAWA,EAAE,IAAIqG,IAAjB;AACA;;AACD,MAAIA,IAAJ,EAAU;AACTI,IAAAA,KAAK,CAACJ,IAAN,GAAaA,IAAb;AACA;;AAED,sBACCN,6BAAC,kBAAD;AAAoB,IAAA,SAAS,EAAC,0BAA9B;AAAyD,IAAA,SAAS,EAAEoO;AAApE,kBACCpO;AAAA,eACa,wBAAuBuH,SAAU,EAAlC,CAAoCG,IAApC,EADZ;AAAA,cAEWpB,QAFX;AAAA,UAGOpM,IAHP;AAAA,WAIQqL;AAJR,KAKK7E,KALL,EAMK+D,UANL,EADD,EASE2J,MAAM,iBAAIpO;AAAM,IAAA,SAAS,EAAC;AAAhB,KAAkCoO,MAAlC,CATZ,CADD;AAaA;AAEDD,KAAK,CAACvN,SAAN,GAAkB;AACjBgC,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IADN;AAEjBT,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAFJ;AAGjB7G,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MAHG;AAIjBR,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAJC;AAKjBwD,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IALH;AAMjBoG,EAAAA,MAAM,EAAEvN,SAAS,CAACC,MAND;AAOjB5G,EAAAA,IAAI,EAAE2G,SAAS,CAACC,MAPC;AAQjB/E,EAAAA,KAAK,EAAE8E,SAAS,CAACC;AARA,CAAlB;AAWAqN,KAAK,CAACpN,YAAN,GAAqB;AACpB6B,EAAAA,WAAW,EAAE,IADO;AAEpB2E,EAAAA,SAAS,EAAE,EAFS;AAGpBtN,EAAAA,EAAE,EAAE,IAHgB;AAIpBqG,EAAAA,IAAI,EAAE,EAJc;AAKpBgE,EAAAA,QAAQ,EAAE,IALU;AAMpB8J,EAAAA,MAAM,EAAE,EANY;AAOpBlU,EAAAA,IAAI,EAAE,MAPc;AAQpB6B,EAAAA,KAAK,EAAE;AARa,CAArB;;ACzEe,SAASsS,QAAT,CAAkB;AAChC1C,EAAAA,gBADgC;AAEhCC,EAAAA,eAFgC;AAGhCrE,EAAAA,SAHgC;AAIhC+G,EAAAA,QAJgC;AAKhCC,EAAAA,QALgC;AAMhChK,EAAAA,iBANgC;AAOhCC,EAAAA,gBAPgC;AAQhC,KAAGC;AAR6B,CAAlB,EASZ;AACF,QAAM,CAAC+J,QAAD,EAAWC,WAAX,IAA0B1J,QAAQ,CAAC,UAAD,CAAxC;;AACA,QAAM2J,cAAc,GAAG,MAAM;AAC5B,QAAIF,QAAQ,KAAK,UAAjB,EAA6B;AAC5BC,MAAAA,WAAW,CAAC,MAAD,CAAX;AACA,KAFD,MAEO;AACNA,MAAAA,WAAW,CAAC,UAAD,CAAX;AACA;AACD,GAND;;AAQA,sBACCzO;AAAA,eAAiB,4BAA2BwE,gBAAiB,EAA7C,CAA+CkD,IAA/C;AAAhB,KAA2EnD,iBAA3E,gBACCvE,6BAAC,KAAD;AAAA,eACa,iDAAgDuH,SAAU,EAA3D,CAA6DG,IAA7D;AADZ,KAEKjD,UAFL;AAAA,UAGO+J;AAHP,KADD,eAMCxO;AAAA,eACa,kEAAiE4L,eAAgB,EAAlF,CAAoFlE,IAApF,EADZ;AAAA,aAEUgH,cAFV;AAAA,UAGM;AAHN,KAIK/C,gBAJL,GAME6C,QAAQ,KAAK,UAAb,GAA0BD,QAA1B,GAAqCD,QANvC,CAND,CADD;AAiBA;AAEDD,QAAQ,CAACzN,SAAT,GAAqB;AACpB+K,EAAAA,gBAAgB,EAAE9K,SAAS,CAACqH,MADR;AAEpB0D,EAAAA,eAAe,EAAE/K,SAAS,CAACC,MAFP;AAGpByG,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAHD;AAIpBwN,EAAAA,QAAQ,EAAEzN,SAAS,CAACC,MAJA;AAKpByN,EAAAA,QAAQ,EAAE1N,SAAS,CAACC,MALA;AAMpByD,EAAAA,iBAAiB,EAAE1D,SAAS,CAACqH,MANT;AAOpB1D,EAAAA,gBAAgB,EAAE3D,SAAS,CAACC;AAPR,CAArB;AAUAuN,QAAQ,CAACtN,YAAT,GAAwB;AACvB4K,EAAAA,gBAAgB,EAAE,IADK;AAEvBC,EAAAA,eAAe,EAAE,EAFM;AAGvBrE,EAAAA,SAAS,EAAE,EAHY;AAIvB+G,EAAAA,QAAQ,EAAE,MAJa;AAKvBC,EAAAA,QAAQ,EAAE,MALa;AAMvBhK,EAAAA,iBAAiB,EAAE,IANI;AAOvBC,EAAAA,gBAAgB,EAAE;AAPK,CAAxB;;AC7Ce,SAASmK,KAAT,CAAe;AAC7B/L,EAAAA,WAD6B;AAE7B2E,EAAAA,SAF6B;AAG7BnG,EAAAA,KAH6B;AAI7B2H,EAAAA,eAJ6B;AAK7BC,EAAAA,cAL6B;AAM7B/H,EAAAA,QAN6B;AAO7BgI,EAAAA,cAP6B;AAQ7BC,EAAAA,aAR6B;AAS7BC,EAAAA,kBAT6B;AAU7BC,EAAAA,iBAV6B;AAW7B9I,EAAAA,IAX6B;AAY7B7B,EAAAA,OAZ6B;AAa7BgO,EAAAA,QAb6B;AAc7BnI,EAAAA,QAd6B;AAe7BlG,EAAAA,GAf6B;AAgB7BrC,EAAAA,KAhB6B;AAiB7BmF,EAAAA,QAjB6B;AAkB7B,KAAGuD;AAlB0B,CAAf,EAmBZ;AACF,QAAM;AAAEzH,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AACA,QAAM,CAAC4E,YAAD,EAAeC,eAAf,IAAkCN,QAAQ,CAACtG,OAAO,GAAGuC,gBAAgB,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAApB,CAAnB,GAAmD,EAA3D,CAAhD;AAEAoE,EAAAA,SAAS,CAAC,MAAM;AACf,QAAIlH,GAAJ,EAAS;AACRD,MAAAA,GAAG,CAAC1B,GAAJ,CAAQ2B,GAAR,EACEc,IADF,CACQC,QAAD,IAAc;AACnBkG,QAAAA,eAAe,CAACrE,gBAAgB,CAAC7B,QAAD,EAAW8B,QAAX,EAAqBC,QAArB,CAAjB,CAAf;AACA,OAHF;AAIA;;AACD,WAAO,MAAM,EAAb;AACA,GARQ,EAQN,CAAC9C,GAAD,CARM,CAAT;AAUAkH,EAAAA,SAAS,CAAC,MAAM;AACfD,IAAAA,eAAe,CAAC5G,OAAO,GAAGuC,gBAAgB,CAACvC,OAAD,EAAUwC,QAAV,EAAoBC,QAApB,CAAnB,GAAmD,EAA3D,CAAf;AACA,WAAO,MAAM,EAAb;AACA,GAHQ,EAGN,CAACzC,OAAD,CAHM,CAAT;AAKA,MAAI8G,YAAY,GAAG,EAAnB;;AACA,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACtBiB,IAAAA,YAAY,GAAGxJ,KAAf;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,sDAAV,CAAN;AACA;;AACDkF,IAAAA,YAAY,GAAG9I,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAlB;AACA;;AACD,MAAIiF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAKC,SAA9C,EAAyD;AACxDD,IAAAA,YAAY,GAAG,EAAf;AACA;;AACD,MAAI,OAAOA,YAAP,KAAwB,QAA5B,EAAsC;AACrCA,IAAAA,YAAY,GAAG7H,IAAI,CAACQ,SAAL,CAAeqH,YAAf,CAAf;AACA;;AAED,QAAMe,QAAQ,GAAI3F,CAAD,IAAO;AACvB,QAAIsF,QAAQ,GAAGtF,CAAC,CAACuF,MAAF,CAASnK,KAAxB;;AACA,QAAI4E,CAAC,CAACuF,MAAF,CAASa,YAAT,CAAsB,WAAtB,MAAuC,MAA3C,EAAmD;AAClDd,MAAAA,QAAQ,GAAGvI,IAAI,CAACC,KAAL,CAAWsI,QAAX,CAAX;AACA;;AAED,QAAI3B,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACNjJ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;AACD,GAXD;;AAaA,sBACC5C;AAAA,eAAgB,iBAAgBkJ,aAAc,EAA/B,CAAiCxB,IAAjC;AAAf,KAA4DuB,cAA5D,GACE7D,YAAY,CAACtJ,GAAb,CAAkBuN,WAAD,IAAiB;AAClC,QAAIC,cAAc,GAAGD,WAAW,CAACtN,KAAjC;AACA,QAAI6L,MAAM,GAAG,KAAb;;AACA,QAAI,OAAO0B,cAAP,KAA0B,QAA9B,EAAwC;AACvC1B,MAAAA,MAAM,GAAG,IAAT;AACA0B,MAAAA,cAAc,GAAG5L,IAAI,CAACQ,SAAL,CAAeoL,cAAf,CAAjB;AACA;;AAED,UAAMV,OAAO,GAAGrD,YAAY,KAAK+D,cAAjC;AAEA,UAAMC,WAAW,GAAG,EAApB;;AACA,QAAI3B,MAAJ,EAAY;AACX2B,MAAAA,WAAW,CAAC,WAAD,CAAX,GAA2B,IAA3B;AACA;;AACD,QAAIjJ,IAAJ,EAAU;AACTiJ,MAAAA,WAAW,CAACjJ,IAAZ,GAAmBA,IAAnB;AACA;;AAED,wBACCN;AAAA,iBAAgB,uBAAsBoJ,iBAAkB,EAAzC,CAA2C1B,IAA3C,EAAf;AAAA,WAAuE4B;AAAvE,OAA2FH,kBAA3F,gBACCnJ;AAAA,iBACa,uBAAsB4I,OAAO,GAAG,gCAAH,GAAsC,EAAG,IAAGI,cAAe,EAAzF,CAA2FtB,IAA3F;AADZ,OAEKqB,eAFL,gBAIC/I;AAAA,eACU4I,OADV;AAAA,iBAEa,6CAA4CrB,SAAU,EAAvD,CAAyDG,IAAzD,EAFZ;AAAA,gBAGWpB,QAHX;AAAA,gBAIWmG,QAJX;AAAA,YAKM,OALN;AAAA,aAMQnD;AANR,OAOKC,WAPL,EAQK9E,UARL,EAJD,EAcE4E,WAAW,CAACjI,KAdd,CADD,CADD;AAoBA,GAtCA,CADF,CADD;AA2CA;AAEDuN,KAAK,CAAC/N,SAAN,GAAkB;AACjBgC,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IADN;AAEjBT,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAFJ;AAGjBM,EAAAA,KAAK,EAAEP,SAAS,CAACC,MAHA;AAIjBiI,EAAAA,eAAe,EAAElI,SAAS,CAACqH,MAJV;AAKjBc,EAAAA,cAAc,EAAEnI,SAAS,CAACC,MALT;AAMjBG,EAAAA,QAAQ,EAAEJ,SAAS,CAACuH,SAAV,CAAoB,CAC7BvH,SAAS,CAACmH,IADmB,EAE7BnH,SAAS,CAACC,MAFmB,CAApB,CANO;AAUjBmI,EAAAA,cAAc,EAAEpI,SAAS,CAACqH,MAVT;AAWjBgB,EAAAA,aAAa,EAAErI,SAAS,CAACC,MAXR;AAYjBqI,EAAAA,kBAAkB,EAAEtI,SAAS,CAACqH,MAZb;AAajBkB,EAAAA,iBAAiB,EAAEvI,SAAS,CAACC,MAbZ;AAcjBR,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAdC;AAejBrC,EAAAA,OAAO,EAAEoC,SAAS,CAACuH,SAAV,CAAoB,CAC5BvH,SAAS,CAACwH,KADkB,EAE5BxH,SAAS,CAACqH,MAFkB,CAApB,CAfQ;AAmBjBuE,EAAAA,QAAQ,EAAE5L,SAAS,CAACoH,IAnBH;AAoBjB3D,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IApBH;AAqBjB5J,EAAAA,GAAG,EAAEyC,SAAS,CAACC,MArBE;AAsBjB/E,EAAAA,KAAK,EAAE8E,SAAS,CAACuH,SAAV,CAAoB,CAC1BvH,SAAS,CAACsH,MADgB,EAE1BtH,SAAS,CAACqH,MAFgB,EAG1BrH,SAAS,CAACC,MAHgB,CAApB,CAtBU;AA2BjBI,EAAAA,QAAQ,EAAEL,SAAS,CAACuH,SAAV,CAAoB,CAC7BvH,SAAS,CAACmH,IADmB,EAE7BnH,SAAS,CAACC,MAFmB,CAApB;AA3BO,CAAlB;AAiCA6N,KAAK,CAAC5N,YAAN,GAAqB;AACpB6B,EAAAA,WAAW,EAAE,IADO;AAEpB2E,EAAAA,SAAS,EAAE,EAFS;AAGpBnG,EAAAA,KAAK,EAAE,EAHa;AAIpB2H,EAAAA,eAAe,EAAE,IAJG;AAKpBC,EAAAA,cAAc,EAAE,EALI;AAMpB/H,EAAAA,QAAQ,EAAE,MANU;AAOpBgI,EAAAA,cAAc,EAAE,IAPI;AAQpBC,EAAAA,aAAa,EAAE,EARK;AASpBC,EAAAA,kBAAkB,EAAE,IATA;AAUpBC,EAAAA,iBAAiB,EAAE,EAVC;AAWpB9I,EAAAA,IAAI,EAAE,EAXc;AAYpB7B,EAAAA,OAAO,EAAE,IAZW;AAapBgO,EAAAA,QAAQ,EAAE,KAbU;AAcpBnI,EAAAA,QAAQ,EAAE,IAdU;AAepBlG,EAAAA,GAAG,EAAE,IAfe;AAgBpBrC,EAAAA,KAAK,EAAE,IAhBa;AAiBpBmF,EAAAA,QAAQ,EAAE;AAjBU,CAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJe,SAAS0N,MAAT,CAAgB;AAC9BrH,EAAAA,SAD8B;AAE9BiB,EAAAA,cAF8B;AAG9BC,EAAAA,aAH8B;AAI9BC,EAAAA,UAJ8B;AAK9BC,EAAAA,SAL8B;AAM9BpE,EAAAA,iBAN8B;AAO9BC,EAAAA,gBAP8B;AAQ9B,KAAGC;AAR2B,CAAhB,EASZ;AACF,sBACCzE;AAAA,eAAiB,0BAAyBwE,gBAAiB,EAA3C,CAA6CkD,IAA7C;AAAhB,KAAyEnD,iBAAzE,gBACCvE,6BAAC,KAAD;AAAA,eACa,gCAA+BuH,SAAU,EAA1C,CAA4CG,IAA5C;AADZ,KAEKjD,UAFL,EADD,eAKCzE,6BAAC6O,SAAD;AAAA,eAAwB,wBAAuBpG,aAAc,EAAtC,CAAwCf,IAAxC,EAAvB;AAAA,YAA+EgB,UAA/E;AAAA,WAAkGC;AAAlG,KAAiHH,cAAjH,EALD,CADD;AASA;AAEDoG,MAAM,CAAChO,SAAP,GAAmB;AAClB2G,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MADH;AAElB0H,EAAAA,cAAc,EAAE3H,SAAS,CAACqH,MAFR;AAGlBO,EAAAA,aAAa,EAAE5H,SAAS,CAACC,MAHP;AAIlB4H,EAAAA,UAAU,EAAE7H,SAAS,CAACsH,MAJJ;AAKlBQ,EAAAA,SAAS,EAAE9H,SAAS,CAACsH,MALH;AAMlB5D,EAAAA,iBAAiB,EAAE1D,SAAS,CAACqH,MANX;AAOlB1D,EAAAA,gBAAgB,EAAE3D,SAAS,CAACC;AAPV,CAAnB;AAUA8N,MAAM,CAAC7N,YAAP,GAAsB;AACrBwG,EAAAA,SAAS,EAAE,EADU;AAErBiB,EAAAA,cAAc,EAAE,IAFK;AAGrBC,EAAAA,aAAa,EAAE,EAHM;AAIrBC,EAAAA,UAAU,EAAE,EAJS;AAKrBC,EAAAA,SAAS,EAAE,EALU;AAMrBpE,EAAAA,iBAAiB,EAAE,IANE;AAOrBC,EAAAA,gBAAgB,EAAE;AAPG,CAAtB;;AC/Be,SAASsK,QAAT,CAAkB;AAChClM,EAAAA,WADgC;AAEhC2E,EAAAA,SAFgC;AAGhCtN,EAAAA,EAHgC;AAIhCqG,EAAAA,IAJgC;AAKhCgE,EAAAA,QALgC;AAMhCvI,EAAAA,KANgC;AAOhC,KAAG0I;AAP6B,CAAlB,EAQZ;AACF,QAAM;AAAEzH,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AAEA,MAAI+E,YAAY,GAAG,EAAnB;;AACA,MAAIjB,QAAQ,KAAK,IAAjB,EAAuB;AACtBiB,IAAAA,YAAY,GAAGxJ,KAAf;AACA,GAFD,MAEO;AACN,QAAIiB,SAAS,KAAKwI,SAAlB,EAA6B;AAC5B,YAAM,IAAInF,KAAJ,CAAU,yDAAV,CAAN;AACA;;AACDkF,IAAAA,YAAY,GAAG9I,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAlB;AACA;;AACD,MAAIiF,YAAY,KAAK,IAAjB,IAAyBA,YAAY,KAAKC,SAA9C,EAAyD;AACxDD,IAAAA,YAAY,GAAG,EAAf;AACA;;AAED,QAAMe,QAAQ,GAAI3F,CAAD,IAAO;AACvB,UAAMsF,QAAQ,GAAGtF,CAAC,CAACuF,MAAF,CAASnK,KAA1B;;AACA,QAAIuI,QAAJ,EAAc;AACbA,MAAAA,QAAQ,CAAC2B,QAAD,CAAR;AACA,KAFD,MAEO;AACNjJ,MAAAA,SAAS,CAACoD,SAAV,CAAoBpD,SAApB,EAA+B2D,CAA/B,EAAkCL,IAAlC,EAAwC2F,QAAxC,EAAkDrD,WAAlD;AACA;AACD,GAPD;;AASA,QAAMlC,KAAK,GAAG,EAAd;;AACA,MAAIzG,EAAE,IAAIqG,IAAV,EAAgB;AACfI,IAAAA,KAAK,CAACzG,EAAN,GAAWA,EAAE,IAAIqG,IAAjB;AACA;;AACD,MAAIA,IAAJ,EAAU;AACTI,IAAAA,KAAK,CAACJ,IAAN,GAAaA,IAAb;AACA;;AAED,sBACCN;AAAA,eACa,uDAAsDuH,SAAU,EAAjE,CAAmEG,IAAnE,EADZ;AAAA,cAEWpB,QAFX;AAAA,WAGQf;AAHR,KAIK7E,KAJL,EAKK+D,UALL,EADD;AASA;AAEDqK,QAAQ,CAAClO,SAAT,GAAqB;AACpBgC,EAAAA,WAAW,EAAE/B,SAAS,CAACmH,IADH;AAEpBT,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MAFD;AAGpB7G,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MAHM;AAIpBR,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAJI;AAKpBwD,EAAAA,QAAQ,EAAEzD,SAAS,CAACmH,IALA;AAMpBjM,EAAAA,KAAK,EAAE8E,SAAS,CAACC;AANG,CAArB;AASAgO,QAAQ,CAAC/N,YAAT,GAAwB;AACvB6B,EAAAA,WAAW,EAAE,IADU;AAEvB2E,EAAAA,SAAS,EAAE,EAFY;AAGvBtN,EAAAA,EAAE,EAAE,IAHmB;AAIvBqG,EAAAA,IAAI,EAAE,EAJiB;AAKvBgE,EAAAA,QAAQ,EAAE,IALa;AAMvBvI,EAAAA,KAAK,EAAE;AANgB,CAAxB;;ACtDA,uBAAe,CAAC7B,IAAD,EAAO6U,SAAP,KAAqB;AACnC,MAAIA,SAAJ,EAAe;AACd,WAAOA,SAAP;AACA;;AACD,MAAI7U,IAAI,KAAK,QAAb,EAAuB;AACtB,WAAOmQ,MAAP;AACA;;AACD,MAAInQ,IAAI,KAAK,UAAb,EAAyB;AACxB,WAAO4U,QAAP;AACA;;AACD,MAAI5U,IAAI,KAAK,OAAb,EAAsB;AACrB,WAAOyU,KAAP;AACA;;AACD,MAAIzU,IAAI,KAAK,UAAb,EAAyB;AACxB,WAAOqO,QAAP;AACA;;AACD,MAAIrO,IAAI,KAAK,UAAb,EAAyB;AACxB,WAAOmU,QAAP;AACA;;AACD,MAAInU,IAAI,KAAK,UAAb,EAAyB;AACxB,WAAOuQ,QAAP;AACA;;AACD,MAAIvQ,IAAI,KAAK,QAAb,EAAuB;AACtB,WAAO0U,MAAP;AACA;;AACD,MAAI1U,IAAI,KAAK,cAAb,EAA6B;AAC5B,WAAOwI,YAAP;AACA;;AACD,MAAIxI,IAAI,KAAK,MAAb,EAAqB;AACpB,WAAOwR,IAAP;AACA;;AACD,MAAIxR,IAAI,KAAK,eAAb,EAA8B;AAC7B,WAAO4O,YAAP;AACA;;AACD,SAAOqF,KAAP;AACA,CAnCD;;ACZA,mBAAe,CAACa,QAAD,EAAW1O,IAAX,KAAoB;AAClC,QAAM2O,QAAQ,GAAG,CAAC,GAAGD,QAAJ,CAAjB;;AACA,MAAI,CAACC,QAAQ,CAACxR,QAAT,CAAkB6C,IAAlB,CAAL,EAA8B;AAC7B2O,IAAAA,QAAQ,CAACvT,IAAT,CAAc4E,IAAd;AACA;;AACD,SAAO2O,QAAP;AACA,CAND;;ACQe,SAASC,OAAT,CAAiB;AAC/BzU,EAAAA,UAD+B;AAE/BmR,EAAAA,eAF+B;AAG/BtL,EAAAA,IAH+B;AAI/B6O,EAAAA,UAJ+B;AAK/BC,EAAAA;AAL+B,CAAjB,EAMZ;AACF,QAAM;AAAEpS,IAAAA,SAAF;AAAaqS,IAAAA;AAAb,MAA8B9O,UAAU,CAACC,WAAD,CAA9C;AACA,QAAM,CAAC8O,MAAD,EAASC,SAAT,IAAsBxK,QAAQ,CAAC,CAAD,CAApC;AACA,QAAMnJ,MAAM,GAAGa,GAAG,CAACO,SAAS,CAACI,GAAX,EAAgBkD,IAAhB,CAAH,IAA4B,EAA3C;;AAEA,QAAMkP,KAAK,GAAG,MAAM;AACnB,UAAMvJ,QAAQ,GAAGxJ,GAAG,CAACO,SAAS,CAACI,GAAX,EAAiB,QAAOkD,IAAK,EAA7B,CAApB;AACA,UAAMmP,WAAW,GAAGxJ,QAAQ,IAAI5L,MAAM,CAACW,IAAP,CAAYiL,QAAZ,EAAsBrJ,MAAtB,GAA+B,CAA/D;;AACA,QAAI,CAAC6S,WAAL,EAAkB;AACjB;AACA;;AAEDxJ,IAAAA,QAAQ,CAAChM,EAAT,GAAe,QAAOqV,MAAO,EAA7B;AACArJ,IAAAA,QAAQ,CAAC/L,IAAT,GAAgBiV,UAAhB;AACAI,IAAAA,SAAS,CAACD,MAAM,GAAG,CAAV,CAAT;AAEA,UAAMI,MAAM,GAAG,EAAE,GAAG1S,SAAS,CAACI;AAAf,KAAf;AACA,UAAMuS,SAAS,GAAGlT,GAAG,CAACiT,MAAD,EAASpP,IAAT,CAAH,IAAqB,EAAvC;AACAqP,IAAAA,SAAS,CAACjU,IAAV,CAAeuK,QAAf;AAEAtJ,IAAAA,GAAG,CAAC+S,MAAD,EAASpP,IAAT,EAAeqP,SAAf,CAAH;AACAhT,IAAAA,GAAG,CAAC+S,MAAD,EAAU,QAAOpP,IAAK,EAAtB,EAAyB,EAAzB,CAAH;AAEA+O,IAAAA,YAAY,CAAC,EACZ,GAAGrS,SADS;AAEZG,MAAAA,KAAK,EAAEyS,WAAW,CAAC5S,SAAS,CAACG,KAAX,EAAkBmD,IAAlB,CAFN;AAGZrE,MAAAA,aAAa,EAAE2T,WAAW,CAAC5S,SAAS,CAACf,aAAX,EAA2B,GAAEgK,QAAQ,CAAC/L,IAAK,IAAG+L,QAAQ,CAAChM,EAAG,EAA1D,CAHd;AAIZmD,MAAAA,GAAG,EAAEsS;AAJO,KAAD,CAAZ;AAOApE,IAAAA,QAAQ,CAACC,cAAT,CAAyB,QAAOjL,IAAK,IAAG7F,UAAU,CAAC,CAAD,CAAV,CAAc6F,IAAK,EAA3D,EAA8DuF,KAA9D;AACA,GA1BD;;AA4BA,QAAMW,SAAS,GAAI7F,CAAD,IAAO;AACxB,QAAIA,CAAC,CAACvE,GAAF,KAAU,OAAd,EAAuB;AACtB;AACA;;AACD,UAAM6J,QAAQ,GAAGxJ,GAAG,CAACO,SAAS,CAACI,GAAX,EAAiB,QAAOkD,IAAK,EAA7B,CAApB;AACA,UAAMmP,WAAW,GAAGxJ,QAAQ,IAAI5L,MAAM,CAACW,IAAP,CAAYiL,QAAZ,EAAsBrJ,MAAtB,GAA+B,CAA/D;;AACA,QAAI6S,WAAJ,EAAiB;AAChB9O,MAAAA,CAAC,CAACgG,cAAF;AACAhG,MAAAA,CAAC,CAACkP,eAAF;AACAL,MAAAA,KAAK;AACL;AACD,GAXD;;AAaA,QAAMjC,QAAQ,GAAI5M,CAAD,IAAO;AACvB,UAAMpF,CAAC,GAAGoF,CAAC,CAACuF,MAAF,CAASa,YAAT,CAAsB,YAAtB,CAAV;;AACA,QAAIxL,CAAC,GAAG,CAAR,EAAW;AACV;AACA;;AAED,UAAMmU,MAAM,GAAG,EAAE,GAAG1S,SAAS,CAACI;AAAf,KAAf;AACA,UAAMuS,SAAS,GAAGlT,GAAG,CAACiT,MAAD,EAASpP,IAAT,CAArB;AACAqP,IAAAA,SAAS,CAACtJ,MAAV,CAAiB9K,CAAjB,EAAoB,CAApB;AAEAoB,IAAAA,GAAG,CAAC+S,MAAD,EAASpP,IAAT,EAAeqP,SAAf,CAAH;AAEAN,IAAAA,YAAY,CAAC,EACZ,GAAGrS,SADS;AAEZG,MAAAA,KAAK,EAAEyS,WAAW,CAAC5S,SAAS,CAACG,KAAX,EAAkBmD,IAAlB,CAFN;AAGZlD,MAAAA,GAAG,EAAEsS;AAHO,KAAD,CAAZ;AAKA,GAjBD;;AAmBA,QAAM9M,WAAW,GAAIjC,CAAD,IAAO;AAC1B0O,IAAAA,YAAY,CAAC,EACZ,GAAGrS,SADS;AAEZG,MAAAA,KAAK,EAAEyS,WAAW,CAAC5S,SAAS,CAACG,KAAX,EAAkBmD,IAAlB,CAFN;AAGZrE,MAAAA,aAAa,EAAE2T,WAAW,CAAC5S,SAAS,CAACf,aAAX,EAA0B0E,CAAC,CAACuF,MAAF,CAASa,YAAT,CAAsB,kBAAtB,CAA1B;AAHd,KAAD,CAAZ;AAKA,GAND;;AAQA,QAAM+I,iBAAiB,GAAGrV,UAAU,CAACoD,MAAX,CAAmBkS,SAAD,IAAgBA,SAAS,CAAC7V,IAAV,KAAmB,QAArD,CAA1B;AACA,QAAM8V,gBAAgB,GAAGvV,UAAU,CAACoD,MAAX,CAAmBkS,SAAD,IAAgBA,SAAS,CAAC7V,IAAV,KAAmB,QAArD,CAAzB;AACA8V,EAAAA,gBAAgB,CAACtU,IAAjB,CAAsB;AACrB4E,IAAAA,IAAI,EAAE,IADe;AAErBpG,IAAAA,IAAI,EAAE;AAFe,GAAtB;AAIA8V,EAAAA,gBAAgB,CAACtU,IAAjB,CAAsB;AACrB4E,IAAAA,IAAI,EAAE,MADe;AAErBpG,IAAAA,IAAI,EAAE;AAFe,GAAtB;AAIA,QAAM+V,UAAU,GAAGH,iBAAiB,CAACI,IAAlB,CAAwBH,SAAD,IAAgBA,SAAS,CAAC3O,KAAjD,CAAnB;AAEA,sBACCpB;AAAO,IAAA,SAAS,EAAC;AAAjB,KACEiQ,UAAU,iBACVjQ;AAAO,IAAA,SAAS,EAAC;AAAjB,kBACCA,yCACE8P,iBAAiB,CAAChU,GAAlB,CAAuBiU,SAAD,iBACtB/P;AAAI,IAAA,GAAG,EAAE+P,SAAS,CAACzP;AAAnB,KAA0ByP,SAAS,CAAC3O,KAApC,CADA,CADF,eAICpB,wCAJD,CADD,CAFF,eAWCA;AAAO,IAAA,SAAS,EAAC;AAAjB,KACEpE,MAAM,CAACE,GAAP,CAAW,CAACC,KAAD,EAAQR,CAAR,KAAc;AACzB,QAAI4U,WAAW,GAAG,OAAOf,SAAP,KAAqB,SAArB,IAAkCA,SAApD;;AACA,QAAI,OAAOA,SAAP,KAAqB,UAAzB,EAAqC;AACpCe,MAAAA,WAAW,GAAGf,SAAS,CAACrT,KAAD,CAAvB;AACA;;AACD,UAAMqU,MAAM,GAAI,YAAWrU,KAAK,CAAC7B,IAAK,IAAG6B,KAAK,CAAC9B,EAAG,EAAlD;AACA,wBACC+F;AAAI,MAAA,SAAS,EAAC,uBAAd;AAAsC,MAAA,GAAG,EAAEoQ;AAA3C,OACEN,iBAAiB,CAAChU,GAAlB,CAAuBiU,SAAD,IAAe;AACrC,YAAMM,SAAS,GAAGC,eAAe,CAACP,SAAS,CAAC7V,IAAX,EAAiB6V,SAAS,CAAChB,SAA3B,CAAjC;AACA,YAAMwB,QAAQ,GAAI,GAAEH,MAAO,IAAGL,SAAS,CAACzP,IAAK,EAA7C;AACA,YAAMG,QAAQ,GAAGpG,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCwC,SAAS,CAAC0C,MAA/C,EAAuD6Q,QAAvD,CAAjB;AACA,YAAMhJ,SAAS,GAAG,CAAC,0BAAD,CAAlB;;AACA,UAAI9G,QAAJ,EAAc;AACb8G,QAAAA,SAAS,CAAC7L,IAAV,CAAe,0BAAf;AACA;;AACD,0BACCsE;AAAI,QAAA,SAAS,EAAEuH,SAAS,CAAC7K,IAAV,CAAe,GAAf,CAAf;AAAoC,QAAA,GAAG,EAAEqT,SAAS,CAACzP;AAAnD,sBACCN,6BAAC,SAAD,oBACK+P,SADL;AAAA,qBAEcnN,WAFd;AAAA,4BAGoB,GAAEtC,IAAK,IAAGvE,KAAK,CAAC9B,EAAG,IAAG8V,SAAS,CAACzP,IAAK,EAHzD;AAAA,cAIQ,GAAEA,IAAK,IAAG/E,CAAE,IAAGwU,SAAS,CAACzP,IAAK;AAJtC,SADD,EAOEG,QAAQ,iBAAIT;AAAK,QAAA,SAAS,EAAC;AAAf,SAAuChD,SAAS,CAAC0C,MAAV,CAAiB0Q,MAAjB,EAAyB1T,IAAzB,eAA+BsD,wCAA/B,CAAvC,CAPd,CADD;AAWA,KAnBA,CADF,eAqBCA;AAAI,MAAA,SAAS,EAAC;AAAd,OACEgQ,gBAAgB,CAAClU,GAAjB,CAAsBiU,SAAD,IAAe;AACpC,YAAMM,SAAS,GAAGC,eAAe,CAACP,SAAS,CAAC7V,IAAX,EAAiB6V,SAAS,CAAChB,SAA3B,CAAjC;AACA,0BACC/O,6BAAC,SAAD,oBACK+P,SADL;AAAA,aAEMA,SAAS,CAACzP,IAFhB;AAAA,cAGQ,GAAEA,IAAK,IAAG/E,CAAE,IAAGwU,SAAS,CAACzP,IAAK;AAHtC,SADD;AAOA,KATA,CADF,eAWCN;AACC,MAAA,SAAS,EAAG,2EAA0E4L,eAAgB,EAA3F,CAA6FlE,IAA7F,EADZ;AAEC,oBAAYnM,CAFb;AAGC,MAAA,QAAQ,EAAE,CAAC4U,WAHZ;AAIC,MAAA,OAAO,EAAE5C,QAJV;AAKC,MAAA,IAAI,EAAC;AALN,gBAXD,CArBD,CADD;AA6CA,GAnDA,CADF,CAXD,eAiECvN;AAAO,IAAA,SAAS,EAAC;AAAjB,kBACCA;AAAI,IAAA,SAAS,EAAC;AAAd,KACE8P,iBAAiB,CAAChU,GAAlB,CAAuBiU,SAAD,IAAe;AACrC,UAAMM,SAAS,GAAGC,eAAe,CAACP,SAAS,CAAC7V,IAAX,EAAiB6V,SAAS,CAAChB,SAA3B,CAAjC;AACA,wBACC/O;AAAI,MAAA,SAAS,EAAC,0BAAd;AAAyC,MAAA,GAAG,EAAE+P,SAAS,CAACzP;AAAxD,oBACCN,6BAAC,SAAD,oBACK+P,SADL;AAAA,YAEQ,QAAOzP,IAAK,IAAGyP,SAAS,CAACzP,IAAK,EAFtC;AAAA,iBAGYkG;AAHZ,OADD,CADD;AASA,GAXA,CADF,eAaCxG;AAAI,IAAA,SAAS,EAAC;AAAd,KACEgQ,gBAAgB,CAAClU,GAAjB,CAAsBiU,SAAD,IAAe;AACpC,UAAMM,SAAS,GAAGC,eAAe,CAACP,SAAS,CAAC7V,IAAX,EAAiB6V,SAAS,CAAChB,SAA3B,CAAjC;AACA,wBACC/O,6BAAC,SAAD,oBACK+P,SADL;AAAA,WAEMA,SAAS,CAACzP,IAFhB;AAAA,YAGQ,QAAOA,IAAK,IAAGyP,SAAS,CAACzP,IAAK,EAHtC;AAAA,iBAIYkG;AAJZ,OADD;AAQA,GAVA,CADF,eAYCxG;AACC,IAAA,SAAS,EAAG,wEAAuE4L,eAAgB,EAAxF,CAA0FlE,IAA1F,EADZ;AAEC,IAAA,OAAO,EAAE8H,KAFV;AAGC,IAAA,IAAI,EAAC;AAHN,WAZD,CAbD,CADD,CAjED,CADD;AAwGA;AAEDN,OAAO,CAACtO,SAAR,GAAoB;AACnBnG,EAAAA,UAAU,EAAEoG,SAAS,CAACwH,KADH;AAEnBuD,EAAAA,eAAe,EAAE/K,SAAS,CAACC,MAFR;AAGnBR,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAHG;AAInBqO,EAAAA,UAAU,EAAEtO,SAAS,CAACC,MAAV,CAAiBmN,UAJV;AAKnBmB,EAAAA,SAAS,EAAEvO,SAAS,CAACuH,SAAV,CAAoB,CAC9BvH,SAAS,CAACoH,IADoB,EAE9BpH,SAAS,CAACmH,IAFoB,CAApB;AALQ,CAApB;AAWAkH,OAAO,CAACnO,YAAR,GAAuB;AACtBtG,EAAAA,UAAU,EAAE,EADU;AAEtBmR,EAAAA,eAAe,EAAE,EAFK;AAGtBtL,EAAAA,IAAI,EAAE,EAHgB;AAItB8O,EAAAA,SAAS,EAAE;AAJW,CAAvB;;ACrNe,SAASoB,KAAT,CAAe;AAC7BjJ,EAAAA,SAD6B;AAE7BkJ,EAAAA,OAF6B;AAG7BrP,EAAAA,KAH6B;AAI7BsP,EAAAA,IAJ6B;AAK7BjE,EAAAA,QAL6B;AAM7BvS,EAAAA,IAN6B;AAO7B,KAAGuK;AAP0B,CAAf,EAQZ;AACF,MAAIuE,cAAc,GAAG,eAArB;;AACA,MAAIyD,QAAJ,EAAc;AACbzD,IAAAA,cAAc,IAAI,0BAAlB;AACA;;AAED,MAAIxE,gBAAgB,GAAG,uBAAvB;;AACA,MAAItK,IAAI,KAAK,UAAb,EAAyB;AACxBsK,IAAAA,gBAAgB,IAAI,kCAApB;AACA;;AAED,QAAM9D,KAAK,GAAG,EAAd;;AACA,MAAI+P,OAAO,IAAIvW,IAAI,KAAK,UAAxB,EAAoC;AACnCwG,IAAAA,KAAK,CAAC+P,OAAN,GAAgBA,OAAhB;AACA;;AAED,sBACCzQ;AAAK,IAAA,SAAS,EAAEwE;AAAhB,kBACCxE;AAAA,eAAmB,GAAEgJ,cAAe,IAAGzB,SAAU,EAA/B,CAAiCG,IAAjC;AAAlB,KAA+DhH,KAA/D,EAA0E+D,UAA1E,GAAuFrD,KAAvF,CADD,EAEEsP,IAAI,iBAAI1Q;AAAM,IAAA,SAAS,EAAC;AAAhB,KAAuC0Q,IAAvC,CAFV,CADD;AAMA;AAEDF,KAAK,CAAC5P,SAAN,GAAkB;AACjB2G,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MADJ;AAEjB2P,EAAAA,OAAO,EAAE5P,SAAS,CAACC,MAFF;AAGjBM,EAAAA,KAAK,EAAEP,SAAS,CAACC,MAHA;AAIjB4P,EAAAA,IAAI,EAAE7P,SAAS,CAACC,MAJC;AAKjB2L,EAAAA,QAAQ,EAAE5L,SAAS,CAACoH,IALH;AAMjB/N,EAAAA,IAAI,EAAE2G,SAAS,CAACC;AANC,CAAlB;AASA0P,KAAK,CAACzP,YAAN,GAAqB;AACpBwG,EAAAA,SAAS,EAAE,EADS;AAEpBkJ,EAAAA,OAAO,EAAE,EAFW;AAGpBrP,EAAAA,KAAK,EAAE,EAHa;AAIpBsP,EAAAA,IAAI,EAAE,EAJc;AAKpBjE,EAAAA,QAAQ,EAAE,KALU;AAMpBvS,EAAAA,IAAI,EAAE;AANc,CAArB;;ACpCe,SAASyW,KAAT,CAAe;AAC7B5B,EAAAA,SAD6B;AAE7B3L,EAAAA,QAF6B;AAG7BnJ,EAAAA,EAH6B;AAI7BkS,EAAAA,sBAJ6B;AAK7BC,EAAAA,qBAL6B;AAM7BhL,EAAAA,KAN6B;AAO7B2H,EAAAA,eAP6B;AAQ7BC,EAAAA,cAR6B;AAS7B4H,EAAAA,SAT6B;AAU7BC,EAAAA,aAV6B;AAW7BvQ,EAAAA,IAX6B;AAY7BoQ,EAAAA,IAZ6B;AAa7BI,EAAAA,MAb6B;AAc7BC,EAAAA,OAd6B;AAe7BhN,EAAAA,QAf6B;AAgB7B0I,EAAAA,QAhB6B;AAiB7B2B,EAAAA,MAjB6B;AAkB7BlU,EAAAA,IAlB6B;AAmB7BqK,EAAAA,iBAnB6B;AAoB7BC,EAAAA,gBApB6B;AAqB7B,KAAGC;AArB0B,CAAf,EAsBZ;AACF,QAAM;AAAEzH,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AAEA,QAAMwQ,UAAU,GAAG,EAAE,GAAGvM;AAAL,GAAnB;;AACA,MAAIxK,EAAJ,EAAQ;AACP+W,IAAAA,UAAU,CAAC/W,EAAX,GAAgBA,EAAhB;AACA;;AACD,MAAIqG,IAAJ,EAAU;AACT0Q,IAAAA,UAAU,CAAC1Q,IAAX,GAAkBA,IAAlB;AACA;;AACD,MAAI8C,QAAJ,EAAc;AACb4N,IAAAA,UAAU,CAAC5N,QAAX,GAAsBA,QAAtB;AACA;;AACD,MAAIW,QAAJ,EAAc;AACbiN,IAAAA,UAAU,CAACjN,QAAX,GAAsBA,QAAtB;AACA;;AACD,MAAI0I,QAAJ,EAAc;AACbuE,IAAAA,UAAU,CAACvE,QAAX,GAAsBA,QAAtB;AACA;;AACD,MAAI2B,MAAJ,EAAY;AACX4C,IAAAA,UAAU,CAAC5C,MAAX,GAAoBA,MAApB;AACA;;AACD,MAAIlU,IAAJ,EAAU;AACT8W,IAAAA,UAAU,CAAC9W,IAAX,GAAkBA,IAAlB;;AACA,QAAI6J,QAAQ,IAAI7J,IAAI,KAAK,QAAzB,EAAmC;AAClC8W,MAAAA,UAAU,CAAC9W,IAAX,GAAkB,MAAlB;AACA;AACD;;AAED,MAAI+W,cAAc,GAAGX,eAAe,CAACpW,IAAD,EAAO6U,SAAP,CAApC;;AACA,MAAI7U,IAAI,KAAK,UAAb,EAAyB;AAExB+W,IAAAA,cAAc,GAAG/B,OAAjB;AACA;;AAED,QAAMgC,KAAK,gBACVlR,6BAAC,cAAD,EAAoBgR,UAApB,CADD;;AAIA,MAAI9W,IAAI,KAAK,QAAb,EAAuB;AACtB,WAAOgX,KAAP;AACA;;AAED,QAAMT,OAAO,GAAGxW,EAAE,IAAIqG,IAAtB;AAEA,QAAM6Q,cAAc,gBACnBnR,6BAAC,KAAD;AAAA,eACYgJ,cADZ;AAAA,aAEU9O,IAAI,KAAK,UAAT,GAAuB,GAAEuW,OAAQ,QAAjC,GAA2CA,OAFrD;AAAA,WAGQrP,KAHR;AAAA,UAIOwP,SAJP;AAAA,cAKWnE,QALX;AAAA,UAMOvS;AANP,KAOK6O,eAPL,EADD;AAYA,QAAMtI,QAAQ,GAAGzD,SAAS,IAAI3C,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCwC,SAAS,CAAC0C,MAA/C,EAAuDY,IAAvD,CAA9B;AAEA,QAAM8Q,SAAS,GAAGX,OAAO,CAACjT,OAAR,CAAgB,eAAhB,EAAiC,EAAjC,CAAlB;AACA,QAAM6T,oBAAoB,GAAG,CAAC,eAAD,CAA7B;;AACA,MAAID,SAAJ,EAAe;AACdC,IAAAA,oBAAoB,CAAC3V,IAArB,CAA2B,kBAAiB0V,SAAU,EAAtD;AACA;;AACD,MAAI5M,gBAAJ,EAAsB;AACrB6M,IAAAA,oBAAoB,CAAC3V,IAArB,CAA0B8I,gBAA1B;AACA;;AACD,MAAI/D,QAAJ,EAAc;AACb4Q,IAAAA,oBAAoB,CAAC3V,IAArB,CAA0B,0BAA1B;AACA;;AACD,MAAI0H,QAAJ,EAAc;AACbiO,IAAAA,oBAAoB,CAAC3V,IAArB,CAA0B,yBAA1B;AACA;;AACD,MAAIqI,QAAJ,EAAc;AACbsN,IAAAA,oBAAoB,CAAC3V,IAArB,CAA0B,0BAA1B;AACA;;AACD,MAAIoV,MAAJ,EAAY;AACXO,IAAAA,oBAAoB,CAAC3V,IAArB,CAA0B,2BAA1B;AACA;;AACD,MAAIqV,OAAJ,EAAa;AACZM,IAAAA,oBAAoB,CAAC3V,IAArB,CAA0B,4BAA1B;AACA;;AACD,MAAImV,aAAa,KAAK,OAAtB,EAA+B;AAC9BQ,IAAAA,oBAAoB,CAAC3V,IAArB,CAA0B,4BAA1B;AACA;;AAED,QAAM4V,yBAAyB,GAAG,CAAC,uBAAD,EAA2B,0BAAyBpX,IAAK,EAAzD,CAAlC;;AACA,MAAIkS,qBAAJ,EAA2B;AAC1BkF,IAAAA,yBAAyB,CAAC5V,IAA1B,CAA+B0Q,qBAA/B;AACA;;AACD,MAAIgC,MAAJ,EAAY;AACXkD,IAAAA,yBAAyB,CAAC5V,IAA1B,CAA+B,2BAA/B;AACA;;AAED,sBACCsE;AAAA,eAAgBqR,oBAAoB,CAAC3U,IAArB,CAA0B,GAA1B;AAAhB,KAAoD6H,iBAApD,GACEnD,KAAK,IAAIyP,aAAa,KAAK,QAA3B,IAAuCM,cADzC,EAEE/P,KAAK,IAAIyP,aAAa,KAAK,OAA3B,iBAAsC7Q;AAAK,IAAA,SAAS,EAAC;AAAf,IAFxC,eAGCA;AAAA,eAAgBsR,yBAAyB,CAAC5U,IAA1B,CAA+B,GAA/B;AAAhB,KAAyDyP,sBAAzD,GACE2E,MADF,EAEEI,KAFF,EAGE9P,KAAK,IAAIyP,aAAa,KAAK,OAA3B,IAAsCM,cAHxC,EAIET,IAAI,iBACJ1Q;AAAK,IAAA,SAAS,EAAC;AAAf,KAAsC0Q,IAAtC,CALF,EAOEK,OAPF,eAQC/Q,6BAACK,OAAD;AAAO,IAAA,EAAE,EAAEpG,EAAX;AAAe,IAAA,IAAI,EAAEqG;AAArB,IARD,CAHD,CADD;AAgBA;AAEDqQ,KAAK,CAAC/P,SAAN,GAAkB;AACjBmO,EAAAA,SAAS,EAAElO,SAAS,CAACmH,IADJ;AAEjB5E,EAAAA,QAAQ,EAAEvC,SAAS,CAACoH,IAFH;AAGjBhO,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MAHG;AAIjBqL,EAAAA,sBAAsB,EAAEtL,SAAS,CAACqH,MAJjB;AAKjBkE,EAAAA,qBAAqB,EAAEvL,SAAS,CAACC,MALhB;AAMjBM,EAAAA,KAAK,EAAEP,SAAS,CAACC,MANA;AAOjBiI,EAAAA,eAAe,EAAElI,SAAS,CAACqH,MAPV;AAQjBc,EAAAA,cAAc,EAAEnI,SAAS,CAACC,MART;AASjB8P,EAAAA,SAAS,EAAE/P,SAAS,CAACC,MATJ;AAUjB+P,EAAAA,aAAa,EAAEhQ,SAAS,CAACC,MAVR;AAWjBR,EAAAA,IAAI,EAAEO,SAAS,CAACC,MAXC;AAYjB4P,EAAAA,IAAI,EAAE7P,SAAS,CAACuH,SAAV,CAAoB,CACzBvH,SAAS,CAACmH,IADe,EAEzBnH,SAAS,CAACqH,MAFe,EAGzBrH,SAAS,CAACC,MAHe,CAApB,CAZW;AAiBjBgQ,EAAAA,MAAM,EAAEjQ,SAAS,CAACmN,IAjBD;AAkBjB+C,EAAAA,OAAO,EAAElQ,SAAS,CAACmN,IAlBF;AAmBjBjK,EAAAA,QAAQ,EAAElD,SAAS,CAACoH,IAnBH;AAoBjBwE,EAAAA,QAAQ,EAAE5L,SAAS,CAACoH,IApBH;AAqBjBmG,EAAAA,MAAM,EAAEvN,SAAS,CAACC,MArBD;AAsBjB5G,EAAAA,IAAI,EAAE2G,SAAS,CAACC,MAtBC;AAuBjByD,EAAAA,iBAAiB,EAAE1D,SAAS,CAACqH,MAvBZ;AAwBjB1D,EAAAA,gBAAgB,EAAE3D,SAAS,CAACC;AAxBX,CAAlB;AA2BA6P,KAAK,CAAC5P,YAAN,GAAqB;AACpBgO,EAAAA,SAAS,EAAE,IADS;AAEpB3L,EAAAA,QAAQ,EAAE,KAFU;AAGpBnJ,EAAAA,EAAE,EAAE,IAHgB;AAIpBkS,EAAAA,sBAAsB,EAAE,EAJJ;AAKpBC,EAAAA,qBAAqB,EAAE,EALH;AAMpBhL,EAAAA,KAAK,EAAE,EANa;AAOpB2H,EAAAA,eAAe,EAAE,EAPG;AAQpBC,EAAAA,cAAc,EAAE,EARI;AASpB4H,EAAAA,SAAS,EAAE,EATS;AAUpBC,EAAAA,aAAa,EAAE,QAVK;AAWpBvQ,EAAAA,IAAI,EAAE,EAXc;AAYpBoQ,EAAAA,IAAI,EAAE,EAZc;AAapBI,EAAAA,MAAM,EAAE,IAbY;AAcpBC,EAAAA,OAAO,EAAE,IAdW;AAepBhN,EAAAA,QAAQ,EAAE,KAfU;AAgBpB0I,EAAAA,QAAQ,EAAE,KAhBU;AAiBpB2B,EAAAA,MAAM,EAAE,EAjBY;AAkBpBlU,EAAAA,IAAI,EAAE,MAlBc;AAmBpBqK,EAAAA,iBAAiB,EAAE,EAnBC;AAoBpBC,EAAAA,gBAAgB,EAAE;AApBE,CAArB;;ACvKA,kCAAexE,cAAK,CAACC,aAAN,CACd;AACCsR,EAAAA,QAAQ,EAAE,IADX;AAECC,EAAAA,WAAW,EAAE,IAFd;AAGCC,EAAAA,MAAM,EAAE;AAHT,CADc,CAAf;;ACCe,SAASC,OAAT,GAAmB;AACjC,QAAM;AAAE1U,IAAAA;AAAF,MAAgBuD,UAAU,CAACC,WAAD,CAAhC;AACA,QAAMmR,SAAS,GAAGtX,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCwC,SAAS,CAAC0C,MAA/C,EAAuD,EAAvD,CAAlB;AAEA,sBACCM,4DACE2R,SAAS,iBAAK3R;AAAG,IAAA,SAAS,EAAC;AAAb,KAAuDhD,SAAS,CAAC0C,MAAV,CAAiB,EAAjB,EAAqBhD,IAArB,CAA0B,GAA1B,CAAvD,CADhB,EAEEM,SAAS,CAACkD,OAAV,iBAAsBF;AAAG,IAAA,SAAS,EAAC;AAAb,KAAyDhD,SAAS,CAACkD,OAAnE,CAFxB,CADD;AAMA;;ACLc,SAAS0R,SAAT,CAAmB;AACjCC,EAAAA,aADiC;AAEjCC,EAAAA,WAFiC;AAGjCC,EAAAA,YAHiC;AAIjCjE,EAAAA,QAJiC;AAKjCkE,EAAAA,aALiC;AAMjCC,EAAAA,UANiC;AAOjChV,EAAAA,UAPiC;AAQjCC,EAAAA,YARiC;AASjCgV,EAAAA,MATiC;AAUjCjY,EAAAA,EAViC;AAWjC8C,EAAAA,MAXiC;AAYjCoV,EAAAA,MAZiC;AAajCC,EAAAA,IAbiC;AAcjCC,EAAAA,mBAdiC;AAejCnW,EAAAA,iBAfiC;AAgBjCoW,EAAAA,WAhBiC;AAiBjCC,EAAAA,kBAjBiC;AAkBjCC,EAAAA,gBAlBiC;AAmBjC,KAAG/N;AAnB8B,CAAnB,EAoBZ;AACF,QAAM;AAAEzH,IAAAA,SAAF;AAAaqS,IAAAA;AAAb,MAA8B9O,UAAU,CAACC,WAAD,CAA9C;AACA,QAAM;AAAEiS,IAAAA;AAAF,MAAmBlS,UAAU,CAACmS,cAAD,CAAnC;;AAEA,QAAMC,gBAAgB,GAAIhS,CAAD,IAAO;AAC/BA,IAAAA,CAAC,CAACgG,cAAF;;AAEA,QAAI0L,mBAAmB,IAAIrV,SAAS,CAACG,KAAV,CAAgBP,MAAhB,IAA0B,CAArD,EAAwD;AACvD6V,MAAAA,YAAY,CAAClB,QAAb,CAAsB,qBAAtB;;AACA,UAAIM,aAAJ,EAAmB;AAClBA,QAAAA,aAAa;AACb;;AACD;AACA;;AAED,QAAIE,YAAY,IAAI,CAACA,YAAY,CAACpR,CAAD,CAAjC,EAAsC;AACrC;AACA;;AAED,QAAIvC,GAAG,GAAGgU,IAAV;;AACA,QAAInY,EAAJ,EAAQ;AACPmE,MAAAA,GAAG,GAAI,GAAEgU,IAAK,IAAGnY,EAAG,EAApB;AACA;;AACD,QAAIkY,MAAJ,EAAY;AACX/T,MAAAA,GAAG,IAAK,IAAG+T,MAAO,EAAlB;AACA;;AAED,UAAM1W,IAAI,GAAGqB,OAAO,CACnBC,MADmB,EAEnBqV,IAFmB,EAGnBnY,EAHmB,EAInB+C,SAJmB,EAKnBd,iBALmB,EAMnBe,UANmB,EAOnBC,YAPmB,CAApB;AAUAmS,IAAAA,YAAY,CAAC,EACZ,GAAGrS,SADS;AAEZ0C,MAAAA,MAAM,EAAE,EAFI;AAGZQ,MAAAA,OAAO,EAAE;AAHG,KAAD,CAAZ;AAMA/B,IAAAA,GAAG,CAACE,OAAJ,CAAYtB,MAAZ,EAAoBqB,GAApB,EAAyB3C,IAAzB,EACEyD,IADF,CACQC,QAAD,IAAc;AACnB,UAAI,CAACA,QAAL,EAAe;AACd;AACA;;AAED,YAAMyT,QAAQ,GAAG,EAChB,GAAG5V,SADa;AAEhBG,QAAAA,KAAK,EAAE,EAFS;AAGhBlB,QAAAA,aAAa,EAAE,EAHC;AAIhByD,QAAAA,MAAM,EAAE,EAJQ;AAKhBQ,QAAAA,OAAO,EAAEqS;AALO,OAAjB;;AAOA,UAAIP,aAAJ,EAAmB;AAClBY,QAAAA,QAAQ,CAACxV,GAAT,GAAe6U,UAAf;AACA;;AACD5C,MAAAA,YAAY,CAACuD,QAAD,CAAZ;;AAEA,UAAIJ,gBAAJ,EAAsB;AACrBC,QAAAA,YAAY,CAAClB,QAAb,CAAsBiB,gBAAtB,EAAwC,SAAxC;AACA;;AACD,UAAIV,WAAJ,EAAiB;AAChBA,QAAAA,WAAW,CAAC3S,QAAD,CAAX;AACA;AACD,KAxBF,EAyBEI,KAzBF,CAyBSJ,QAAD,IAAc;AACpB,UAAI9E,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC2E,QAArC,EAA+C,QAA/C,CAAJ,EAA8D;AAC7DsT,QAAAA,YAAY,CAAClB,QAAb,CAAsB,QAAtB,EAAgC,OAAhC;AACA,OAFD,MAEO,IAAIlX,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC2E,QAArC,EAA+C,SAA/C,CAAJ,EAA+D;AACrEsT,QAAAA,YAAY,CAAClB,QAAb,CAAsBpS,QAAQ,CAACe,OAA/B,EAAwC,OAAxC,EAAiD,KAAjD;AACA;AACA,OAHM,MAGA;AACNuS,QAAAA,YAAY,CAAClB,QAAb,CAAsB,eAAtB,EAAuC,OAAvC;AACA,cAAMpS,QAAN;AACA;;AAED,YAAMO,MAAM,GAAG,EAAf;AACA,UAAItD,GAAJ;AACA+C,MAAAA,QAAQ,CAACO,MAAT,CAAgBxE,OAAhB,CAAyBsE,KAAD,IAAW;AAClC,YAAInF,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCgF,KAArC,EAA4C,QAA5C,CAAJ,EAA2D;AAC1DpD,UAAAA,GAAG,GAAGoD,KAAK,CAACqT,MAAN,CAAaC,OAAb,CAAqBtV,OAArB,CAA6B,mBAA7B,EAAkD,EAAlD,CAAN;AACApB,UAAAA,GAAG,GAAGA,GAAG,CAACoB,OAAJ,CAAY,aAAZ,EAA2B,OAA3B,CAAN;;AACA,cAAIpB,GAAG,CAACC,UAAJ,CAAe,YAAf,CAAJ,EAAkC;AACjC,kBAAMd,CAAC,GAAGa,GAAG,CAACoB,OAAJ,CAAY,0BAAZ,EAAwC,IAAxC,CAAV;AACA,kBAAMzC,cAAc,GAAGU,IAAI,CAACzB,QAAL,CAAckQ,QAAQ,CAAC3O,CAAD,EAAI,EAAJ,CAAtB,CAAvB;AACAa,YAAAA,GAAG,GAAGA,GAAG,CAACoB,OAAJ,CAAY,uBAAZ,EAAsC,YAAWzC,cAAc,CAACb,IAAK,IAAGa,cAAc,CAACd,EAAG,GAA1F,CAAN;AACAmC,YAAAA,GAAG,GAAGA,GAAG,CAACoB,OAAJ,CAAY,KAAZ,EAAmB,GAAnB,CAAN;AACA;;AACD,cAAI,CAAC8N,QAAQ,CAACf,aAAT,CAAwB,eAAcnO,GAAI,yBAA1C,CAAL,EAA0E;AACzEA,YAAAA,GAAG,GAAG,EAAN;AACA;AACD,SAZD,MAYO;AACNA,UAAAA,GAAG,GAAG,EAAN;AACA;;AACD,YAAI,CAAC/B,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCkF,MAArC,EAA6CtD,GAA7C,CAAL,EAAwD;AACvDsD,UAAAA,MAAM,CAACtD,GAAD,CAAN,GAAc,EAAd;AACA;;AACDsD,QAAAA,MAAM,CAACtD,GAAD,CAAN,CAAYV,IAAZ,CAAiB8D,KAAK,CAACG,KAAvB;AACA,OApBD;AAqBA0P,MAAAA,YAAY,CAAC,EACZ,GAAGrS,SADS;AAEZ0C,QAAAA,MAFY;AAGZQ,QAAAA,OAAO,EAAE;AAHG,OAAD,CAAZ;AAKA,KAhEF;AAiEA,GAxGD;;AAyGA,MAAInD,MAAM,IAAIqV,IAAV,IAAkB,CAAC/X,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCiK,UAArC,EAAiD,UAAjD,CAAvB,EAAqF;AACpFA,IAAAA,UAAU,CAACsO,QAAX,GAAsBJ,gBAAtB;AACA;;AACD,MAAIT,MAAJ,EAAY;AACXzN,IAAAA,UAAU,CAACxK,EAAX,GAAgBiY,MAAhB;AACA;;AAED,sBACClS,qCAAUyE,UAAV,EACE6N,WAAW,iBAAItS,6BAAC,OAAD,OADjB,EAEE8N,QAFF,CADD;AAMA;AAED8D,SAAS,CAAChR,SAAV,GAAsB;AACrBiR,EAAAA,aAAa,EAAEhR,SAAS,CAACmH,IADJ;AAErB8J,EAAAA,WAAW,EAAEjR,SAAS,CAACmH,IAFF;AAGrB+J,EAAAA,YAAY,EAAElR,SAAS,CAACmH,IAHH;AAIrB8F,EAAAA,QAAQ,EAAEjN,SAAS,CAACmN,IAJC;AAKrBgE,EAAAA,aAAa,EAAEnR,SAAS,CAACoH,IALJ;AAMrBgK,EAAAA,UAAU,EAAEpR,SAAS,CAACqH,MAND;AAOrBjL,EAAAA,UAAU,EAAE4D,SAAS,CAACmH,IAPD;AAQrB9K,EAAAA,YAAY,EAAE2D,SAAS,CAACmH,IARH;AASrBkK,EAAAA,MAAM,EAAErR,SAAS,CAACC,MATG;AAUrB7G,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MAVO;AAWrB/D,EAAAA,MAAM,EAAE8D,SAAS,CAACC,MAXG;AAYrBqR,EAAAA,MAAM,EAAEtR,SAAS,CAACC,MAZG;AAarBsR,EAAAA,IAAI,EAAEvR,SAAS,CAACC,MAbK;AAcrBuR,EAAAA,mBAAmB,EAAExR,SAAS,CAACoH,IAdV;AAerB/L,EAAAA,iBAAiB,EAAE2E,SAAS,CAACwH,KAfR;AAgBrBiK,EAAAA,WAAW,EAAEzR,SAAS,CAACoH,IAhBF;AAiBrBsK,EAAAA,kBAAkB,EAAE1R,SAAS,CAACC,MAjBT;AAkBrB0R,EAAAA,gBAAgB,EAAE3R,SAAS,CAACC;AAlBP,CAAtB;AAqBA8Q,SAAS,CAAC7Q,YAAV,GAAyB;AACxB8Q,EAAAA,aAAa,EAAE,IADS;AAExBC,EAAAA,WAAW,EAAE,IAFW;AAGxBC,EAAAA,YAAY,EAAE,IAHU;AAIxBjE,EAAAA,QAAQ,EAAE,IAJc;AAKxBkE,EAAAA,aAAa,EAAE,KALS;AAMxBC,EAAAA,UAAU,EAAE,EANY;AAOxBhV,EAAAA,UAAU,EAAE,IAPY;AAQxBC,EAAAA,YAAY,EAAE,IARU;AASxBgV,EAAAA,MAAM,EAAE,EATgB;AAUxBjY,EAAAA,EAAE,EAAE,EAVoB;AAWxB8C,EAAAA,MAAM,EAAE,IAXgB;AAYxBoV,EAAAA,MAAM,EAAE,EAZgB;AAaxBC,EAAAA,IAAI,EAAE,IAbkB;AAcxBC,EAAAA,mBAAmB,EAAE,KAdG;AAexBnW,EAAAA,iBAAiB,EAAE,EAfK;AAgBxBoW,EAAAA,WAAW,EAAE,IAhBW;AAiBxBC,EAAAA,kBAAkB,EAAE,EAjBI;AAkBxBC,EAAAA,gBAAgB,EAAE;AAlBM,CAAzB;;ACtKe,SAASQ,IAAT,CAAc;AAC5BlF,EAAAA,QAD4B;AAE5B1Q,EAAAA,GAF4B;AAG5B+C,EAAAA,MAH4B;AAI5B,KAAGsE;AAJyB,CAAd,EAKZ;AACF,QAAM,CAACzH,SAAD,EAAYqS,YAAZ,IAA4BtK,QAAQ,CAAC;AAC1C5H,IAAAA,KAAK,EAAE,EADmC;AAE1ClB,IAAAA,aAAa,EAAE,EAF2B;AAG1CyD,IAAAA,MAAM,EAAE,EAHkC;AAI1CpC,IAAAA,KAAK,EAAE,EAJmC;AAK1C4C,IAAAA,OAAO,EAAE,EALiC;AAM1C9C,IAAAA,GAN0C;AAO1C+C,IAAAA,MAP0C;AAQ1CC,IAAAA,SAAS,EAAE,CAAC6S,EAAD,EAAKtS,CAAL,EAAQL,IAAR,EAAcvE,KAAd,EAAqB6G,WAAW,GAAG,IAAnC,EAAyCtF,KAAK,GAAG,IAAjD,KAA0D;AACpE,UAAI2R,QAAQ,GAAGW,WAAW,CAACqD,EAAE,CAAC9V,KAAJ,EAAWmD,IAAX,CAA1B;AACA,YAAMoP,MAAM,GAAG,EAAE,GAAGuD,EAAE,CAAC7V;AAAR,OAAf;AACAT,MAAAA,GAAG,CAAC+S,MAAD,EAASpP,IAAT,EAAevE,KAAf,CAAH;;AAEA,UAAI6G,WAAJ,EAAiB;AAChB,cAAMsQ,iBAAiB,GAAGtQ,WAAW,CAACjC,CAAD,EAAI+O,MAAJ,EAAY3T,KAAZ,CAArC;AACA1B,QAAAA,MAAM,CAACW,IAAP,CAAYkY,iBAAZ,EAA+BhY,OAA/B,CAAwCkB,GAAD,IAAS;AAC/CO,UAAAA,GAAG,CAAC+S,MAAD,EAAStT,GAAT,EAAc8W,iBAAiB,CAAC9W,GAAD,CAA/B,CAAH;AACA6S,UAAAA,QAAQ,GAAGW,WAAW,CAACX,QAAD,EAAW7S,GAAX,CAAtB;AACA,SAHD;AAIA;;AAED,YAAM+W,YAAY,GAAG,EACpB,GAAGF,EADiB;AAEpB9V,QAAAA,KAAK,EAAE8R,QAFa;AAGpB7R,QAAAA,GAAG,EAAEsS;AAHe,OAArB;;AAKA,UAAIpS,KAAK,KAAK,IAAd,EAAoB;AACnBX,QAAAA,GAAG,CAACwW,YAAD,EAAgB,SAAQ7S,IAAK,EAA7B,EAAgChD,KAAhC,CAAH;AACA;;AAED+R,MAAAA,YAAY,CAAC8D,YAAD,CAAZ;;AACA,UAAIF,EAAE,CAAC9S,MAAP,EAAe;AACd8S,QAAAA,EAAE,CAAC9S,MAAH,CAAUuP,MAAV;AACA;AACD;AAlCyC,GAAD,CAA1C;AAqCApK,EAAAA,SAAS,CAAC,MAAM;AACf+J,IAAAA,YAAY,CAAC,EACZ,GAAGrS,SADS;AAEZI,MAAAA;AAFY,KAAD,CAAZ;AAIA,GALQ,EAKN,CAACA,GAAD,CALM,CAAT;AAOA,sBACC4C,6BAACQ,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAE;AAAExD,MAAAA,SAAF;AAAaqS,MAAAA;AAAb;AAA7B,kBACCrP,6BAAC,SAAD,EAAeyE,UAAf,EACEqJ,QADF,CADD,CADD;AAOA;AAEDkF,IAAI,CAACpS,SAAL,GAAiB;AAChBkN,EAAAA,QAAQ,EAAEjN,SAAS,CAACmN,IADJ;AAEhB5Q,EAAAA,GAAG,EAAEyD,SAAS,CAACqH,MAFC;AAGhB/H,EAAAA,MAAM,EAAEU,SAAS,CAACmH;AAHF,CAAjB;AAMAgL,IAAI,CAACjS,YAAL,GAAoB;AACnB+M,EAAAA,QAAQ,EAAE,IADS;AAEnB1Q,EAAAA,GAAG,EAAE,EAFc;AAGnB+C,EAAAA,MAAM,EAAE;AAHW,CAApB;;ACrEA,MAAMiT,OAAO,GAAG,MAAM;AACrB,QAAM;AAAEC,IAAAA;AAAF,MAAwBC,iBAAiB,EAA/C;;AACA,MAAI,CAACD,iBAAL,EAAwB;AACvB,WAAO,IAAP;AACA;;AACD,sBACCrT;AAAK,IAAA,SAAS,EAAC;AAAf,IADD;AAGA,CARD;;ACEe,SAASuT,KAAT,CAAe;AAC7BhM,EAAAA,SAD6B;AAE7BtN,EAAAA,EAF6B;AAG7BuZ,EAAAA,YAH6B;AAI7BC,EAAAA;AAJ6B,CAAf,EAKZ;AACF,QAAM;AAAEhB,IAAAA,YAAF;AAAgBiB,IAAAA;AAAhB,MAAoCnT,UAAU,CAACmS,cAAD,CAApD;;AACA,QAAMlB,WAAW,GAAG,MAAM;AACzB,UAAMC,MAAM,GAAG,EAAE,GAAGgB,YAAY,CAAChB;AAAlB,KAAf;AACA,WAAOA,MAAM,CAACxX,EAAD,CAAb;AACAyZ,IAAAA,eAAe,CAAC,EAAE,GAAGjB,YAAL;AAAmBhB,MAAAA;AAAnB,KAAD,CAAf;AACA,GAJD;;AAKA,sBACCzR;AAAK,IAAA,SAAS,EAAG,iBAAgBuH,SAAU,EAA3B,CAA6BG,IAA7B,EAAhB;AAAqD,IAAA,KAAK,EAAE;AAAEiM,MAAAA,iBAAiB,EAAG,GAAEH,YAAa;AAArC;AAA5D,kBACCxT;AAAK,IAAA,SAAS,EAAC;AAAf,KAAsCyT,IAAtC,CADD,eAECzT;AAAQ,IAAA,SAAS,EAAC,sBAAlB;AAAyC,IAAA,OAAO,EAAEwR,WAAlD;AAA+D,IAAA,IAAI,EAAC;AAApE,kBACCxR,6BAAC8H,IAAD;AAAW,IAAA,SAAS,EAAC,2BAArB;AAAiD,IAAA,MAAM,EAAE,EAAzD;AAA6D,IAAA,KAAK,EAAE;AAApE,IADD,UAFD,CADD;AASA;AAEDyL,KAAK,CAAC3S,SAAN,GAAkB;AACjB2G,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MADJ;AAEjB7G,EAAAA,EAAE,EAAE4G,SAAS,CAACC,MAAV,CAAiBmN,UAFJ;AAGjBuF,EAAAA,YAAY,EAAE3S,SAAS,CAACsH,MAAV,CAAiB8F,UAHd;AAIjBwF,EAAAA,IAAI,EAAE5S,SAAS,CAACC,MAAV,CAAiBmN;AAJN,CAAlB;AAOAsF,KAAK,CAACxS,YAAN,GAAqB;AACpBwG,EAAAA,SAAS,EAAE;AADS,CAArB;;AC/Be,SAASqM,cAAT,GAA0B;AACxC,QAAM;AAAEnB,IAAAA;AAAF,MAAmBlS,UAAU,CAACmS,cAAD,CAAnC;AACA,sBACC1S;AAAK,IAAA,SAAS,EAAC;AAAf,KACE3F,MAAM,CAACW,IAAP,CAAYyX,YAAY,CAAChB,MAAzB,EAAiC3V,GAAjC,CAAsC7B,EAAD,iBACrC+F,6BAAC,KAAD;AACC,IAAA,SAAS,EAAEyS,YAAY,CAAChB,MAAb,CAAoBxX,EAApB,EAAwBsN,SADpC;AAEC,IAAA,GAAG,EAAEtN,EAFN;AAGC,IAAA,EAAE,EAAEA,EAHL;AAIC,IAAA,YAAY,EAAEwY,YAAY,CAAChB,MAAb,CAAoBxX,EAApB,EAAwBuZ,YAJvC;AAKC,IAAA,IAAI,EAAEf,YAAY,CAAChB,MAAb,CAAoBxX,EAApB,EAAwBwZ;AAL/B,IADA,CADF,CADD;AAaA;;ACbc,SAASI,aAAT,CAAuB;AAAE/F,EAAAA;AAAF,CAAvB,EAAqC;AACnD,QAAM,CAAC2E,YAAD,EAAeiB,eAAf,IAAkC3O,QAAQ,CAAC;AAChDwM,IAAAA,QAAQ,EAAE,IADsC;AAEhDC,IAAAA,WAAW,EAAE,IAFmC;AAGhDC,IAAAA,MAAM,EAAE;AAHwC,GAAD,CAAhD;AAMA,QAAMqC,eAAe,GAAGnP,MAAM,CAAC8N,YAAD,CAA9B;AACAqB,EAAAA,eAAe,CAAC/N,OAAhB,GAA0B0M,YAA1B;AAEAnN,EAAAA,SAAS,CAAC,MAAM;AACf,UAAMkM,WAAW,GAAIuC,OAAD,IAAa;AAChC,YAAMtC,MAAM,GAAG,EAAE,GAAGqC,eAAe,CAAC/N,OAAhB,CAAwB0L;AAA7B,OAAf;AACA,aAAOA,MAAM,CAACsC,OAAD,CAAb;AACAL,MAAAA,eAAe,CAAC,EAAE,GAAGI,eAAe,CAAC/N,OAArB;AAA8B0L,QAAAA;AAA9B,OAAD,CAAf;AACA,KAJD;;AAKA,UAAMF,QAAQ,GAAG,CAACkC,IAAD,EAAOvZ,IAAI,GAAG,EAAd,EAAkBsZ,YAAY,GAAG,IAAjC,KAA0C;AAC1D,YAAMO,OAAO,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAhB;AACA,YAAMC,KAAK,GAAG;AACb3M,QAAAA,SAAS,EAAErN,IAAI,GAAI,kBAAiBA,IAAK,EAA1B,GAA8B,EADhC;AAEbuZ,QAAAA,IAFa;AAGbD,QAAAA;AAHa,OAAd;AAKA,YAAM/B,MAAM,GAAG,EACd,GAAGqC,eAAe,CAAC/N,OAAhB,CAAwB0L,MADb;AAEd,SAACsC,OAAD,GAAWG;AAFG,OAAf;AAIAR,MAAAA,eAAe,CAAC,EAAE,GAAGI,eAAe,CAAC/N,OAArB;AAA8B0L,QAAAA;AAA9B,OAAD,CAAf;AACA3L,MAAAA,UAAU,CAAC,MAAM;AAChBgO,QAAAA,eAAe,CAAC/N,OAAhB,CAAwByL,WAAxB,CAAoCuC,OAApC;AACA,OAFS,EAEPP,YAFO,CAAV;AAGA,KAfD;;AAgBAE,IAAAA,eAAe,CAAC,EACf,GAAGI,eAAe,CAAC/N,OADJ;AAEfwL,MAAAA,QAFe;AAGfC,MAAAA;AAHe,KAAD,CAAf;AAKA,WAAO,MAAM,EAAb;AACA,GA5BQ,EA4BN,EA5BM,CAAT;AA8BA,sBACCxR,6BAAC0S,cAAD,CAAgB,QAAhB;AAAyB,IAAA,KAAK,EAAE;AAAED,MAAAA,YAAF;AAAgBiB,MAAAA;AAAhB;AAAhC,KACE5F,QADF,eAEC9N,6BAAC,OAAD,OAFD,eAGCA,6BAAC,cAAD,OAHD,CADD;AAOA;AAED6T,aAAa,CAACjT,SAAd,GAA0B;AACzBkN,EAAAA,QAAQ,EAAEjN,SAAS,CAACmN,IAAV,CAAeC;AADA,CAA1B;;ACpDe,SAASkG,MAAT,CAAgB;AAC9B5M,EAAAA,SAD8B;AAE9BnG,EAAAA,KAF8B;AAG9B0P,EAAAA,MAH8B;AAI9BC,EAAAA,OAJ8B;AAK9B,KAAGtM;AAL2B,CAAhB,EAMZ;AACF,sBACCzE;AAAK,IAAA,SAAS,EAAC;AAAf,kBACCA;AAAK,IAAA,SAAS,EAAC;AAAf,IADD,eAECA;AAAK,IAAA,SAAS,EAAC;AAAf,KACE8Q,MADF,eAEC9Q;AAAA,eACa,yCAAwCuH,SAAU,EAAnD,CAAqDG,IAArD,EADZ;AAAA,UAEM;AAFN,KAGKjD,UAHL,GAKErD,KALF,CAFD,EASE2P,OATF,CAFD,CADD;AAgBA;AAEDoD,MAAM,CAACvT,SAAP,GAAmB;AAClB2G,EAAAA,SAAS,EAAE1G,SAAS,CAACC,MADH;AAElBM,EAAAA,KAAK,EAAEP,SAAS,CAACC,MAFC;AAGlBgQ,EAAAA,MAAM,EAAEjQ,SAAS,CAACmN,IAHA;AAIlB+C,EAAAA,OAAO,EAAElQ,SAAS,CAACmN;AAJD,CAAnB;AAOAmG,MAAM,CAACpT,YAAP,GAAsB;AACrBwG,EAAAA,SAAS,EAAE,EADU;AAErBnG,EAAAA,KAAK,EAAE,QAFc;AAGrB0P,EAAAA,MAAM,EAAE,IAHa;AAIrBC,EAAAA,OAAO,EAAE;AAJY,CAAtB;;MCrBa5S,KAAG,GAAGiW;AACnB,MAAavL,SAAS,GAAGwL;AACzB,MAAahU,OAAK,GAAGb;AACrB,MAAamR,OAAK,GAAG2D;AACrB,MAAatB,MAAI,GAAGuB;AACpB,MAAaV,eAAa,GAAGW;AAC7B,MAAahU,WAAW,GAAGiU,WAApB;AACP,MAAa/B,cAAc,GAAGgC,cAAvB;AACP,MAAavG,OAAK,GAAG+C;AACrB,MAAaV,OAAK,GAAGpP;AACrB,MAAasQ,SAAO,GAAGxR;AACvB,MAAaiU,QAAM,GAAGQ;;;;"}