{"version":3,"file":"index.modern.js","sources":["../src/js/Helpers/JsonApi.js","../src/js/Helpers/Api.js","../src/js/FormContext.js","../src/js/Error.js","../src/js/Helpers/Options.js","../src/js/Input/Autocomplete.js","../src/js/Input/Checkbox.js","../src/js/Input/CheckboxList.js","../src/js/Input/File.js","../src/js/ConditionalWrapper.js","../src/js/Input.js","../src/js/Input/Password.js","../src/js/Input/Radio.js","../src/js/Input/Search.js","../src/js/Input/Select.js","../src/js/Input/Textarea.js","../src/js/FieldInput.js","../src/js/ExportableInput.js","../src/js/Label.js","../src/js/Field.js","../src/js/FormosaContext.js","../src/js/Message.js","../src/js/FormInner.js","../src/js/Form.js","../src/js/Spinner.js","../src/js/Toast.js","../src/js/ToastContainer.js","../src/js/FormContainer.js","../src/js/Submit.js","../src/index.js"],"sourcesContent":["import get from 'get-value';\nimport set from 'set-value';\n\nconst findIncluded = (included, id, type, mainRecord) => {\n\tif (mainRecord && id === mainRecord.id && type === mainRecord.type) {\n\t\tconst output = {\n\t\t\tid: mainRecord.id,\n\t\t\ttype: mainRecord.type,\n\t\t};\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'attributes')) {\n\t\t\toutput.attributes = mainRecord.attributes;\n\t\t}\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'meta')) {\n\t\t\toutput.meta = mainRecord.meta;\n\t\t}\n\t\treturn output;\n\t}\n\treturn included.find((data) => (data.id === id && data.type === type));\n};\n\nconst deserializeSingle = (data, otherRows = [], included = [], mainRecord = null) => {\n\tif (!data) {\n\t\treturn data;\n\t}\n\tconst output = {\n\t\tid: data.id,\n\t\ttype: data.type,\n\t\t...data.attributes,\n\t};\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'relationships')) {\n\t\tlet includedRecord;\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\toutput[relationshipName] = data.relationships[relationshipName].data;\n\t\t\tif (Array.isArray(output[relationshipName])) {\n\t\t\t\toutput[relationshipName].forEach((rel, i) => {\n\t\t\t\t\tincludedRecord = findIncluded(included, rel.id, rel.type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tincludedRecord = findIncluded(otherRows, rel.id, rel.type, mainRecord);\n\t\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (output[relationshipName] !== null) {\n\t\t\t\tincludedRecord = findIncluded(included, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\tif (includedRecord) {\n\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t} else {\n\t\t\t\t\tincludedRecord = findIncluded(otherRows, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'meta')) {\n\t\toutput.meta = data.meta;\n\t}\n\n\treturn output;\n};\n\nexport const deserialize = (body) => {\n\tif (Array.isArray(body.data)) {\n\t\tconst output = [];\n\t\tbody.data.forEach((data) => {\n\t\t\toutput.push(deserializeSingle(data, body.data, body.included, null));\n\t\t});\n\t\treturn output;\n\t}\n\treturn deserializeSingle(body.data, [], body.included, body.data);\n};\n\nconst cleanSingleRelationship = (values) => ({\n\tid: values.id,\n\ttype: values.type,\n});\n\nconst cleanRelationship = (values) => {\n\tif (Array.isArray(values)) {\n\t\treturn values.map((value) => cleanSingleRelationship(value));\n\t}\n\treturn cleanSingleRelationship(values);\n};\n\nconst getIncludedItemData = (rel, relName, childRelationshipNames, dirtyRelationships, relIndex = null) => {\n\tconst relData = {\n\t\tid: rel.id,\n\t\ttype: rel.type,\n\t\tattributes: {},\n\t\trelationships: {},\n\t};\n\n\tif (rel.id.startsWith('temp-')) {\n\t\t// This is a new record; include all attributes.\n\t\tObject.keys(rel).forEach((key) => {\n\t\t\tif (key !== 'id' && key !== 'type') {\n\t\t\t\tif (childRelationshipNames[relName].includes(key)) {\n\t\t\t\t\tconst childRel = {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid: rel[key].id,\n\t\t\t\t\t\t\ttype: rel[key].type,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tset(relData.relationships, key, childRel);\n\t\t\t\t} else {\n\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\t// This is an existing record; include only the dirty attributes.\n\t\tObject.keys(rel).forEach((key) => {\n\t\t\tif (key !== 'id' && key !== 'type') {\n\t\t\t\tif (relIndex === null) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyRelationships[relName], key)) {\n\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t}\n\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(dirtyRelationships[relName], relIndex)) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyRelationships[relName][relIndex], key)) {\n\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tconst hasAttributes = Object.keys(relData.attributes).length > 0;\n\tif (!hasAttributes) {\n\t\tdelete relData.attributes;\n\t}\n\tconst hasRelationships = Object.keys(relData.relationships).length > 0;\n\tif (!hasRelationships) {\n\t\tdelete relData.relationships;\n\t}\n\n\tif (!hasAttributes && !hasRelationships) {\n\t\treturn null;\n\t}\n\n\treturn relData;\n};\n\nconst getIncluded = (data, dirtyKeys, relationshipNames) => {\n\tconst included = [];\n\n\tconst dirtyRelationships = {};\n\tdirtyKeys.forEach((key) => {\n\t\tconst currentKeys = [];\n\t\tkey.split('.').forEach((k) => {\n\t\t\tcurrentKeys.push(k);\n\t\t\tif (typeof get(dirtyRelationships, currentKeys.join('.')) === 'undefined') {\n\t\t\t\tset(dirtyRelationships, currentKeys.join('.'), {});\n\t\t\t}\n\t\t});\n\t});\n\n\tconst childRelationshipNames = {};\n\trelationshipNames.forEach((relName) => {\n\t\tchildRelationshipNames[relName] = [];\n\t\tif (relName.includes('.')) {\n\t\t\tconst keys = relName.split('.');\n\t\t\tchildRelationshipNames[keys.shift()].push(keys.join('.'));\n\t\t}\n\t});\n\n\tObject.keys(dirtyRelationships).forEach((relName) => {\n\t\tif (Object.prototype.hasOwnProperty.call(data.relationships, relName)) {\n\t\t\tlet relData;\n\t\t\tif (Array.isArray(data.relationships[relName].data)) {\n\t\t\t\tObject.keys(data.relationships[relName].data).forEach((relIndex) => {\n\t\t\t\t\tconst rel = data.relationships[relName].data[relIndex];\n\t\t\t\t\tif (rel) {\n\t\t\t\t\t\trelData = getIncludedItemData(rel, relName, childRelationshipNames, dirtyRelationships, relIndex);\n\t\t\t\t\t\tif (relData) {\n\t\t\t\t\t\t\tincluded.push(relData);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst rel = data.relationships[relName].data;\n\t\t\t\tif (rel) {\n\t\t\t\t\trelData = getIncludedItemData(rel, relName, childRelationshipNames, dirtyRelationships);\n\t\t\t\t\tif (relData) {\n\t\t\t\t\t\tincluded.push(relData);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\treturn included;\n};\n\nconst unset = (obj, key) => {\n\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\treturn delete obj[key];\n\t}\n\n\tconst keys = key.split('.');\n\tconst lastKey = keys.pop();\n\tlet o = obj;\n\tkeys.forEach((k) => {\n\t\to = o[k];\n\t});\n\treturn delete o[lastKey];\n};\n\nexport const getBody = (\n\tmethod,\n\ttype,\n\tid,\n\tformState,\n\tdirtyKeys,\n\trelationshipNames,\n\tfilterBody,\n\tfilterValues\n) => {\n\tlet body = null;\n\n\tif (method === 'PUT' || method === 'POST') {\n\t\t// Initialize the basic body structure.\n\t\tconst data = {\n\t\t\ttype,\n\t\t\tattributes: {},\n\t\t\trelationships: {},\n\t\t\tmeta: {},\n\t\t};\n\t\tif (method === 'PUT' && id) {\n\t\t\tdata.id = id;\n\t\t}\n\n\t\t// Allow the app to modify values before they are sorted into sections.\n\t\tlet values = { ...formState.row };\n\t\tif (filterValues) {\n\t\t\tvalues = filterValues(values);\n\t\t}\n\n\t\t// Get keys for file fields.\n\t\tconst fileKeys = Object.keys(formState.files);\n\n\t\t// If this is an update request, only include keys for changed values.\n\t\t// Otherwise (this must be an add request), include keys for all values.\n\t\tconst keys = method === 'PUT' ? dirtyKeys : Object.keys(formState.row);\n\n\t\t// Sort each value into the proper section.\n\t\tkeys.forEach((key) => {\n\t\t\tconst firstPartOfKey = key.replace(/\\..+$/, '');\n\t\t\tif (relationshipNames.includes(firstPartOfKey)) {\n\t\t\t\tdata.relationships[firstPartOfKey] = {\n\t\t\t\t\tdata: get(values, firstPartOfKey),\n\t\t\t\t};\n\t\t\t} else if (relationshipNames.includes(key)) {\n\t\t\t\tdata.relationships[key] = {\n\t\t\t\t\tdata: get(values, firstPartOfKey),\n\t\t\t\t};\n\t\t\t} else if (key.startsWith('meta.')) {\n\t\t\t\tset(data, key, get(values, key));\n\t\t\t} else if (key === 'meta') {\n\t\t\t\tdata.meta = values.meta;\n\t\t\t} else if (fileKeys.includes(key)) {\n\t\t\t\tunset(data.attributes, key);\n\t\t\t} else {\n\t\t\t\tset(data.attributes, key, get(values, key));\n\t\t\t}\n\t\t});\n\n\t\tbody = { data };\n\n\t\tconst included = getIncluded(data, dirtyKeys, relationshipNames);\n\t\tif (included.length > 0) {\n\t\t\tbody.included = included;\n\t\t}\n\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\tif (typeof data.relationships[relationshipName].data === 'string') {\n\t\t\t\tif (data.relationships[relationshipName].data === '') {\n\t\t\t\t\tdata.relationships[relationshipName].data = null;\n\t\t\t\t} else {\n\t\t\t\t\tdata.relationships[relationshipName].data = JSON.parse(data.relationships[relationshipName].data);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (data.relationships[relationshipName].data) {\n\t\t\t\tdata.relationships[relationshipName].data = cleanRelationship(data.relationships[relationshipName].data);\n\t\t\t}\n\t\t});\n\n\t\t// Allow the app to modify values after they have been sorted into sections.\n\t\tif (filterBody) {\n\t\t\tbody = filterBody(body, formState.row);\n\t\t}\n\n\t\t// Remove any sections with no values.\n\t\tif (Object.keys(data.attributes).length <= 0) {\n\t\t\tdelete data.attributes;\n\t\t}\n\t\tif (Object.keys(data.meta).length <= 0) {\n\t\t\tdelete data.meta;\n\t\t}\n\t\tif (Object.keys(data.relationships).length <= 0) {\n\t\t\tdelete data.relationships;\n\t\t}\n\n\t\t// Handle file fields.\n\t\tconst filenames = fileKeys.filter((filename) => (formState.files[filename] !== false));\n\t\tif (filenames.length > 0) {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('json', JSON.stringify(body));\n\t\t\tformData.append('files', JSON.stringify(filenames));\n\n\t\t\tfilenames.forEach((filename) => {\n\t\t\t\tformData.append(filename, formState.files[filename]);\n\t\t\t});\n\n\t\t\tbody = formData;\n\t\t}\n\t}\n\n\treturn body;\n};\n","import { deserialize } from './JsonApi';\nimport { trackPromise } from 'react-promise-tracker';\n\nexport default class Api {\n\tstatic get(url, showSpinner = true) {\n\t\treturn Api.request('GET', url, null, showSpinner);\n\t}\n\n\tstatic delete(url, showSpinner = true) {\n\t\treturn Api.request('DELETE', url, null, showSpinner);\n\t}\n\n\tstatic post(url, body, showSpinner = true) {\n\t\treturn Api.request('POST', url, body, showSpinner);\n\t}\n\n\tstatic put(url, body, showSpinner = true) {\n\t\treturn Api.request('PUT', url, body, showSpinner);\n\t}\n\n\tstatic request(method, url, body = null, showSpinner = true) {\n\t\tconst options = {\n\t\t\tmethod,\n\t\t\theaders: {\n\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t},\n\t\t};\n\t\tif (typeof body === 'string') {\n\t\t\toptions.headers['Content-Type'] = 'application/json';\n\t\t}\n\t\tif (Api.getToken()) {\n\t\t\toptions.headers.Authorization = `Bearer ${Api.getToken()}`;\n\t\t}\n\t\tif (body) {\n\t\t\toptions.body = body;\n\t\t}\n\n\t\tlet fullUrl = url;\n\t\tif (process.env.REACT_APP_API_URL && !url.startsWith('http')) {\n\t\t\tfullUrl = `${process.env.REACT_APP_API_URL.replace(/\\/$/, '')}/${url.replace(/^\\//, '')}`;\n\t\t}\n\n\t\tconst event = new CustomEvent('formosaApiRequest', { cancelable: true, detail: { url: fullUrl, options } });\n\t\tif (!document.dispatchEvent(event)) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst promise = fetch(fullUrl, options)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\t\tjson.status = response.status;\n\t\t\t\t\t\t\tthrow json;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tif (error instanceof SyntaxError) {\n\t\t\t\t\t\t\t\tthrow { // eslint-disable-line no-throw-literal\n\t\t\t\t\t\t\t\t\terrors: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'The server returned invalid JSON.',\n\t\t\t\t\t\t\t\t\t\t\tstatus: '500',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (response.status === 204) {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((json) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(json, 'data')) {\n\t\t\t\t\treturn deserialize(json);\n\t\t\t\t}\n\t\t\t\treturn json;\n\t\t\t});\n\n\t\treturn showSpinner ? trackPromise(promise) : promise;\n\t}\n\n\tstatic getToken() {\n\t\treturn window.FORMOSA_TOKEN;\n\t}\n\n\tstatic setToken(token) {\n\t\twindow.FORMOSA_TOKEN = token;\n\t}\n}\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\terrors: {},\n\t\tfiles: {},\n\t\tmessage: '',\n\t\toriginalRow: {},\n\t\trow: {},\n\t\tsetRow: null,\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport PropTypes from 'prop-types';\n\nexport default function Error({\n\tid,\n\tname,\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst hasError = formState && Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst props = {};\n\tif (name) {\n\t\t// Used for matching the attribute name from the API to this error element.\n\t\tprops['data-name'] = name;\n\t}\n\tif (id || name) {\n\t\tprops.id = `${id || name}-error`;\n\t}\n\n\treturn (\n\t\t<div className=\"formosa-field__error\" {...props}>\n\t\t\t{hasError && formState.errors[name].map((e) => (<div key={e}>{e}</div>))}\n\t\t</div>\n\t);\n}\n\nError.propTypes = {\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n};\n\nError.defaultProps = {\n\tid: null,\n\tname: '',\n};\n","import get from 'get-value';\n\nexport const normalizeOptions = (options, labelKey, valueKey = null) => {\n\tif (!options) {\n\t\treturn [];\n\t}\n\n\tconst output = [];\n\tif (Array.isArray(options)) {\n\t\toptions.forEach((option) => {\n\t\t\tif (typeof option === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue: option,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tObject.keys(options).forEach((value) => {\n\t\t\tconst option = options[value];\n\t\t\tif (typeof value === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn output;\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nexport const escapeRegExp = (string) => (string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'));\n\nconst toSlug = (s) => (\n\ts.toLowerCase()\n\t\t.replace(/ & /g, '-and-')\n\t\t.replace(/<[^>]+>/g, '')\n\t\t.replace(/['’.]/g, '')\n\t\t.replace(/[^a-z0-9-]+/g, '-')\n\t\t.replace(/^-+/, '')\n\t\t.replace(/-+$/, '')\n\t\t.replace(/--+/g, '-')\n);\n\nexport const filterByKey = (records, key, value) => {\n\tvalue = value.toLowerCase();\n\tconst escapedValue = escapeRegExp(value);\n\trecords = records.filter((record) => {\n\t\tconst recordValue = get(record, key).toString().toLowerCase() || '';\n\t\treturn recordValue.match(new RegExp(`(^|[^a-z])${escapedValue}`));\n\t});\n\tvalue = toSlug(value);\n\trecords = records.sort((a, b) => {\n\t\tconst aValue = toSlug(get(a, key).toString());\n\t\tconst bValue = toSlug(get(b, key).toString());\n\t\tconst aPos = aValue.indexOf(value) === 0;\n\t\tconst bPos = bValue.indexOf(value) === 0;\n\t\tif ((aPos && bPos) || (!aPos && !bPos)) {\n\t\t\treturn aValue.localeCompare(bValue);\n\t\t}\n\t\tif (aPos && !bPos) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\treturn records;\n};\n","import { filterByKey, normalizeOptions } from '../Helpers/Options';\nimport React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CloseIcon } from '../../svg/x.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Autocomplete({\n\tafterAdd,\n\tafterChange,\n\tclearable,\n\tclearButtonAttributes,\n\tclearButtonClassName,\n\tclearIconAttributes,\n\tclearIconHeight,\n\tclearIconWidth,\n\tclearText,\n\tdisabled,\n\tid,\n\tinputClassName,\n\tlabelFn,\n\tlabelKey,\n\tloadingText,\n\tmax,\n\tname,\n\toptionButtonAttributes,\n\toptionButtonClassName,\n\toptionLabelFn,\n\toptionListAttributes,\n\toptionListClassName,\n\toptionListItemAttributes,\n\toptionListItemClassName,\n\toptions,\n\tplaceholder,\n\treadOnly,\n\tremoveButtonAttributes,\n\tremoveButtonClassName,\n\tremoveIconAttributes,\n\tremoveIconHeight,\n\tremoveIconWidth,\n\tremoveText,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\tvalueListItemAttributes,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst clearButtonRef = useRef(null);\n\tconst inputRef = useRef(null);\n\tconst removeButtonRef = useRef(null);\n\tconst [filter, setFilter] = useState('');\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [highlightedIndex, setHighlightedIndex] = useState(0);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [message, setMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url, false)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetMessage(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\">{loadingText}</div>);\n\t}\n\n\tif (message) {\n\t\treturn (<div className=\"formosa-field__error\">{message}</div>);\n\t}\n\n\tlet currentValue = null;\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Autocomplete> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined || currentValue === '') {\n\t\tcurrentValue = null;\n\t} else if (max === 1 && !Array.isArray(currentValue)) {\n\t\tcurrentValue = [currentValue];\n\t}\n\tconst currentValueLength = currentValue ? currentValue.length : 0;\n\n\tconst isSelected = (option) => {\n\t\tif (!currentValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn currentValue.findIndex((v) => {\n\t\t\tif (typeof v === 'object') {\n\t\t\t\treturn JSON.stringify(v) === JSON.stringify(option.value);\n\t\t\t}\n\t\t\treturn v === option.value;\n\t\t}) > -1;\n\t};\n\n\tlet filteredOptions = [];\n\tif (filter) {\n\t\tfilteredOptions = filterByKey(optionValues, 'label', filter);\n\t\tfilteredOptions = filteredOptions.filter((option) => (!isSelected(option)));\n\t}\n\n\tconst focus = () => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t};\n\n\tconst addValue = (v) => {\n\t\tlet newValue;\n\t\tif (max === 1) {\n\t\t\tnewValue = v;\n\t\t} else if (currentValue) {\n\t\t\tnewValue = [...currentValue, v];\n\t\t} else {\n\t\t\tnewValue = [v];\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\n\t\tsetIsOpen(false);\n\t\tsetFilter('');\n\t\tfocus();\n\n\t\tif (afterAdd) {\n\t\t\tafterAdd();\n\t\t}\n\t};\n\n\tconst removeValue = (v) => {\n\t\tlet newValue = [];\n\t\tif (currentValue) {\n\t\t\tnewValue = [...currentValue];\n\t\t}\n\t\tif (max !== 1) {\n\t\t\tconst index = newValue.indexOf(v);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\t\t} else {\n\t\t\tnewValue = '';\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\n\t\tfocus();\n\t};\n\n\tconst onChange = (e) => {\n\t\tsetFilter(e.target.value);\n\t};\n\n\tconst onFocus = () => {\n\t\tsetHighlightedIndex(0);\n\t\tsetIsOpen(filter.length > 0);\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t} else if (e.key === 'Backspace' && !filter && currentValueLength > 0) {\n\t\t\tremoveValue(currentValue[currentValueLength - 1]);\n\t\t}\n\t};\n\n\tconst onKeyUp = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t\taddValue(filteredOptions[highlightedIndex].value);\n\t\t} else if (e.key === 'ArrowDown') {\n\t\t\tif (highlightedIndex >= (filteredOptions.length - 1)) {\n\t\t\t\tsetHighlightedIndex(0);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(highlightedIndex + 1);\n\t\t\t}\n\t\t} else if (e.key === 'ArrowUp') {\n\t\t\tif (highlightedIndex > 0) {\n\t\t\t\tsetHighlightedIndex(highlightedIndex - 1);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(filteredOptions.length - 1);\n\t\t\t}\n\t\t} else if (e.key === 'Escape') {\n\t\t\tsetIsOpen(false);\n\t\t} else {\n\t\t\tsetHighlightedIndex(0);\n\t\t\tsetIsOpen(filterValue.length > 0);\n\t\t}\n\t};\n\n\tconst onClickOption = (e) => {\n\t\tlet val = e.target.getAttribute('data-value');\n\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\tval = JSON.parse(val);\n\t\t}\n\t\taddValue(val);\n\t};\n\n\tconst onClickRemoveOption = (e) => {\n\t\tlet button = e.target;\n\t\twhile (button && button.tagName.toUpperCase() !== 'BUTTON') {\n\t\t\tbutton = button.parentNode;\n\t\t}\n\t\tremoveValue(currentValue[button.getAttribute('data-index')]);\n\t};\n\n\tconst clear = () => {\n\t\tconst newValue = [];\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\n\t\tsetFilter('');\n\t\tfocus();\n\t};\n\n\tconst showClear = clearable && max !== 1 && currentValueLength > 0 && !disabled && !readOnly;\n\n\tlet className = ['formosa-autocomplete'];\n\tif (showClear) {\n\t\tclassName.push('formosa-autocomplete--clearable');\n\t}\n\tclassName = className.join(' ');\n\n\tconst canAddValues = !disabled && !readOnly && (max === null || currentValueLength < max);\n\n\tconst wrapperProps = {};\n\tif (id || name) {\n\t\twrapperProps.id = `${id || name}-wrapper`;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${className} ${wrapperClassName}`.trim()}\n\t\t\tdata-value={JSON.stringify(max === 1 && currentValueLength > 0 ? currentValue[0] : currentValue)} /* For testing. */\n\t\t\t{...wrapperProps}\n\t\t\t{...wrapperAttributes}\n\t\t>\n\t\t\t<ul className=\"formosa-autocomplete__values\">\n\t\t\t\t{currentValue && currentValue.map((v, index) => {\n\t\t\t\t\tlet val = v;\n\t\t\t\t\tlet isJson = false;\n\t\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\t\tval = JSON.stringify(val);\n\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst option = optionValues.find((o) => (\n\t\t\t\t\t\tisJson ? JSON.stringify(o.value) === val : o.value === val\n\t\t\t\t\t));\n\n\t\t\t\t\tlet label = '';\n\t\t\t\t\tif (labelFn) {\n\t\t\t\t\t\tlabel = labelFn(option || v);\n\t\t\t\t\t} else if (option && Object.prototype.hasOwnProperty.call(option, 'label')) {\n\t\t\t\t\t\tlabel = option.label;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet valueListItemProps = {};\n\t\t\t\t\tif (typeof valueListItemAttributes === 'function') {\n\t\t\t\t\t\tvalueListItemProps = valueListItemAttributes(option);\n\t\t\t\t\t} else if (valueListItemAttributes && typeof valueListItemAttributes === 'object') {\n\t\t\t\t\t\tvalueListItemProps = valueListItemAttributes;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet removeButtonProps = {};\n\t\t\t\t\tif (typeof removeButtonAttributes === 'function') {\n\t\t\t\t\t\tremoveButtonProps = removeButtonAttributes(option);\n\t\t\t\t\t} else if (removeButtonAttributes && typeof removeButtonAttributes === 'object') {\n\t\t\t\t\t\tremoveButtonProps = removeButtonAttributes;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet removeIconProps = {};\n\t\t\t\t\tif (typeof removeIconAttributes === 'function') {\n\t\t\t\t\t\tremoveIconProps = removeIconAttributes(option);\n\t\t\t\t\t} else if (removeIconAttributes && typeof removeIconAttributes === 'object') {\n\t\t\t\t\t\tremoveIconProps = removeIconAttributes;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--item\" key={val} {...valueListItemProps}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t{!disabled && !readOnly && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__value__remove ${removeButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-index={index}\n\t\t\t\t\t\t\t\t\tonClick={onClickRemoveOption}\n\t\t\t\t\t\t\t\t\tref={removeButtonRef}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t{...removeButtonProps}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CloseIcon aria-hidden=\"true\" height={removeIconHeight} width={removeIconWidth} {...removeIconProps} />\n\t\t\t\t\t\t\t\t\t{removeText}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t{canAddValues && (\n\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--input\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-autocomplete__input ${inputClassName}`.trim()}\n\t\t\t\t\t\t\tid={id || name}\n\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\tonKeyUp={onKeyUp}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={filter}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t)}\n\t\t\t</ul>\n\n\t\t\t{isOpen && filteredOptions.length > 0 && (\n\t\t\t\t<ul className={`formosa-autocomplete__options ${optionListClassName}`.trim()} {...optionListAttributes}>\n\t\t\t\t\t{filteredOptions.map((option, index) => {\n\t\t\t\t\t\tlet optionClassName = ['formosa-autocomplete__option'];\n\t\t\t\t\t\tif (highlightedIndex === index) {\n\t\t\t\t\t\t\toptionClassName.push('formosa-autocomplete__option--highlighted');\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionClassName = optionClassName.join(' ');\n\n\t\t\t\t\t\tlet val = option.value;\n\t\t\t\t\t\tlet isJson = false;\n\t\t\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\t\tval = JSON.stringify(val);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet label = '';\n\t\t\t\t\t\tif (optionLabelFn) {\n\t\t\t\t\t\t\tlabel = optionLabelFn(option);\n\t\t\t\t\t\t} else if (option && Object.prototype.hasOwnProperty.call(option, 'label')) {\n\t\t\t\t\t\t\tlabel = option.label;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet optionListItemProps = {};\n\t\t\t\t\t\tif (typeof optionListItemAttributes === 'function') {\n\t\t\t\t\t\t\toptionListItemProps = optionListItemAttributes(option);\n\t\t\t\t\t\t} else if (optionListItemAttributes && typeof optionListItemAttributes === 'object') {\n\t\t\t\t\t\t\toptionListItemProps = optionListItemAttributes;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet optionButtonProps = {};\n\t\t\t\t\t\tif (typeof optionButtonAttributes === 'function') {\n\t\t\t\t\t\t\toptionButtonProps = optionButtonAttributes(option);\n\t\t\t\t\t\t} else if (optionButtonAttributes && typeof optionButtonAttributes === 'object') {\n\t\t\t\t\t\t\toptionButtonProps = optionButtonAttributes;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tclassName={`${optionClassName} ${optionListItemClassName}`.trim()}\n\t\t\t\t\t\t\t\tkey={val}\n\t\t\t\t\t\t\t\t{...optionListItemProps}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__option__button ${optionButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-json={isJson}\n\t\t\t\t\t\t\t\t\tdata-value={val}\n\t\t\t\t\t\t\t\t\tonClick={onClickOption}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t{...optionButtonProps}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t)}\n\n\t\t\t{showClear && (\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-autocomplete__clear ${clearButtonClassName}`.trim()}\n\t\t\t\t\t\tonClick={clear}\n\t\t\t\t\t\tref={clearButtonRef}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...clearButtonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CloseIcon aria-hidden=\"true\" height={clearIconHeight} width={clearIconWidth} {...clearIconAttributes} />\n\t\t\t\t\t\t{clearText}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nAutocomplete.propTypes = {\n\tafterAdd: PropTypes.func,\n\tafterChange: PropTypes.func,\n\tclearable: PropTypes.bool,\n\tclearButtonAttributes: PropTypes.object,\n\tclearButtonClassName: PropTypes.string,\n\tclearIconAttributes: PropTypes.object,\n\tclearIconHeight: PropTypes.number,\n\tclearIconWidth: PropTypes.number,\n\tclearText: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputClassName: PropTypes.string,\n\tlabelFn: PropTypes.func,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tloadingText: PropTypes.string,\n\tmax: PropTypes.number,\n\tname: PropTypes.string,\n\toptionButtonAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\toptionButtonClassName: PropTypes.string,\n\toptionLabelFn: PropTypes.func,\n\toptionListAttributes: PropTypes.object,\n\toptionListClassName: PropTypes.string,\n\toptionListItemAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\toptionListItemClassName: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tplaceholder: PropTypes.string,\n\treadOnly: PropTypes.bool,\n\tremoveButtonAttributes: PropTypes.object,\n\tremoveButtonClassName: PropTypes.string,\n\tremoveIconAttributes: PropTypes.object,\n\tremoveIconHeight: PropTypes.number,\n\tremoveIconWidth: PropTypes.number,\n\tremoveText: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.arrayOf(PropTypes.object),\n\t\tPropTypes.arrayOf(PropTypes.string),\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tvalueListItemAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nAutocomplete.defaultProps = {\n\tafterAdd: null,\n\tafterChange: null,\n\tclearable: true,\n\tclearButtonAttributes: null,\n\tclearButtonClassName: '',\n\tclearIconAttributes: null,\n\tclearIconHeight: 12,\n\tclearIconWidth: 12,\n\tclearText: 'Clear',\n\tdisabled: false,\n\tid: '',\n\tinputClassName: '',\n\tlabelFn: null,\n\tlabelKey: 'name',\n\tloadingText: 'Loading...',\n\tmax: null,\n\tname: '',\n\toptionButtonAttributes: null,\n\toptionButtonClassName: '',\n\toptionLabelFn: null,\n\toptionListAttributes: null,\n\toptionListClassName: '',\n\toptionListItemAttributes: null,\n\toptionListItemClassName: '',\n\toptions: null,\n\tplaceholder: 'Search',\n\treadOnly: false,\n\tremoveButtonAttributes: null,\n\tremoveButtonClassName: '',\n\tremoveIconAttributes: null,\n\tremoveIconHeight: 12,\n\tremoveIconWidth: 12,\n\tremoveText: 'Remove',\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n\tvalueListItemAttributes: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Checkbox({\n\tafterChange,\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tname,\n\tsetValue,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\n\tlet checked = false;\n\tif (setValue !== null) {\n\t\tchecked = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Checkbox> component must be inside a <Form> component.');\n\t\t}\n\t\tchecked = !!get(formState.row, name);\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.checked;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\tchecked={checked}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<CheckIcon\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={`formosa-icon--check ${iconClassName}`.trim()}\n\t\t\t\theight={iconHeight}\n\t\t\t\twidth={iconWidth}\n\t\t\t\t{...iconAttributes}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nCheckbox.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.bool,\n};\n\nCheckbox.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tvalue: null,\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function CheckboxList({\n\tafterChange,\n\tclassName,\n\tdisabled,\n\tfieldsetAttributes,\n\tfieldsetClassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tinputAttributes,\n\titemAttributes,\n\titemClassName,\n\titemLabelAttributes,\n\titemLabelClassName,\n\titemSpanAttributes,\n\titemSpanClassName,\n\tlabelKey,\n\tlegend,\n\tloadingText,\n\tname,\n\toptions,\n\treadOnly,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [message, setMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url, false)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetMessage(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\">{loadingText}</div>);\n\t}\n\n\tif (message) {\n\t\treturn (<div className=\"formosa-field__error\">{message}</div>);\n\t}\n\n\tlet currentValue = [];\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<CheckboxList> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined || currentValue === '') {\n\t\tcurrentValue = [];\n\t}\n\tconst currentValueStringified = currentValue.map((val) => (typeof val === 'object' ? JSON.stringify(val) : val));\n\n\tconst onChange = (e) => {\n\t\tconst newValue = [...currentValue];\n\t\tlet val = e.target.value;\n\n\t\tif (e.target.checked) {\n\t\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\t\tval = JSON.parse(val);\n\t\t\t}\n\t\t\tnewValue.push(val);\n\t\t} else {\n\t\t\tconst index = currentValueStringified.indexOf(val);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\treturn (\n\t\t<fieldset className={`formosa-radio ${fieldsetClassName}`.trim()} {...fieldsetAttributes}>\n\t\t\t<legend className=\"formosa-radio__legend\">{legend}</legend>\n\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\tlet isJson = false;\n\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\tisJson = true;\n\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t}\n\n\t\t\t\tconst checked = currentValueStringified.includes(optionValueVal);\n\n\t\t\t\tlet itemProps = {};\n\t\t\t\tif (typeof itemAttributes === 'function') {\n\t\t\t\t\titemProps = itemAttributes(optionValue);\n\t\t\t\t} else if (itemAttributes && typeof itemAttributes === 'object') {\n\t\t\t\t\titemProps = itemAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet itemLabelProps = {};\n\t\t\t\tif (typeof itemLabelAttributes === 'function') {\n\t\t\t\t\titemLabelProps = itemLabelAttributes(optionValue);\n\t\t\t\t} else if (itemLabelAttributes && typeof itemLabelAttributes === 'object') {\n\t\t\t\t\titemLabelProps = itemLabelAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet inputProps = {};\n\t\t\t\tif (typeof inputAttributes === 'function') {\n\t\t\t\t\tinputProps = inputAttributes(optionValue);\n\t\t\t\t} else if (inputAttributes && typeof inputAttributes === 'object') {\n\t\t\t\t\tinputProps = inputAttributes;\n\t\t\t\t}\n\t\t\t\tif (isJson) {\n\t\t\t\t\tinputProps['data-json'] = true;\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\tinputProps.name = `${name}[]`;\n\t\t\t\t}\n\n\t\t\t\tlet iconProps = {};\n\t\t\t\tif (typeof iconAttributes === 'function') {\n\t\t\t\t\ticonProps = iconAttributes(optionValue);\n\t\t\t\t} else if (iconAttributes && typeof iconAttributes === 'object') {\n\t\t\t\t\ticonProps = iconAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet itemSpanProps = {};\n\t\t\t\tif (typeof itemSpanAttributes === 'function') {\n\t\t\t\t\titemSpanProps = itemSpanAttributes(optionValue);\n\t\t\t\t} else if (itemSpanAttributes && typeof itemSpanAttributes === 'object') {\n\t\t\t\t\titemSpanProps = itemSpanAttributes;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={`formosa-radio__item ${itemClassName}`.trim()} key={optionValueVal} {...itemProps}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${itemLabelClassName}`.trim()}\n\t\t\t\t\t\t\t{...itemLabelProps}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\taria-label={optionValue.label}\n\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\treadOnly={readOnly}\n\t\t\t\t\t\t\t\tvalue={optionValueVal}\n\t\t\t\t\t\t\t\t{...inputProps}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\tclassName={`formosa-icon--check ${iconClassName}`.trim()}\n\t\t\t\t\t\t\t\theight={iconHeight}\n\t\t\t\t\t\t\t\twidth={iconWidth}\n\t\t\t\t\t\t\t\t{...iconProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span aria-hidden=\"true\" className={`formosa-radio__span ${itemSpanClassName}`.trim()} {...itemSpanProps}>\n\t\t\t\t\t\t\t\t{optionValue.label}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</fieldset>\n\t);\n}\n\nCheckboxList.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tfieldsetAttributes: PropTypes.object,\n\tfieldsetClassName: PropTypes.string,\n\ticonAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tinputAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemClassName: PropTypes.string,\n\titemLabelAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemLabelClassName: PropTypes.string,\n\titemSpanAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemSpanClassName: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlegend: PropTypes.string,\n\tloadingText: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\treadOnly: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.arrayOf(PropTypes.object),\n\t\tPropTypes.arrayOf(PropTypes.string),\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nCheckboxList.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tdisabled: false,\n\tfieldsetAttributes: null,\n\tfieldsetClassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tinputAttributes: null,\n\titemAttributes: null,\n\titemClassName: '',\n\titemLabelAttributes: null,\n\titemLabelClassName: '',\n\titemSpanAttributes: null,\n\titemSpanClassName: '',\n\tlabelKey: 'name',\n\tlegend: '',\n\tloadingText: 'Loading...',\n\tname: '',\n\toptions: null,\n\treadOnly: false,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n};\n","import React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function File({\n\tafterChange,\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\tdisabled,\n\temptyText,\n\tid,\n\timageAttributes,\n\timageClassName,\n\timageHeight,\n\timagePrefix,\n\timagePreview,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tlinkAttributes,\n\tlinkClassName,\n\tlinkImage,\n\tmultiple,\n\tname,\n\treadOnly,\n\tremoveText,\n\trequired,\n\tsetValue,\n\tvalue,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst inputRef = useRef(null);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<File> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tconst hasValue = multiple ? currentValue.length > 0 : !!currentValue;\n\n\tconst getFilenames = (v) => {\n\t\tif (v instanceof FileList) {\n\t\t\tconst numFiles = v.length;\n\t\t\tconst output = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < numFiles; i += 1) {\n\t\t\t\toutput.push(v.item(i).name);\n\t\t\t}\n\t\t\treturn output.join(', ');\n\t\t}\n\t\tif (Array.isArray(v)) {\n\t\t\treturn v.join(', ');\n\t\t}\n\t\tif (typeof v === 'object') {\n\t\t\treturn v.name;\n\t\t}\n\t\treturn v;\n\t};\n\n\tconst getSrcs = (v) => {\n\t\tconst output = [];\n\t\tif (v instanceof FileList) {\n\t\t\tconst numFiles = v.length;\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < numFiles; i += 1) {\n\t\t\t\toutput.push(URL.createObjectURL(v.item(i)));\n\t\t\t}\n\t\t} else if (Array.isArray(v)) {\n\t\t\treturn v.map((v2) => (`${imagePrefix}${v2}`));\n\t\t} else if (typeof v === 'object') {\n\t\t\toutput.push(URL.createObjectURL(v));\n\t\t} else if (typeof v === 'string') {\n\t\t\toutput.push(`${imagePrefix}${v}`);\n\t\t}\n\t\treturn output;\n\t};\n\n\tconst [filenames, setFilenames] = useState(getFilenames(currentValue));\n\tconst [srcs, setSrcs] = useState(getSrcs(currentValue));\n\n\tuseEffect(() => {\n\t\tsetFilenames(getFilenames(currentValue));\n\t\tsetSrcs(getSrcs(currentValue));\n\t}, [currentValue]);\n\n\tconst onChange = (e) => {\n\t\tconst newFiles = multiple ? e.target.files : e.target.files.item(0);\n\n\t\tsetFilenames(getFilenames(newFiles));\n\t\tif (imagePreview) {\n\t\t\tsetSrcs(getSrcs(newFiles));\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newFiles);\n\t\t} else {\n\t\t\tsetValues(e, name, newFiles, afterChange, newFiles);\n\t\t}\n\t};\n\n\tconst onRemove = (e) => {\n\t\tsetFilenames('');\n\n\t\tconst newValue = '';\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange, newValue);\n\t\t}\n\n\t\tinputRef.current.focus();\n\t};\n\n\tlet prefixClassName = inputWrapperClassName;\n\tif (hasValue && !disabled && !readOnly) {\n\t\tprefixClassName += ' formosa-prefix';\n\t}\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\n\tconst hiddenProps = {};\n\tif (name) {\n\t\thiddenProps.name = name;\n\t}\n\n\tconst buttonProps = {};\n\tif (id || name) {\n\t\tbuttonProps.id = `${id || name}-remove`;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{(hasValue && imagePreview) && (\n\t\t\t\tsrcs.map((src) => {\n\t\t\t\t\tconst img = (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\tclassName={`formosa-file-image ${imageClassName}`.trim()}\n\t\t\t\t\t\t\theight={imageHeight}\n\t\t\t\t\t\t\tkey={src}\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\t{...imageAttributes}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\tif (linkImage) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a className={`formosa-file-link ${linkClassName}`.trim()} href={src} key={src} {...linkAttributes}>\n\t\t\t\t\t\t\t\t{img}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn img;\n\t\t\t\t})\n\t\t\t)}\n\t\t\t<div className={`formosa-file-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t\t<div className={`formosa-file-input-wrapper ${prefixClassName}`.trim()} {...inputWrapperAttributes}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`formosa-file-name${!filenames ? ' formosa-file-name--empty' : ''}`}\n\t\t\t\t\t\tid={`${id || name}-name`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filenames || emptyText}\n\t\t\t\t\t</div>\n\t\t\t\t\t{!readOnly && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-field__input--file ${className}`.trim()}\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\tmultiple={multiple}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\tvalue={currentValue}\n\t\t\t\t\t\t\t\t{...hiddenProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{hasValue && !disabled && !readOnly && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button formosa-button--remove-file formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...buttonProps}\n\t\t\t\t\t\t{...buttonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{removeText}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nFile.propTypes = {\n\tafterChange: PropTypes.func,\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\temptyText: PropTypes.string,\n\tid: PropTypes.string,\n\timageAttributes: PropTypes.object,\n\timageClassName: PropTypes.string,\n\timageHeight: PropTypes.number,\n\timagePrefix: PropTypes.string,\n\timagePreview: PropTypes.bool,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tlinkAttributes: PropTypes.object,\n\tlinkClassName: PropTypes.string,\n\tlinkImage: PropTypes.bool,\n\tmultiple: PropTypes.bool,\n\tname: PropTypes.string,\n\treadOnly: PropTypes.bool,\n\tremoveText: PropTypes.string,\n\trequired: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nFile.defaultProps = {\n\tafterChange: null,\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\tdisabled: false,\n\temptyText: 'No file selected.',\n\tid: '',\n\timageAttributes: null,\n\timageClassName: '',\n\timageHeight: 100,\n\timagePrefix: '',\n\timagePreview: false,\n\tinputWrapperAttributes: null,\n\tinputWrapperClassName: '',\n\tlinkAttributes: null,\n\tlinkClassName: '',\n\tlinkImage: false,\n\tmultiple: false,\n\tname: '',\n\treadOnly: false,\n\tremoveText: 'Remove',\n\trequired: false,\n\tsetValue: null,\n\tvalue: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function ConditionalWrapper({ children, className, condition }) {\n\tif (!condition) {\n\t\treturn children;\n\t}\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n\nConditionalWrapper.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tclassName: PropTypes.string,\n\tcondition: PropTypes.any,\n};\n\nConditionalWrapper.defaultProps = {\n\tclassName: '',\n\tcondition: false,\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport ConditionalWrapper from './ConditionalWrapper';\nimport FormContext from './FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Input({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsetValue,\n\tsuffix,\n\ttype,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Input> component must be inside a <Form> component.');\n\t\t}\n\t\tif (type !== 'file') {\n\t\t\tcurrentValue = get(formState.row, name);\n\t\t\tif (currentValue === null || currentValue === undefined) {\n\t\t\t\tcurrentValue = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.value;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<ConditionalWrapper className=\"formosa-suffix-container\" condition={suffix}>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input ${className}`.trim()}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype={type}\n\t\t\t\tvalue={currentValue}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t{suffix && <span className=\"formosa-suffix\">{suffix}</span>}\n\t\t</ConditionalWrapper>\n\t);\n}\n\nInput.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.string,\n\t]),\n};\n\nInput.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tsuffix: '',\n\ttype: 'text',\n\tvalue: null,\n};\n","import React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Input from '../Input';\nimport PropTypes from 'prop-types';\n\nexport default function Password({\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\thideText,\n\tshowText,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst [tempType, setTempType] = useState('password');\n\tconst togglePassword = () => {\n\t\tif (tempType === 'password') {\n\t\t\tsetTempType('text');\n\t\t} else {\n\t\t\tsetTempType('password');\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={`formosa-password-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tautoCorrect=\"off\"\n\t\t\t\tclassName={`formosa-field__input--password formosa-prefix ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t\ttype={tempType}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName={`formosa-button formosa-button--toggle-password formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\tonClick={togglePassword}\n\t\t\t\ttype=\"button\"\n\t\t\t\t{...buttonAttributes}\n\t\t\t>\n\t\t\t\t{tempType === 'password' ? showText : hideText}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nPassword.propTypes = {\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\thideText: PropTypes.string,\n\tshowText: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nPassword.defaultProps = {\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\thideText: 'Hide',\n\tshowText: 'Show',\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Radio({\n\tafterChange,\n\tclassName,\n\tfieldsetAttributes,\n\tfieldsetClassName,\n\tinputAttributes,\n\titemAttributes,\n\titemClassName,\n\titemLabelAttributes,\n\titemLabelClassName,\n\titemSpanAttributes,\n\titemSpanClassName,\n\tlabel,\n\tlabelKey,\n\tlegend,\n\tloadingText,\n\tname,\n\toptions,\n\trequired,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [message, setMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url, false)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetMessage(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\">{loadingText}</div>);\n\t}\n\n\tif (message) {\n\t\treturn (<div className=\"formosa-field__error\">{message}</div>);\n\t}\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Radio> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tif (typeof currentValue === 'object') {\n\t\tcurrentValue = JSON.stringify(currentValue);\n\t}\n\n\tconst onChange = (e) => {\n\t\tlet newValue = e.target.value;\n\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\tnewValue = JSON.parse(newValue);\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\treturn (\n\t\t<fieldset className={`formosa-radio ${fieldsetClassName}`.trim()} {...fieldsetAttributes}>\n\t\t\t<legend className=\"formosa-radio__legend\">{legend}</legend>\n\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\tlet isJson = false;\n\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\tisJson = true;\n\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t}\n\n\t\t\t\tconst checked = currentValue === optionValueVal;\n\n\t\t\t\tlet itemProps = {};\n\t\t\t\tif (typeof itemAttributes === 'function') {\n\t\t\t\t\titemProps = itemAttributes(optionValue);\n\t\t\t\t} else if (itemAttributes && typeof itemAttributes === 'object') {\n\t\t\t\t\titemProps = itemAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet itemLabelProps = {};\n\t\t\t\tif (typeof itemLabelAttributes === 'function') {\n\t\t\t\t\titemLabelProps = itemLabelAttributes(optionValue);\n\t\t\t\t} else if (itemLabelAttributes && typeof itemLabelAttributes === 'object') {\n\t\t\t\t\titemLabelProps = itemLabelAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet inputProps = {};\n\t\t\t\tif (typeof inputAttributes === 'function') {\n\t\t\t\t\tinputProps = inputAttributes(optionValue);\n\t\t\t\t} else if (inputAttributes && typeof inputAttributes === 'object') {\n\t\t\t\t\tinputProps = inputAttributes;\n\t\t\t\t}\n\t\t\t\tif (isJson) {\n\t\t\t\t\tinputProps['data-json'] = true;\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\tinputProps.name = name;\n\t\t\t\t}\n\n\t\t\t\tlet itemSpanProps = {};\n\t\t\t\tif (typeof itemSpanAttributes === 'function') {\n\t\t\t\t\titemSpanProps = itemSpanAttributes(optionValue);\n\t\t\t\t} else if (itemSpanAttributes && typeof itemSpanAttributes === 'object') {\n\t\t\t\t\titemSpanProps = itemSpanAttributes;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={`formosa-radio__item ${itemClassName}`.trim()} key={optionValueVal} {...itemProps}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${itemLabelClassName}`.trim()}\n\t\t\t\t\t\t\t{...itemLabelProps}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\taria-label={optionValue.label}\n\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-radio__input ${className}`.trim()}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tvalue={optionValueVal}\n\t\t\t\t\t\t\t\t{...inputProps}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span aria-hidden=\"true\" className={`formosa-radio__span ${itemSpanClassName}`.trim()} {...itemSpanProps}>\n\t\t\t\t\t\t\t\t{optionValue.label}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</fieldset>\n\t);\n}\n\nRadio.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tfieldsetAttributes: PropTypes.object,\n\tfieldsetClassName: PropTypes.string,\n\tinputAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemClassName: PropTypes.string,\n\titemLabelAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemLabelClassName: PropTypes.string,\n\titemSpanAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemSpanClassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlegend: PropTypes.string,\n\tloadingText: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\trequired: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nRadio.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tfieldsetAttributes: null,\n\tfieldsetClassName: '',\n\tinputAttributes: null,\n\titemAttributes: null,\n\titemClassName: '',\n\titemLabelAttributes: null,\n\titemLabelClassName: '',\n\titemSpanAttributes: null,\n\titemSpanClassName: '',\n\tlabel: '',\n\tlabelKey: 'name',\n\tlegend: '',\n\tloadingText: 'Loading...',\n\tname: '',\n\toptions: null,\n\trequired: false,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n};\n","import Input from '../Input';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as SearchIcon } from '../../svg/search.svg';\n\nexport default function Search({\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className={`formosa-search-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tclassName={`formosa-field__input--search ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<SearchIcon\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={`formosa-icon--search ${iconClassName}`.trim()}\n\t\t\t\theight={iconHeight}\n\t\t\t\twidth={iconWidth}\n\t\t\t\t{...iconAttributes}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nSearch.propTypes = {\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSearch.defaultProps = {\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CaretIcon } from '../../svg/caret.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Select({\n\tafterChange,\n\tclassName,\n\thideBlank,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tlabelKey,\n\tloadingText,\n\tname,\n\toptionAttributes,\n\toptions,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [message, setMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url, false)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetMessage(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\">{loadingText}</div>);\n\t}\n\n\tif (message) {\n\t\treturn (<div className=\"formosa-field__error\">{message}</div>);\n\t}\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Select> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tif (typeof currentValue === 'object') {\n\t\tcurrentValue = JSON.stringify(currentValue);\n\t}\n\n\tconst onChange = (e) => {\n\t\tlet newValue = e.target.value;\n\t\tconst option = e.target.querySelector(`[value=\"${newValue.replace(/\"/g, '\\\\\"')}\"]`);\n\t\tif (option.getAttribute('data-json') === 'true') {\n\t\t\tnewValue = JSON.parse(newValue);\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<div className={`formosa-select-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<select\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--select ${className}`.trim()}\n\t\t\t\tonChange={onChange}\n\t\t\t\tvalue={currentValue}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t>\n\t\t\t\t{!hideBlank && <option value=\"\" />}\n\t\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\t\tlet isJson = false;\n\t\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet optionProps = {};\n\t\t\t\t\tif (typeof optionAttributes === 'function') {\n\t\t\t\t\t\toptionProps = optionAttributes(optionValue);\n\t\t\t\t\t} else if (optionAttributes && typeof optionAttributes === 'object') {\n\t\t\t\t\t\toptionProps = optionAttributes;\n\t\t\t\t\t}\n\t\t\t\t\tif (isJson) {\n\t\t\t\t\t\toptionProps['data-json'] = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<option key={optionValueVal} value={optionValueVal} {...optionProps}>{optionValue.label}</option>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</select>\n\t\t\t<CaretIcon\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={`formosa-icon--caret ${iconClassName}`.trim()}\n\t\t\t\theight={iconHeight}\n\t\t\t\twidth={iconWidth}\n\t\t\t\t{...iconAttributes}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\thideBlank: PropTypes.bool,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tloadingText: PropTypes.string,\n\tname: PropTypes.string,\n\toptionAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSelect.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\thideBlank: false,\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tlabelKey: 'name',\n\tloadingText: 'Loading...',\n\tname: '',\n\toptionAttributes: null,\n\toptions: null,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Textarea({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsetValue,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Textarea> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.value;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<textarea\n\t\t\tclassName={`formosa-field__input formosa-field__input--textarea ${className}`.trim()}\n\t\t\tonChange={onChange}\n\t\t\tvalue={currentValue}\n\t\t\t{...props}\n\t\t\t{...otherProps}\n\t\t/>\n\t);\n}\n\nTextarea.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.string,\n};\n\nTextarea.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tvalue: null,\n};\n","import Autocomplete from './Input/Autocomplete';\nimport Checkbox from './Input/Checkbox';\nimport CheckboxList from './Input/CheckboxList';\nimport File from './Input/File';\nimport Input from './Input';\nimport Password from './Input/Password';\nimport Radio from './Input/Radio';\nimport Search from './Input/Search';\nimport Select from './Input/Select';\nimport Textarea from './Input/Textarea';\n\nexport default (type, component) => {\n\tif (component) {\n\t\treturn component;\n\t}\n\tif (type === 'select') {\n\t\treturn Select;\n\t}\n\tif (type === 'textarea') {\n\t\treturn Textarea;\n\t}\n\tif (type === 'radio') {\n\t\treturn Radio;\n\t}\n\tif (type === 'checkbox') {\n\t\treturn Checkbox;\n\t}\n\tif (type === 'password') {\n\t\treturn Password;\n\t}\n\tif (type === 'search') {\n\t\treturn Search;\n\t}\n\tif (type === 'autocomplete') {\n\t\treturn Autocomplete;\n\t}\n\tif (type === 'file') {\n\t\treturn File;\n\t}\n\tif (type === 'checkbox-list') {\n\t\treturn CheckboxList;\n\t}\n\treturn Input;\n};\n","import getInputElement from './FieldInput';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function ExportableInput({\n\tcomponent,\n\ttype,\n\t...otherProps\n}) {\n\tconst InputComponent = getInputElement(type, component);\n\treturn (\n\t\t<InputComponent type={type} {...otherProps} />\n\t);\n}\n\nExportableInput.propTypes = {\n\tcomponent: PropTypes.func,\n\ttype: PropTypes.string,\n};\n\nExportableInput.defaultProps = {\n\tcomponent: null,\n\ttype: 'text',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Label({\n\tclassName,\n\thtmlFor,\n\tlabel,\n\tnote,\n\trequired,\n\ttype,\n\t...otherProps\n}) {\n\tlet labelClassName = 'formosa-label';\n\tif (required) {\n\t\tlabelClassName += ' formosa-label--required';\n\t}\n\n\tlet wrapperClassName = 'formosa-label-wrapper';\n\tif (type === 'checkbox') {\n\t\twrapperClassName += ' formosa-label-wrapper--checkbox';\n\t}\n\n\tconst hasFieldset = ['radio', 'checkbox-list'].includes(type);\n\tconst props = {};\n\tif (htmlFor && !hasFieldset) {\n\t\tprops.htmlFor = htmlFor;\n\t}\n\tif (hasFieldset) {\n\t\tprops['aria-hidden'] = true;\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassName}>\n\t\t\t<label className={`${labelClassName} ${className}`.trim()} {...props} {...otherProps}>{label}</label>\n\t\t\t{note && <span className=\"formosa-label__note\">{note}</span>}\n\t\t</div>\n\t);\n}\n\nLabel.propTypes = {\n\tclassName: PropTypes.string,\n\thtmlFor: PropTypes.string,\n\tlabel: PropTypes.string,\n\tnote: PropTypes.string,\n\trequired: PropTypes.bool,\n\ttype: PropTypes.string,\n};\n\nLabel.defaultProps = {\n\tclassName: '',\n\thtmlFor: '',\n\tlabel: '',\n\tnote: '',\n\trequired: false,\n\ttype: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport ConditionalWrapper from './ConditionalWrapper';\nimport Error from './Error';\nimport FormContext from './FormContext';\nimport getInputElement from './FieldInput';\nimport Label from './Label';\nimport PropTypes from 'prop-types';\n\nexport default function Field({\n\tcomponent,\n\tdisabled,\n\tid,\n\tinputInnerWrapperAttributes,\n\tinputInnerWrapperClassName,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tlabel,\n\tlabelAttributes,\n\tlabelClassName,\n\tlabelNote,\n\tlabelPosition,\n\tname,\n\tnote,\n\tprefix,\n\tpostfix,\n\treadOnly,\n\trequired,\n\tsuffix,\n\ttype,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tconst inputProps = { ...otherProps };\n\tif (id) {\n\t\tinputProps.id = id;\n\t}\n\tif (name) {\n\t\tinputProps.name = name;\n\t}\n\tif (disabled) {\n\t\tinputProps.disabled = disabled;\n\t}\n\tif (readOnly) {\n\t\tinputProps.readOnly = readOnly;\n\t}\n\tif (required) {\n\t\tinputProps.required = required;\n\t}\n\tif (suffix) {\n\t\tinputProps.suffix = suffix;\n\t}\n\tif (type) {\n\t\tinputProps.type = type;\n\t\tif (readOnly && type === 'number') {\n\t\t\tinputProps.type = 'text';\n\t\t}\n\t\tif (['radio', 'checkbox-list'].includes(type) && !inputProps.legend) {\n\t\t\tinputProps.legend = label;\n\t\t}\n\t}\n\n\tconst InputComponent = getInputElement(type, component);\n\tconst input = (\n\t\t<InputComponent {...inputProps} />\n\t);\n\n\tif (type === 'hidden') {\n\t\treturn input;\n\t}\n\n\tconst htmlFor = id || name;\n\n\tconst labelComponent = (\n\t\t<Label\n\t\t\tclassName={labelClassName}\n\t\t\thtmlFor={htmlFor}\n\t\t\tlabel={label}\n\t\t\tnote={labelNote}\n\t\t\trequired={required}\n\t\t\ttype={type}\n\t\t\t{...labelAttributes}\n\t\t/>\n\t);\n\n\tconst hasError = formState && name && Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst cleanName = htmlFor.replace(/[^a-z0-9_-]/gi, '');\n\tconst wrapperClassNameList = ['formosa-field'];\n\tif (cleanName) {\n\t\twrapperClassNameList.push(`formosa-field--${cleanName}`);\n\t}\n\tif (wrapperClassName) {\n\t\twrapperClassNameList.push(wrapperClassName);\n\t}\n\tif (hasError) {\n\t\twrapperClassNameList.push('formosa-field--has-error');\n\t}\n\tif (disabled) {\n\t\twrapperClassNameList.push('formosa-field--disabled');\n\t}\n\tif (readOnly) {\n\t\twrapperClassNameList.push('formosa-field--read-only');\n\t}\n\tif (prefix) {\n\t\twrapperClassNameList.push('formosa-field--has-prefix');\n\t}\n\tif (postfix) {\n\t\twrapperClassNameList.push('formosa-field--has-postfix');\n\t}\n\tif (labelPosition === 'after') {\n\t\twrapperClassNameList.push('formosa-field--label-after');\n\t}\n\n\tconst inputWrapperClassNameList = ['formosa-input-wrapper', `formosa-input-wrapper--${type}`];\n\tif (inputWrapperClassName) {\n\t\tinputWrapperClassNameList.push(inputWrapperClassName);\n\t}\n\tif (suffix) {\n\t\tinputWrapperClassNameList.push('formosa-field--has-suffix');\n\t}\n\n\tconst inputInnerWrapperClassNameList = ['formosa-input-inner-wrapper'];\n\tif (inputInnerWrapperClassName) {\n\t\tinputInnerWrapperClassNameList.push(inputInnerWrapperClassName);\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassNameList.join(' ')} {...wrapperAttributes}>\n\t\t\t{label && labelPosition === 'before' && labelComponent}\n\t\t\t{label && labelPosition === 'after' && <div className=\"formosa-label-wrapper\" />}\n\t\t\t<div className={inputWrapperClassNameList.join(' ')} {...inputWrapperAttributes}>\n\t\t\t\t<ConditionalWrapper\n\t\t\t\t\tclassName={inputInnerWrapperClassNameList.join(' ')}\n\t\t\t\t\tcondition={!!prefix || !!postfix}\n\t\t\t\t\t{...inputInnerWrapperAttributes}\n\t\t\t\t>\n\t\t\t\t\t{prefix}\n\t\t\t\t\t{input}\n\t\t\t\t\t{label && labelPosition === 'after' && labelComponent}\n\t\t\t\t\t{note && (\n\t\t\t\t\t\t<div className=\"formosa-field__note\">{note}</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{postfix}\n\t\t\t\t</ConditionalWrapper>\n\t\t\t\t<Error id={id} name={name} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nField.propTypes = {\n\tcomponent: PropTypes.func,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputInnerWrapperAttributes: PropTypes.object,\n\tinputInnerWrapperClassName: PropTypes.string,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tlabelNote: PropTypes.string,\n\tlabelPosition: PropTypes.string,\n\tname: PropTypes.string,\n\tnote: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n\treadOnly: PropTypes.bool,\n\trequired: PropTypes.bool,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nField.defaultProps = {\n\tcomponent: null,\n\tdisabled: false,\n\tid: null,\n\tinputInnerWrapperAttributes: {},\n\tinputInnerWrapperClassName: '',\n\tinputWrapperAttributes: {},\n\tinputWrapperClassName: '',\n\tlabel: '',\n\tlabelAttributes: {},\n\tlabelClassName: '',\n\tlabelNote: '',\n\tlabelPosition: 'before',\n\tname: '',\n\tnote: '',\n\tprefix: null,\n\tpostfix: null,\n\treadOnly: false,\n\trequired: false,\n\tsuffix: '',\n\ttype: 'text',\n\twrapperAttributes: {},\n\twrapperClassName: '',\n};\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\ttoasts: {},\n\t\tshowWarningPrompt: true,\n\t\taddToast: () => {},\n\t\tremoveToast: () => {},\n\t\tdisableWarningPrompt: () => {},\n\t\tenableWarningPrompt: () => {},\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\n\nexport default function Message() {\n\tconst { formState } = useContext(FormContext);\n\tconst hasErrors = Object.prototype.hasOwnProperty.call(formState.errors, '');\n\n\treturn (\n\t\t<>\n\t\t\t{hasErrors && (<p className=\"formosa-message formosa-message--error\">{formState.errors[''].join(' ')}</p>)}\n\t\t\t{formState.message && (<p className=\"formosa-message formosa-message--success\">{formState.message}</p>)}\n\t\t</>\n\t);\n}\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from './Helpers/Api';\nimport FormContext from './FormContext';\nimport FormosaContext from './FormosaContext';\nimport { getBody } from './Helpers/JsonApi';\nimport Message from './Message';\nimport PropTypes from 'prop-types';\n\nexport default function FormInner({\n\tafterNoSubmit,\n\tafterSubmit,\n\tbeforeSubmit,\n\tchildren,\n\tclearOnSubmit,\n\tdefaultRow,\n\tfilterBody,\n\tfilterValues,\n\thtmlId,\n\tid,\n\tmethod,\n\tparams,\n\tpath,\n\tpreventEmptyRequest,\n\tpreventEmptyRequestText,\n\trelationshipNames,\n\tshowMessage,\n\tsuccessMessageText,\n\tsuccessToastText,\n\t...otherProps\n}) {\n\tconst { formState, setFormState, getDirtyKeys } = useContext(FormContext);\n\tconst { addToast } = useContext(FormosaContext);\n\n\tconst submitApiRequest = (e) => {\n\t\te.preventDefault();\n\n\t\tconst dirtyKeys = getDirtyKeys();\n\t\tif (preventEmptyRequest && dirtyKeys.length <= 0) {\n\t\t\tif (preventEmptyRequestText) {\n\t\t\t\taddToast(preventEmptyRequestText);\n\t\t\t}\n\t\t\tif (afterNoSubmit) {\n\t\t\t\tafterNoSubmit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (beforeSubmit && !beforeSubmit(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet url = path;\n\t\tif (id) {\n\t\t\turl = `${path}/${id}`;\n\t\t}\n\t\tif (params) {\n\t\t\turl += `?${params}`;\n\t\t}\n\n\t\tconst body = getBody(\n\t\t\tmethod,\n\t\t\tpath,\n\t\t\tid,\n\t\t\tformState,\n\t\t\tdirtyKeys,\n\t\t\trelationshipNames,\n\t\t\tfilterBody,\n\t\t\tfilterValues\n\t\t);\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\terrors: {},\n\t\t\tmessage: '',\n\t\t});\n\n\t\tconst bodyString = body instanceof FormData ? body : JSON.stringify(body);\n\n\t\tApi.request(method, url, bodyString)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst newState = {\n\t\t\t\t\t...formState,\n\t\t\t\t\terrors: {},\n\t\t\t\t\tmessage: successMessageText,\n\t\t\t\t};\n\t\t\t\tif (clearOnSubmit) {\n\t\t\t\t\tnewState.originalRow = JSON.parse(JSON.stringify(defaultRow)); // Deep copy.\n\t\t\t\t\tnewState.row = JSON.parse(JSON.stringify(defaultRow)); // Deep copy.\n\t\t\t\t} else {\n\t\t\t\t\tnewState.originalRow = JSON.parse(JSON.stringify(formState.row)); // Deep copy.\n\t\t\t\t}\n\t\t\t\tsetFormState(newState);\n\n\t\t\t\tif (successToastText) {\n\t\t\t\t\taddToast(successToastText, 'success');\n\t\t\t\t}\n\t\t\t\tif (afterSubmit) {\n\t\t\t\t\tafterSubmit(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(response, 'errors')) {\n\t\t\t\t\taddToast('Error.', 'error');\n\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(response, 'message')) {\n\t\t\t\t\taddToast(response.message, 'error', 10000);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\taddToast('Server error.', 'error');\n\t\t\t\t\tthrow response;\n\t\t\t\t}\n\n\t\t\t\tconst errors = {};\n\t\t\t\tlet key;\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'source')) {\n\t\t\t\t\t\tkey = error.source.pointer.replace('/data/attributes/', '');\n\t\t\t\t\t\tkey = key.replace('/data/meta/', 'meta.');\n\t\t\t\t\t\tif (key.startsWith('/included/')) {\n\t\t\t\t\t\t\tconst i = key.replace(/^\\/included\\/(\\d+)\\/.+$/g, '$1');\n\t\t\t\t\t\t\tconst includedRecord = body.included[parseInt(i, 10)];\n\t\t\t\t\t\t\tkey = key.replace(/^\\/included\\/(\\d+)\\//g, `included.${includedRecord.type}.${includedRecord.id}.`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey = key.replace(/\\//g, '.');\n\t\t\t\t\t\tif (!document.querySelector(`[data-name=\"${key}\"].formosa-field__error`)) {\n\t\t\t\t\t\t\tkey = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tkey = '';\n\t\t\t\t\t}\n\t\t\t\t\tif (!Object.prototype.hasOwnProperty.call(errors, key)) {\n\t\t\t\t\t\terrors[key] = [];\n\t\t\t\t\t}\n\t\t\t\t\terrors[key].push(error.title);\n\t\t\t\t});\n\t\t\t\tsetFormState({\n\t\t\t\t\t...formState,\n\t\t\t\t\terrors,\n\t\t\t\t\tmessage: '',\n\t\t\t\t});\n\t\t\t});\n\t};\n\tif (method && path && !Object.prototype.hasOwnProperty.call(otherProps, 'onSubmit')) {\n\t\totherProps.onSubmit = submitApiRequest;\n\t}\n\tif (htmlId) {\n\t\totherProps.id = htmlId;\n\t}\n\n\treturn (\n\t\t<form {...otherProps}>\n\t\t\t{showMessage && <Message />}\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\nFormInner.propTypes = {\n\tafterNoSubmit: PropTypes.func,\n\tafterSubmit: PropTypes.func,\n\tbeforeSubmit: PropTypes.func,\n\tchildren: PropTypes.node,\n\tclearOnSubmit: PropTypes.bool,\n\tdefaultRow: PropTypes.object,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\thtmlId: PropTypes.string,\n\tid: PropTypes.string,\n\tmethod: PropTypes.string,\n\tparams: PropTypes.string,\n\tpath: PropTypes.string,\n\tpreventEmptyRequest: PropTypes.bool,\n\tpreventEmptyRequestText: PropTypes.oneOfType([\n\t\tPropTypes.bool,\n\t\tPropTypes.string,\n\t]),\n\trelationshipNames: PropTypes.array,\n\tshowMessage: PropTypes.bool,\n\tsuccessMessageText: PropTypes.string,\n\tsuccessToastText: PropTypes.string,\n};\n\nFormInner.defaultProps = {\n\tafterNoSubmit: null,\n\tafterSubmit: null,\n\tbeforeSubmit: null,\n\tchildren: null,\n\tclearOnSubmit: false,\n\tdefaultRow: {},\n\tfilterBody: null,\n\tfilterValues: null,\n\thtmlId: '',\n\tid: '',\n\tmethod: null,\n\tparams: '',\n\tpath: null,\n\tpreventEmptyRequest: false,\n\tpreventEmptyRequestText: 'No changes to save.',\n\trelationshipNames: [],\n\tshowMessage: true,\n\tsuccessMessageText: '',\n\tsuccessToastText: '',\n};\n","import React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport FormInner from './FormInner';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\nimport set from 'set-value';\n\nexport default function Form({\n\tchildren,\n\trow,\n\tsetRow,\n\t...otherProps\n}) {\n\tconst [formState, setFormState] = useState({\n\t\terrors: {},\n\t\tfiles: {},\n\t\tmessage: '',\n\t\toriginalRow: JSON.parse(JSON.stringify(row)), // Deep copy.\n\t\trow,\n\t\tsetRow,\n\t});\n\n\tuseEffect(() => {\n\t\tif (JSON.stringify(row) === JSON.stringify(formState.row)) {\n\t\t\treturn;\n\t\t}\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\trow,\n\t\t});\n\t}, [row]);\n\n\tconst getDirtyKeys = (r, originalRow) => {\n\t\tlet dirtyKeys = [];\n\n\t\tObject.keys(r).forEach((key) => {\n\t\t\t// Get the old and new values.\n\t\t\tlet oldValue = get(originalRow, key);\n\t\t\tlet newValue = get(r, key);\n\t\t\tconst isArray = Array.isArray(oldValue) || Array.isArray(newValue);\n\n\t\t\tif (isArray) {\n\t\t\t\tlet itemDirtyKeys;\n\t\t\t\tObject.keys(newValue).forEach((newIndex) => {\n\t\t\t\t\tconst oldIndex = oldValue ? oldValue.findIndex((o) => (o.id === newValue[newIndex].id)) : -1;\n\t\t\t\t\titemDirtyKeys = getDirtyKeys(newValue[newIndex], oldIndex > -1 ? oldValue[oldIndex] : {});\n\t\t\t\t\titemDirtyKeys = itemDirtyKeys.map((k2) => `${key}.${newIndex}.${k2}`);\n\t\t\t\t\tdirtyKeys = dirtyKeys.concat(itemDirtyKeys);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Stringify for easier comparison.\n\t\t\tif (typeof oldValue !== 'string') {\n\t\t\t\toldValue = JSON.stringify(oldValue);\n\t\t\t}\n\t\t\tif (typeof newValue !== 'string') {\n\t\t\t\tnewValue = JSON.stringify(newValue);\n\t\t\t}\n\n\t\t\tif (newValue !== oldValue) {\n\t\t\t\tdirtyKeys.push(key);\n\t\t\t}\n\t\t});\n\n\t\treturn dirtyKeys;\n\t};\n\n\tconst setValues = (e, name, value, afterChange = null, files = null) => {\n\t\tconst newRow = { ...formState.row };\n\t\tset(newRow, name, value);\n\n\t\tif (afterChange) {\n\t\t\tconst additionalChanges = afterChange(e, newRow, value);\n\t\t\tObject.keys(additionalChanges).forEach((key) => {\n\t\t\t\tset(newRow, key, additionalChanges[key]);\n\t\t\t});\n\t\t}\n\n\t\tconst newFormState = {\n\t\t\t...formState,\n\t\t\trow: newRow,\n\t\t};\n\t\tif (files !== null) {\n\t\t\tset(newFormState, `files.${name}`, files);\n\t\t}\n\n\t\tsetFormState(newFormState);\n\t\tif (formState.setRow) {\n\t\t\tformState.setRow(newRow);\n\t\t}\n\t};\n\n\treturn (\n\t\t<FormContext.Provider\n\t\t\tvalue={{\n\t\t\t\tformState,\n\t\t\t\tsetFormState,\n\t\t\t\tgetDirtyKeys: () => (getDirtyKeys(formState.row, formState.originalRow)),\n\t\t\t\tsetValues,\n\t\t\t}}\n\t\t>\n\t\t\t<FormInner {...otherProps}>\n\t\t\t\t{children}\n\t\t\t</FormInner>\n\t\t</FormContext.Provider>\n\t);\n}\n\nForm.propTypes = {\n\tchildren: PropTypes.node,\n\trow: PropTypes.object,\n\tsetRow: PropTypes.func,\n};\n\nForm.defaultProps = {\n\tchildren: null,\n\trow: {},\n\tsetRow: null,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nexport default function Spinner({ loadingText }) {\n\tconst { promiseInProgress } = usePromiseTracker();\n\tif (!promiseInProgress) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<div className=\"formosa-spinner formosa-spinner--fullscreen\">{loadingText}</div>\n\t);\n}\n\nSpinner.propTypes = {\n\tloadingText: PropTypes.string,\n};\n\nSpinner.defaultProps = {\n\tloadingText: 'Loading...',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CloseIcon } from '../svg/x.svg';\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\n\nexport default function Toast({\n\tclassName,\n\tid,\n\tmilliseconds,\n\ttext,\n}) {\n\tconst { removeToast } = useContext(FormosaContext);\n\n\treturn (\n\t\t<div className={`formosa-toast ${className}`.trim()} style={{ animationDuration: `${milliseconds}ms` }}>\n\t\t\t<div className=\"formosa-toast__text\">{text}</div>\n\t\t\t<button className=\"formosa-toast__close\" onClick={() => (removeToast(id))} type=\"button\">\n\t\t\t\t<CloseIcon aria-hidden=\"true\" className=\"formosa-toast__close-icon\" height={12} width={12} />\n\t\t\t\tClose\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nToast.propTypes = {\n\tclassName: PropTypes.string,\n\tid: PropTypes.string.isRequired,\n\tmilliseconds: PropTypes.number.isRequired,\n\ttext: PropTypes.string.isRequired,\n};\n\nToast.defaultProps = {\n\tclassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport Toast from './Toast';\n\nexport default function ToastContainer() {\n\tconst { toasts } = useContext(FormosaContext);\n\treturn (\n\t\t<div className=\"formosa-toast-container\">\n\t\t\t{Object.keys(toasts).map((id) => (\n\t\t\t\t<Toast\n\t\t\t\t\tclassName={toasts[id].className}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tid={id}\n\t\t\t\t\tmilliseconds={toasts[id].milliseconds}\n\t\t\t\t\ttext={toasts[id].text}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n","import React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\nimport Spinner from './Spinner';\nimport ToastContainer from './ToastContainer';\n\nexport default function FormContainer({ children, loadingText }) {\n\tconst [showWarningPrompt, setShowWarningPrompt] = useState(true);\n\tconst [toasts, setToasts] = useState({});\n\n\tconst removeToast = (toastId) => {\n\t\tconst newToasts = { ...toasts };\n\t\tif (Object.prototype.hasOwnProperty.call(toasts, toastId)) {\n\t\t\tdelete newToasts[toastId];\n\t\t\tsetToasts(newToasts);\n\t\t}\n\t};\n\n\tconst addToast = (text, type = '', milliseconds = 5000) => {\n\t\tconst toastId = new Date().getTime();\n\t\tconst toast = {\n\t\t\tclassName: type ? `formosa-toast--${type}` : '',\n\t\t\ttext,\n\t\t\tmilliseconds,\n\t\t};\n\t\tconst newToasts = {\n\t\t\t...toasts,\n\t\t\t[toastId]: toast,\n\t\t};\n\t\tsetToasts(newToasts);\n\t\tsetTimeout(() => {\n\t\t\tremoveToast(toastId);\n\t\t}, milliseconds);\n\t};\n\n\tconst disableWarningPrompt = () => {\n\t\tsetShowWarningPrompt(false);\n\t};\n\n\tconst enableWarningPrompt = () => {\n\t\tsetShowWarningPrompt(true);\n\t};\n\n\treturn (\n\t\t<FormosaContext.Provider\n\t\t\tvalue={{\n\t\t\t\ttoasts,\n\t\t\t\tshowWarningPrompt,\n\t\t\t\taddToast,\n\t\t\t\tremoveToast,\n\t\t\t\tdisableWarningPrompt,\n\t\t\t\tenableWarningPrompt,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t\t<Spinner loadingText={loadingText} />\n\t\t\t<ToastContainer />\n\t\t</FormosaContext.Provider>\n\t);\n}\n\nFormContainer.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tloadingText: PropTypes.string,\n};\n\nFormContainer.defaultProps = {\n\tloadingText: 'Loading...',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Submit({\n\tclassName,\n\tlabel,\n\tprefix,\n\tpostfix,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className=\"formosa-field formosa-field--submit\">\n\t\t\t<div className=\"formosa-label-wrapper formosa-label-wrapper--submit\" />\n\t\t\t<div className=\"formosa-input-wrapper formosa-input-wrapper--submit\">\n\t\t\t\t{prefix}\n\t\t\t\t<button\n\t\t\t\t\tclassName={`formosa-button formosa-button--submit ${className}`.trim()}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t{...otherProps}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</button>\n\t\t\t\t{postfix}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSubmit.propTypes = {\n\tclassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n};\n\nSubmit.defaultProps = {\n\tclassName: '',\n\tlabel: 'Submit',\n\tprefix: null,\n\tpostfix: null,\n};\n","import './style.scss';\nimport api from './js/Helpers/Api';\nimport { ReactComponent as checkIcon } from './svg/check.svg';\nimport error from './js/Error';\nimport exportableInput from './js/ExportableInput';\nimport field from './js/Field';\nimport form from './js/Form';\nimport formContainer from './js/FormContainer';\nimport formContext from './js/FormContext';\nimport formosaContext from './js/FormosaContext';\nimport label from './js/Label';\nimport message from './js/Message';\nimport submit from './js/Submit';\n\nexport const Api = api;\nexport const CheckIcon = checkIcon;\nexport const Error = error;\nexport const Field = field;\nexport const Form = form;\nexport const FormContainer = formContainer;\nexport const FormContext = formContext;\nexport const FormosaContext = formosaContext;\nexport const Input = exportableInput;\nexport const Label = label;\nexport const Message = message;\nexport const Submit = submit;\n"],"names":["findIncluded","included","id","type","mainRecord","output","Object","prototype","hasOwnProperty","call","attributes","meta","find","data","deserializeSingle","otherRows","includedRecord","keys","relationships","forEach","relationshipName","Array","isArray","rel","i","deserialize","body","push","cleanSingleRelationship","values","cleanRelationship","map","value","getIncludedItemData","relName","childRelationshipNames","dirtyRelationships","relIndex","relData","startsWith","key","includes","childRel","set","hasAttributes","length","hasRelationships","getIncluded","dirtyKeys","relationshipNames","currentKeys","split","k","get","join","shift","unset","obj","lastKey","pop","o","getBody","method","formState","filterBody","filterValues","row","fileKeys","files","firstPartOfKey","replace","JSON","parse","filenames","filter","filename","formData","FormData","append","stringify","Api","url","showSpinner","request","delete","post","put","options","headers","getToken","Authorization","fullUrl","process","env","REACT_APP_API_URL","event","CustomEvent","cancelable","detail","document","dispatchEvent","Promise","resolve","promise","fetch","then","response","ok","json","status","catch","error","SyntaxError","errors","title","trackPromise","window","FORMOSA_TOKEN","setToken","token","React","createContext","message","originalRow","setRow","Error","name","useContext","FormContext","hasError","props","e","propTypes","PropTypes","string","defaultProps","normalizeOptions","labelKey","valueKey","option","label","escapeRegExp","toSlug","s","toLowerCase","filterByKey","records","escapedValue","record","recordValue","toString","match","RegExp","sort","a","b","aValue","bValue","aPos","indexOf","bPos","localeCompare","Autocomplete","afterAdd","afterChange","clearable","clearButtonAttributes","clearButtonClassName","clearIconAttributes","clearIconHeight","clearIconWidth","clearText","disabled","inputClassName","labelFn","loadingText","max","optionButtonAttributes","optionButtonClassName","optionLabelFn","optionListAttributes","optionListClassName","optionListItemAttributes","optionListItemClassName","placeholder","readOnly","removeButtonAttributes","removeButtonClassName","removeIconAttributes","removeIconHeight","removeIconWidth","removeText","setValue","showLoading","valueListItemAttributes","wrapperAttributes","wrapperClassName","otherProps","setValues","clearButtonRef","useRef","inputRef","removeButtonRef","setFilter","useState","isOpen","setIsOpen","highlightedIndex","setHighlightedIndex","optionValues","setOptionValues","isLoading","setIsLoading","setMessage","useEffect","currentValue","undefined","currentValueLength","isSelected","findIndex","v","filteredOptions","focus","current","addValue","newValue","target","removeValue","index","splice","onChange","onFocus","onKeyDown","filterValue","preventDefault","onKeyUp","onClickOption","val","getAttribute","onClickRemoveOption","button","tagName","toUpperCase","parentNode","clear","showClear","className","canAddValues","wrapperProps","trim","isJson","valueListItemProps","removeButtonProps","removeIconProps","CloseIcon","optionClassName","optionListItemProps","optionButtonProps","func","bool","object","number","oneOfType","array","arrayOf","Checkbox","iconAttributes","iconClassName","iconHeight","iconWidth","checked","CheckIcon","CheckboxList","fieldsetAttributes","fieldsetClassName","inputAttributes","itemAttributes","itemClassName","itemLabelAttributes","itemLabelClassName","itemSpanAttributes","itemSpanClassName","legend","currentValueStringified","optionValue","optionValueVal","itemProps","itemLabelProps","inputProps","iconProps","itemSpanProps","File","buttonAttributes","buttonClassName","emptyText","imageAttributes","imageClassName","imageHeight","imagePrefix","imagePreview","inputWrapperAttributes","inputWrapperClassName","linkAttributes","linkClassName","linkImage","multiple","required","hasValue","getFilenames","FileList","numFiles","item","getSrcs","URL","createObjectURL","v2","setFilenames","srcs","setSrcs","newFiles","onRemove","prefixClassName","hiddenProps","buttonProps","src","img","ConditionalWrapper","children","condition","node","isRequired","any","Input","suffix","Password","hideText","showText","tempType","setTempType","togglePassword","Radio","Search","SearchIcon","Select","hideBlank","optionAttributes","querySelector","optionProps","CaretIcon","Textarea","component","ExportableInput","InputComponent","getInputElement","Label","htmlFor","note","labelClassName","hasFieldset","Field","inputInnerWrapperAttributes","inputInnerWrapperClassName","labelAttributes","labelNote","labelPosition","prefix","postfix","input","labelComponent","cleanName","wrapperClassNameList","inputWrapperClassNameList","inputInnerWrapperClassNameList","toasts","showWarningPrompt","addToast","removeToast","disableWarningPrompt","enableWarningPrompt","Message","hasErrors","FormInner","afterNoSubmit","afterSubmit","beforeSubmit","clearOnSubmit","defaultRow","htmlId","params","path","preventEmptyRequest","preventEmptyRequestText","showMessage","successMessageText","successToastText","setFormState","getDirtyKeys","FormosaContext","submitApiRequest","bodyString","newState","source","pointer","parseInt","onSubmit","Form","r","oldValue","itemDirtyKeys","newIndex","oldIndex","k2","concat","newRow","additionalChanges","newFormState","Spinner","promiseInProgress","usePromiseTracker","Toast","milliseconds","text","animationDuration","ToastContainer","FormContainer","setShowWarningPrompt","setToasts","toastId","newToasts","Date","getTime","toast","setTimeout","Submit","api","checkIcon","field","form","formContainer","formContext","formosaContext","exportableInput","submit"],"mappings":"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"}