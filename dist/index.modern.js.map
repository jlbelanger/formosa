{"version":3,"file":"index.modern.js","sources":["../src/js/Alert.js","../src/js/Helpers/JsonApi.js","../src/js/Helpers/Api.js","../src/js/FormContext.js","../src/js/Error.js","../src/js/Helpers/Options.js","../src/js/Input/Autocomplete.js","../src/js/Input/Checkbox.js","../src/js/Input/CheckboxList.js","../src/js/Input/File.js","../src/js/ConditionalWrapper.js","../src/js/Input.js","../src/js/Input/Password.js","../src/js/Input/Radio.js","../src/js/Input/Search.js","../src/js/Input/Select.js","../src/js/Input/Textarea.js","../src/js/FieldInput.js","../src/js/ExportableInput.js","../src/js/Label.js","../src/js/Field.js","../src/js/FormosaContext.js","../src/js/FormInner.js","../src/js/Form.js","../src/js/FormAlert.js","../src/js/Spinner.js","../src/js/Toast.js","../src/js/ToastContainer.js","../src/js/FormContainer.js","../src/js/Submit.js","../src/index.js"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Alert({ className, children, type, ...otherProps }) {\n\tif (!children) {\n\t\treturn null;\n\t}\n\n\tlet alertClass = 'formosa-alert';\n\tif (type) {\n\t\talertClass += ` formosa-alert--${type}`;\n\t}\n\tif (className) {\n\t\talertClass += ` ${className}`;\n\t}\n\n\treturn (\n\t\t<div aria-live=\"polite\" className={alertClass} role=\"alert\" {...otherProps}>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n\nAlert.propTypes = {\n\tclassName: PropTypes.string,\n\tchildren: PropTypes.node.isRequired,\n\ttype: PropTypes.string,\n};\n\nAlert.defaultProps = {\n\tclassName: '',\n\ttype: null,\n};\n","import get from 'get-value';\nimport set from 'set-value';\n\nconst findIncluded = (included, id, type, mainRecord) => {\n\tif (mainRecord && id === mainRecord.id && type === mainRecord.type) {\n\t\tconst output = {\n\t\t\tid: mainRecord.id,\n\t\t\ttype: mainRecord.type,\n\t\t};\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'attributes')) {\n\t\t\toutput.attributes = mainRecord.attributes;\n\t\t}\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'meta')) {\n\t\t\toutput.meta = mainRecord.meta;\n\t\t}\n\t\treturn output;\n\t}\n\treturn included.find((data) => (data.id === id && data.type === type));\n};\n\nconst deserializeSingle = (data, otherRows = [], included = [], mainRecord = null) => {\n\tif (!data) {\n\t\treturn data;\n\t}\n\tconst output = {\n\t\tid: data.id,\n\t\ttype: data.type,\n\t\t...data.attributes,\n\t};\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'relationships')) {\n\t\tlet includedRecord;\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\toutput[relationshipName] = data.relationships[relationshipName].data;\n\t\t\tif (Array.isArray(output[relationshipName])) {\n\t\t\t\toutput[relationshipName].forEach((rel, i) => {\n\t\t\t\t\tincludedRecord = findIncluded(included, rel.id, rel.type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tincludedRecord = findIncluded(otherRows, rel.id, rel.type, mainRecord);\n\t\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (output[relationshipName] !== null) {\n\t\t\t\tincludedRecord = findIncluded(included, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\tif (includedRecord) {\n\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t} else {\n\t\t\t\t\tincludedRecord = findIncluded(otherRows, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'meta')) {\n\t\toutput.meta = data.meta;\n\t}\n\n\treturn output;\n};\n\nexport const deserialize = (body) => {\n\tif (Array.isArray(body.data)) {\n\t\tconst output = [];\n\t\tbody.data.forEach((data) => {\n\t\t\toutput.push(deserializeSingle(data, body.data, body.included, null));\n\t\t});\n\n\t\tif (Object.prototype.hasOwnProperty.call(body, 'meta')) {\n\t\t\treturn { data: output, meta: body.meta };\n\t\t}\n\n\t\treturn output;\n\t}\n\treturn deserializeSingle(body.data, [], body.included, body.data);\n};\n\nconst cleanSingleRelationship = (values) => ({\n\tid: values.id,\n\ttype: values.type,\n});\n\nconst cleanRelationship = (values) => {\n\tif (Array.isArray(values)) {\n\t\treturn values.map((value) => cleanSingleRelationship(value));\n\t}\n\treturn cleanSingleRelationship(values);\n};\n\nconst getIncludedItemData = (rel, relName, childRelationshipNames, dirtyRelationships, relIndex = null) => {\n\tconst relData = {\n\t\tid: rel.id,\n\t\ttype: rel.type,\n\t\tattributes: {},\n\t\trelationships: {},\n\t};\n\n\tif (rel.id.startsWith('temp-')) {\n\t\t// This is a new record; include all attributes.\n\t\tObject.keys(rel).forEach((key) => {\n\t\t\tif (key !== 'id' && key !== 'type') {\n\t\t\t\tif (childRelationshipNames[relName].includes(key)) {\n\t\t\t\t\tconst childRel = {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid: rel[key].id,\n\t\t\t\t\t\t\ttype: rel[key].type,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tset(relData.relationships, key, childRel);\n\t\t\t\t} else {\n\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} else {\n\t\t// This is an existing record; include only the dirty attributes.\n\t\tObject.keys(rel).forEach((key) => {\n\t\t\tif (key !== 'id' && key !== 'type') {\n\t\t\t\tif (relIndex === null) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyRelationships[relName], key)) {\n\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t}\n\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(dirtyRelationships[relName], relIndex)) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyRelationships[relName][relIndex], key)) {\n\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tconst hasAttributes = Object.keys(relData.attributes).length > 0;\n\tif (!hasAttributes) {\n\t\tdelete relData.attributes;\n\t}\n\tconst hasRelationships = Object.keys(relData.relationships).length > 0;\n\tif (!hasRelationships) {\n\t\tdelete relData.relationships;\n\t}\n\n\tif (!hasAttributes && !hasRelationships) {\n\t\treturn null;\n\t}\n\n\treturn relData;\n};\n\nconst getIncluded = (data, dirtyKeys, relationshipNames) => {\n\tconst included = [];\n\n\tconst dirtyRelationships = {};\n\tdirtyKeys.forEach((key) => {\n\t\tconst currentKeys = [];\n\t\tkey.split('.').forEach((k) => {\n\t\t\tcurrentKeys.push(k);\n\t\t\tif (typeof get(dirtyRelationships, currentKeys.join('.')) === 'undefined') {\n\t\t\t\tset(dirtyRelationships, currentKeys.join('.'), {});\n\t\t\t}\n\t\t});\n\t});\n\n\tconst childRelationshipNames = {};\n\trelationshipNames.forEach((relName) => {\n\t\tchildRelationshipNames[relName] = [];\n\t\tif (relName.includes('.')) {\n\t\t\tconst keys = relName.split('.');\n\t\t\tchildRelationshipNames[keys.shift()].push(keys.join('.'));\n\t\t}\n\t});\n\n\tObject.keys(dirtyRelationships).forEach((relName) => {\n\t\tif (Object.prototype.hasOwnProperty.call(data.relationships, relName)) {\n\t\t\tlet relData;\n\t\t\tif (Array.isArray(data.relationships[relName].data)) {\n\t\t\t\tObject.keys(data.relationships[relName].data).forEach((relIndex) => {\n\t\t\t\t\tconst rel = data.relationships[relName].data[relIndex];\n\t\t\t\t\tif (rel) {\n\t\t\t\t\t\trelData = getIncludedItemData(rel, relName, childRelationshipNames, dirtyRelationships, relIndex);\n\t\t\t\t\t\tif (relData) {\n\t\t\t\t\t\t\tincluded.push(relData);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst rel = data.relationships[relName].data;\n\t\t\t\tif (rel) {\n\t\t\t\t\trelData = getIncludedItemData(rel, relName, childRelationshipNames, dirtyRelationships);\n\t\t\t\t\tif (relData) {\n\t\t\t\t\t\tincluded.push(relData);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\treturn included;\n};\n\nconst unset = (obj, key) => {\n\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\treturn delete obj[key];\n\t}\n\n\tconst keys = key.split('.');\n\tconst lastKey = keys.pop();\n\tlet o = obj;\n\tkeys.forEach((k) => {\n\t\to = o[k];\n\t});\n\treturn delete o[lastKey];\n};\n\nconst appendToFormData = (obj, formData, prefix = '') => {\n\tObject.entries(obj).forEach((entry) => {\n\t\tconst [key, value] = entry;\n\t\tconst newKey = prefix ? `${prefix}[${key}]` : key;\n\t\tif (typeof value === 'object') {\n\t\t\tformData = appendToFormData(value, formData, newKey);\n\t\t} else {\n\t\t\tformData.append(newKey, JSON.stringify(value));\n\t\t}\n\t});\n\treturn formData;\n};\n\nexport const getBody = (\n\tmethod,\n\ttype,\n\tid,\n\tformState,\n\tdirtyKeys,\n\trelationshipNames,\n\tfilterBody,\n\tfilterValues\n) => {\n\tlet body = null;\n\n\tif (method === 'PUT' || method === 'POST') {\n\t\t// Initialize the basic body structure.\n\t\tconst data = {\n\t\t\ttype,\n\t\t\tattributes: {},\n\t\t\trelationships: {},\n\t\t\tmeta: {},\n\t\t};\n\t\tif (method === 'PUT' && id) {\n\t\t\tdata.id = id;\n\t\t}\n\n\t\t// Allow the app to modify values before they are sorted into sections.\n\t\tlet values = { ...formState.row };\n\t\tif (filterValues) {\n\t\t\tvalues = filterValues(values);\n\t\t}\n\n\t\t// Get keys for file fields.\n\t\tconst fileKeys = Object.keys(formState.files);\n\n\t\t// If this is an update request, only include keys for changed values.\n\t\t// Otherwise (this must be an add request), include keys for all values.\n\t\tconst keys = method === 'PUT' ? dirtyKeys : Object.keys(formState.row);\n\n\t\t// Sort each value into the proper section.\n\t\tkeys.forEach((key) => {\n\t\t\tconst firstPartOfKey = key.replace(/\\..+$/, '');\n\t\t\tif (relationshipNames.includes(firstPartOfKey)) {\n\t\t\t\tdata.relationships[firstPartOfKey] = {\n\t\t\t\t\tdata: get(values, firstPartOfKey),\n\t\t\t\t};\n\t\t\t} else if (relationshipNames.includes(key)) {\n\t\t\t\tdata.relationships[key] = {\n\t\t\t\t\tdata: get(values, firstPartOfKey),\n\t\t\t\t};\n\t\t\t} else if (key.startsWith('meta.')) {\n\t\t\t\tset(data, key, get(values, key));\n\t\t\t} else if (key === 'meta') {\n\t\t\t\tdata.meta = values.meta;\n\t\t\t} else if (fileKeys.includes(key)) {\n\t\t\t\tunset(data.attributes, key);\n\t\t\t} else {\n\t\t\t\tset(data.attributes, key, get(values, key));\n\t\t\t}\n\t\t});\n\n\t\tbody = { data };\n\n\t\tconst included = getIncluded(data, dirtyKeys, relationshipNames);\n\t\tif (included.length > 0) {\n\t\t\tbody.included = included;\n\t\t}\n\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\tif (typeof data.relationships[relationshipName].data === 'string') {\n\t\t\t\tif (data.relationships[relationshipName].data === '') {\n\t\t\t\t\tdata.relationships[relationshipName].data = null;\n\t\t\t\t} else {\n\t\t\t\t\tdata.relationships[relationshipName].data = JSON.parse(data.relationships[relationshipName].data);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (data.relationships[relationshipName].data) {\n\t\t\t\tdata.relationships[relationshipName].data = cleanRelationship(data.relationships[relationshipName].data);\n\t\t\t}\n\t\t});\n\n\t\t// Allow the app to modify values after they have been sorted into sections.\n\t\tif (filterBody) {\n\t\t\tbody = filterBody(body, formState.row);\n\t\t}\n\n\t\t// Remove any sections with no values.\n\t\tif (Object.keys(data.attributes).length <= 0) {\n\t\t\tdelete data.attributes;\n\t\t}\n\t\tif (Object.keys(data.meta).length <= 0) {\n\t\t\tdelete data.meta;\n\t\t}\n\t\tif (Object.keys(data.relationships).length <= 0) {\n\t\t\tdelete data.relationships;\n\t\t}\n\n\t\t// Handle file fields.\n\t\tconst filenames = fileKeys.filter((filename) => (formState.files[filename] !== false));\n\t\tif (filenames.length > 0) {\n\t\t\tconst formData = appendToFormData(body, new FormData());\n\t\t\tformData.append('meta[files]', JSON.stringify(filenames));\n\n\t\t\tfilenames.forEach((filename) => {\n\t\t\t\tformData.append(filename, formState.files[filename]);\n\t\t\t});\n\n\t\t\tbody = formData;\n\t\t}\n\t}\n\n\treturn body;\n};\n","import { deserialize } from './JsonApi';\nimport { trackPromise } from 'react-promise-tracker';\n\nexport default class Api {\n\tstatic instance() {\n\t\tconst responses = {};\n\t\treturn (url, showSpinner) => {\n\t\t\tif (!Object.prototype.hasOwnProperty.call(responses, url)) {\n\t\t\t\tresponses[url] = Api.get(url, showSpinner);\n\t\t\t}\n\t\t\treturn responses[url];\n\t\t};\n\t}\n\n\tstatic get(url, showSpinner = true) {\n\t\treturn Api.request('GET', url, null, showSpinner);\n\t}\n\n\tstatic delete(url, showSpinner = true) {\n\t\treturn Api.request('DELETE', url, null, showSpinner);\n\t}\n\n\tstatic post(url, body, showSpinner = true) {\n\t\treturn Api.request('POST', url, body, showSpinner);\n\t}\n\n\tstatic put(url, body, showSpinner = true) {\n\t\treturn Api.request('PUT', url, body, showSpinner);\n\t}\n\n\tstatic request(method, url, body = null, showSpinner = true) {\n\t\tconst options = {\n\t\t\tmethod,\n\t\t\theaders: {\n\t\t\t\tAccept: 'application/json',\n\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t},\n\t\t};\n\t\tif (typeof body === 'string') {\n\t\t\toptions.headers['Content-Type'] = 'application/json';\n\t\t}\n\t\tif (Api.getToken()) {\n\t\t\toptions.headers.Authorization = `Bearer ${Api.getToken()}`;\n\t\t}\n\t\tif (body) {\n\t\t\toptions.body = body;\n\t\t}\n\n\t\tlet fullUrl = url;\n\t\tif (process.env.REACT_APP_API_URL && !url.startsWith('http')) {\n\t\t\tfullUrl = `${process.env.REACT_APP_API_URL.replace(/\\/$/, '')}/${url.replace(/^\\//, '')}`;\n\t\t}\n\n\t\tconst event = new CustomEvent('formosaApiRequest', { cancelable: true, detail: { url: fullUrl, options } });\n\t\tif (!document.dispatchEvent(event)) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst promise = fetch(fullUrl, options)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tif (error instanceof SyntaxError) {\n\t\t\t\t\t\t\t\tthrow { // eslint-disable-line no-throw-literal\n\t\t\t\t\t\t\t\t\terrors: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'Unable to connect to the server. Please try again later.',\n\t\t\t\t\t\t\t\t\t\t\tstatus: '500',\n\t\t\t\t\t\t\t\t\t\t\tdetail: 'The server returned invalid JSON.',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\t\tjson.status = response.status;\n\t\t\t\t\t\t\tthrow json;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (response.status === 204) {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((json) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(json, 'data')) {\n\t\t\t\t\treturn deserialize(json);\n\t\t\t\t}\n\t\t\t\treturn json;\n\t\t\t});\n\n\t\treturn showSpinner ? trackPromise(promise) : promise;\n\t}\n\n\tstatic getToken() {\n\t\treturn window.FORMOSA_TOKEN;\n\t}\n\n\tstatic setToken(token) {\n\t\twindow.FORMOSA_TOKEN = token;\n\t}\n\n\tstatic deserialize(json) {\n\t\tif (Object.prototype.hasOwnProperty.call(json, 'data')) {\n\t\t\treturn deserialize(json);\n\t\t}\n\t\treturn json;\n\t}\n}\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\talertClass: '',\n\t\talertText: '',\n\t\terrors: {},\n\t\tfiles: {},\n\t\toriginalRow: {},\n\t\trow: {},\n\t\tresponse: null,\n\t\tsetRow: null,\n\t\ttoastClass: '',\n\t\ttoastText: '',\n\t\tuuid: null,\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport PropTypes from 'prop-types';\n\nexport default function Error({\n\tid,\n\tname,\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst hasError = formState && Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst props = {};\n\tif (name) {\n\t\t// Used for matching the attribute name from the API to this error element.\n\t\tprops['data-name'] = name;\n\t}\n\tif (id || name) {\n\t\tprops.id = `${id || name}-error`;\n\t}\n\n\treturn (\n\t\t<div className=\"formosa-field__error\" {...props}>\n\t\t\t{hasError && formState.errors[name].map((e) => (<div key={e}>{e}</div>))}\n\t\t</div>\n\t);\n}\n\nError.propTypes = {\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n};\n\nError.defaultProps = {\n\tid: null,\n\tname: '',\n};\n","import get from 'get-value';\n\nexport const normalizeOptions = (options, labelKey, valueKey = null) => {\n\tif (!options) {\n\t\treturn [];\n\t}\n\n\tconst output = [];\n\tif (Array.isArray(options)) {\n\t\toptions.forEach((option) => {\n\t\t\tif (typeof option === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue: option,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tObject.keys(options).forEach((value) => {\n\t\t\tconst option = options[value];\n\t\t\tif (typeof value === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn output;\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nexport const escapeRegExp = (string) => (string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'));\n\nconst toSlug = (s) => (\n\ts.toLowerCase()\n\t\t.replace(/ & /g, '-and-')\n\t\t.replace(/<[^>]+>/g, '')\n\t\t.replace(/['â€™.]/g, '')\n\t\t.replace(/[^a-z0-9-]+/g, '-')\n\t\t.replace(/^-+/, '')\n\t\t.replace(/-+$/, '')\n\t\t.replace(/--+/g, '-')\n);\n\nexport const filterByKey = (records, key, value) => {\n\tvalue = value.toLowerCase();\n\tconst escapedValue = escapeRegExp(value);\n\trecords = records.filter((record) => {\n\t\tconst recordValue = get(record, key).toString().toLowerCase() || '';\n\t\treturn recordValue.match(new RegExp(`(^|[^a-z])${escapedValue}`));\n\t});\n\tvalue = toSlug(value);\n\trecords = records.sort((a, b) => {\n\t\tconst aValue = toSlug(get(a, key).toString());\n\t\tconst bValue = toSlug(get(b, key).toString());\n\t\tconst aPos = aValue.indexOf(value) === 0;\n\t\tconst bPos = bValue.indexOf(value) === 0;\n\t\tif ((aPos && bPos) || (!aPos && !bPos)) {\n\t\t\treturn aValue.localeCompare(bValue);\n\t\t}\n\t\tif (aPos && !bPos) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\treturn records;\n};\n","import { filterByKey, normalizeOptions } from '../Helpers/Options';\nimport React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CloseIcon } from '../../svg/x.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Autocomplete({\n\tafterAdd,\n\tafterChange,\n\tclearable,\n\tclearButtonAttributes,\n\tclearButtonClassName,\n\tclearIconAttributes,\n\tclearIconHeight,\n\tclearIconWidth,\n\tclearText,\n\tdisabled,\n\tid,\n\tinputClassName,\n\tlabelFn,\n\tlabelKey,\n\tloadingText,\n\tmax,\n\tname,\n\toptionButtonAttributes,\n\toptionButtonClassName,\n\toptionLabelFn,\n\toptionListAttributes,\n\toptionListClassName,\n\toptionListItemAttributes,\n\toptionListItemClassName,\n\toptions,\n\tplaceholder,\n\treadOnly,\n\tremoveButtonAttributes,\n\tremoveButtonClassName,\n\tremoveIconAttributes,\n\tremoveIconHeight,\n\tremoveIconWidth,\n\tremoveText,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\tvalueListItemAttributes,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst clearButtonRef = useRef(null);\n\tconst inputRef = useRef(null);\n\tconst removeButtonRef = useRef(null);\n\tconst [filter, setFilter] = useState('');\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [highlightedIndex, setHighlightedIndex] = useState(0);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [loadError, setLoadError] = useState('');\n\tconst api = Api.instance();\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tapi(url, false)\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetLoadError(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\" role=\"status\">{loadingText}</div>);\n\t}\n\n\tif (loadError) {\n\t\treturn (<div className=\"formosa-field__error\">{loadError}</div>);\n\t}\n\n\tlet currentValue = null;\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Autocomplete> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined || currentValue === '') {\n\t\tcurrentValue = null;\n\t} else if (max === 1 && !Array.isArray(currentValue)) {\n\t\tcurrentValue = [currentValue];\n\t}\n\tconst currentValueLength = currentValue ? currentValue.length : 0;\n\n\tconst isSelected = (option) => {\n\t\tif (!currentValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn currentValue.findIndex((v) => {\n\t\t\tif (typeof v === 'object') {\n\t\t\t\treturn JSON.stringify(v) === JSON.stringify(option.value);\n\t\t\t}\n\t\t\treturn v === option.value;\n\t\t}) > -1;\n\t};\n\n\tlet filteredOptions = [];\n\tif (filter) {\n\t\tfilteredOptions = filterByKey(optionValues, 'label', filter);\n\t\tfilteredOptions = filteredOptions.filter((option) => (!isSelected(option)));\n\t}\n\n\tconst focus = () => {\n\t\tif (inputRef.current) {\n\t\t\tinputRef.current.focus();\n\t\t}\n\t};\n\n\tconst addValue = (v) => {\n\t\tlet newValue;\n\t\tif (max === 1) {\n\t\t\tnewValue = v;\n\t\t} else if (currentValue) {\n\t\t\tnewValue = [...currentValue, v];\n\t\t} else {\n\t\t\tnewValue = [v];\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\n\t\tsetIsOpen(false);\n\t\tsetFilter('');\n\t\tfocus();\n\n\t\tif (afterAdd) {\n\t\t\tafterAdd();\n\t\t}\n\t};\n\n\tconst removeValue = (v) => {\n\t\tlet newValue = [];\n\t\tif (currentValue) {\n\t\t\tnewValue = [...currentValue];\n\t\t}\n\t\tif (max !== 1) {\n\t\t\tconst index = newValue.indexOf(v);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\t\t} else {\n\t\t\tnewValue = '';\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\n\t\tfocus();\n\t};\n\n\tconst onChange = (e) => {\n\t\tsetFilter(e.target.value);\n\t};\n\n\tconst onFocus = () => {\n\t\tsetHighlightedIndex(0);\n\t\tsetIsOpen(filter.length > 0);\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t} else if (e.key === 'Backspace' && !filter && currentValueLength > 0) {\n\t\t\tremoveValue(currentValue[currentValueLength - 1]);\n\t\t}\n\t};\n\n\tconst onKeyUp = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t\taddValue(filteredOptions[highlightedIndex].value);\n\t\t} else if (e.key === 'ArrowDown') {\n\t\t\tif (highlightedIndex >= (filteredOptions.length - 1)) {\n\t\t\t\tsetHighlightedIndex(0);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(highlightedIndex + 1);\n\t\t\t}\n\t\t} else if (e.key === 'ArrowUp') {\n\t\t\tif (highlightedIndex > 0) {\n\t\t\t\tsetHighlightedIndex(highlightedIndex - 1);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(filteredOptions.length - 1);\n\t\t\t}\n\t\t} else if (e.key === 'Escape') {\n\t\t\tsetIsOpen(false);\n\t\t} else {\n\t\t\tsetHighlightedIndex(0);\n\t\t\tsetIsOpen(filterValue.length > 0);\n\t\t}\n\t};\n\n\tconst onClickOption = (e) => {\n\t\tlet val = e.target.getAttribute('data-value');\n\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\tval = JSON.parse(val);\n\t\t}\n\t\taddValue(val);\n\t};\n\n\tconst onClickRemoveOption = (e) => {\n\t\tlet button = e.target;\n\t\twhile (button && button.tagName.toUpperCase() !== 'BUTTON') {\n\t\t\tbutton = button.parentNode;\n\t\t}\n\t\tremoveValue(currentValue[button.getAttribute('data-index')]);\n\t};\n\n\tconst clear = () => {\n\t\tconst newValue = [];\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\n\t\tsetFilter('');\n\t\tfocus();\n\t};\n\n\tconst showClear = clearable && max !== 1 && currentValueLength > 0 && !disabled && !readOnly;\n\n\tlet className = ['formosa-autocomplete'];\n\tif (showClear) {\n\t\tclassName.push('formosa-autocomplete--clearable');\n\t}\n\tclassName = className.join(' ');\n\n\tconst canAddValues = !disabled && !readOnly && (max === null || currentValueLength < max);\n\n\tconst wrapperProps = {};\n\tif (id || name) {\n\t\twrapperProps.id = `${id || name}-wrapper`;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${className} ${wrapperClassName}`.trim()}\n\t\t\tdata-value={JSON.stringify(max === 1 && currentValueLength > 0 ? currentValue[0] : currentValue)} /* For testing. */\n\t\t\t{...wrapperProps}\n\t\t\t{...wrapperAttributes}\n\t\t>\n\t\t\t<ul className=\"formosa-autocomplete__values\">\n\t\t\t\t{currentValue && currentValue.map((v, index) => {\n\t\t\t\t\tlet val = v;\n\t\t\t\t\tlet isJson = false;\n\t\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\t\tval = JSON.stringify(val);\n\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst option = optionValues.find((o) => (\n\t\t\t\t\t\tisJson ? JSON.stringify(o.value) === val : o.value === val\n\t\t\t\t\t));\n\n\t\t\t\t\tlet label = '';\n\t\t\t\t\tif (labelFn) {\n\t\t\t\t\t\tlabel = labelFn(option || v);\n\t\t\t\t\t} else if (option && Object.prototype.hasOwnProperty.call(option, 'label')) {\n\t\t\t\t\t\tlabel = option.label;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet valueListItemProps = {};\n\t\t\t\t\tif (typeof valueListItemAttributes === 'function') {\n\t\t\t\t\t\tvalueListItemProps = valueListItemAttributes(option);\n\t\t\t\t\t} else if (valueListItemAttributes && typeof valueListItemAttributes === 'object') {\n\t\t\t\t\t\tvalueListItemProps = valueListItemAttributes;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet removeButtonProps = {};\n\t\t\t\t\tif (typeof removeButtonAttributes === 'function') {\n\t\t\t\t\t\tremoveButtonProps = removeButtonAttributes(option);\n\t\t\t\t\t} else if (removeButtonAttributes && typeof removeButtonAttributes === 'object') {\n\t\t\t\t\t\tremoveButtonProps = removeButtonAttributes;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet removeIconProps = {};\n\t\t\t\t\tif (typeof removeIconAttributes === 'function') {\n\t\t\t\t\t\tremoveIconProps = removeIconAttributes(option);\n\t\t\t\t\t} else if (removeIconAttributes && typeof removeIconAttributes === 'object') {\n\t\t\t\t\t\tremoveIconProps = removeIconAttributes;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--item\" key={val} {...valueListItemProps}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t{!disabled && !readOnly && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__value__remove ${removeButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-index={index}\n\t\t\t\t\t\t\t\t\tonClick={onClickRemoveOption}\n\t\t\t\t\t\t\t\t\tref={removeButtonRef}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t{...removeButtonProps}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CloseIcon aria-hidden=\"true\" height={removeIconHeight} width={removeIconWidth} {...removeIconProps} />\n\t\t\t\t\t\t\t\t\t{removeText}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t{canAddValues && (\n\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--input\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-autocomplete__input ${inputClassName}`.trim()}\n\t\t\t\t\t\t\tid={id || name}\n\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\tonKeyUp={onKeyUp}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={filter}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t)}\n\t\t\t</ul>\n\n\t\t\t{isOpen && filteredOptions.length > 0 && (\n\t\t\t\t<ul className={`formosa-autocomplete__options ${optionListClassName}`.trim()} {...optionListAttributes}>\n\t\t\t\t\t{filteredOptions.map((option, index) => {\n\t\t\t\t\t\tlet optionClassName = ['formosa-autocomplete__option'];\n\t\t\t\t\t\tif (highlightedIndex === index) {\n\t\t\t\t\t\t\toptionClassName.push('formosa-autocomplete__option--highlighted');\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionClassName = optionClassName.join(' ');\n\n\t\t\t\t\t\tlet val = option.value;\n\t\t\t\t\t\tlet isJson = false;\n\t\t\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\t\tval = JSON.stringify(val);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet label = '';\n\t\t\t\t\t\tif (optionLabelFn) {\n\t\t\t\t\t\t\tlabel = optionLabelFn(option);\n\t\t\t\t\t\t} else if (option && Object.prototype.hasOwnProperty.call(option, 'label')) {\n\t\t\t\t\t\t\tlabel = option.label;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet optionListItemProps = {};\n\t\t\t\t\t\tif (typeof optionListItemAttributes === 'function') {\n\t\t\t\t\t\t\toptionListItemProps = optionListItemAttributes(option);\n\t\t\t\t\t\t} else if (optionListItemAttributes && typeof optionListItemAttributes === 'object') {\n\t\t\t\t\t\t\toptionListItemProps = optionListItemAttributes;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet optionButtonProps = {};\n\t\t\t\t\t\tif (typeof optionButtonAttributes === 'function') {\n\t\t\t\t\t\t\toptionButtonProps = optionButtonAttributes(option);\n\t\t\t\t\t\t} else if (optionButtonAttributes && typeof optionButtonAttributes === 'object') {\n\t\t\t\t\t\t\toptionButtonProps = optionButtonAttributes;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tclassName={`${optionClassName} ${optionListItemClassName}`.trim()}\n\t\t\t\t\t\t\t\tkey={val}\n\t\t\t\t\t\t\t\t{...optionListItemProps}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__option__button ${optionButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-json={isJson}\n\t\t\t\t\t\t\t\t\tdata-value={val}\n\t\t\t\t\t\t\t\t\tonClick={onClickOption}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t{...optionButtonProps}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t)}\n\n\t\t\t{showClear && (\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-autocomplete__clear ${clearButtonClassName}`.trim()}\n\t\t\t\t\t\tonClick={clear}\n\t\t\t\t\t\tref={clearButtonRef}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...clearButtonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CloseIcon aria-hidden=\"true\" height={clearIconHeight} width={clearIconWidth} {...clearIconAttributes} />\n\t\t\t\t\t\t{clearText}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nAutocomplete.propTypes = {\n\tafterAdd: PropTypes.func,\n\tafterChange: PropTypes.func,\n\tclearable: PropTypes.bool,\n\tclearButtonAttributes: PropTypes.object,\n\tclearButtonClassName: PropTypes.string,\n\tclearIconAttributes: PropTypes.object,\n\tclearIconHeight: PropTypes.number,\n\tclearIconWidth: PropTypes.number,\n\tclearText: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputClassName: PropTypes.string,\n\tlabelFn: PropTypes.func,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tloadingText: PropTypes.string,\n\tmax: PropTypes.number,\n\tname: PropTypes.string,\n\toptionButtonAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\toptionButtonClassName: PropTypes.string,\n\toptionLabelFn: PropTypes.func,\n\toptionListAttributes: PropTypes.object,\n\toptionListClassName: PropTypes.string,\n\toptionListItemAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\toptionListItemClassName: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tplaceholder: PropTypes.string,\n\treadOnly: PropTypes.bool,\n\tremoveButtonAttributes: PropTypes.object,\n\tremoveButtonClassName: PropTypes.string,\n\tremoveIconAttributes: PropTypes.object,\n\tremoveIconHeight: PropTypes.number,\n\tremoveIconWidth: PropTypes.number,\n\tremoveText: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.arrayOf(PropTypes.object),\n\t\tPropTypes.arrayOf(PropTypes.string),\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tvalueListItemAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nAutocomplete.defaultProps = {\n\tafterAdd: null,\n\tafterChange: null,\n\tclearable: true,\n\tclearButtonAttributes: null,\n\tclearButtonClassName: '',\n\tclearIconAttributes: null,\n\tclearIconHeight: 12,\n\tclearIconWidth: 12,\n\tclearText: 'Clear',\n\tdisabled: false,\n\tid: '',\n\tinputClassName: '',\n\tlabelFn: null,\n\tlabelKey: 'name',\n\tloadingText: 'Loading...',\n\tmax: null,\n\tname: '',\n\toptionButtonAttributes: null,\n\toptionButtonClassName: '',\n\toptionLabelFn: null,\n\toptionListAttributes: null,\n\toptionListClassName: '',\n\toptionListItemAttributes: null,\n\toptionListItemClassName: '',\n\toptions: null,\n\tplaceholder: 'Search',\n\treadOnly: false,\n\tremoveButtonAttributes: null,\n\tremoveButtonClassName: '',\n\tremoveIconAttributes: null,\n\tremoveIconHeight: 12,\n\tremoveIconWidth: 12,\n\tremoveText: 'Remove',\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n\tvalueListItemAttributes: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Checkbox({\n\tafterChange,\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tname,\n\tsetValue,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\n\tlet checked = false;\n\tif (setValue !== null) {\n\t\tchecked = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Checkbox> component must be inside a <Form> component.');\n\t\t}\n\t\tchecked = !!get(formState.row, name);\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.checked;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\tchecked={checked}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<CheckIcon\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={`formosa-icon--check ${iconClassName}`.trim()}\n\t\t\t\theight={iconHeight}\n\t\t\t\twidth={iconWidth}\n\t\t\t\t{...iconAttributes}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nCheckbox.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.bool,\n};\n\nCheckbox.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tvalue: null,\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function CheckboxList({\n\tafterChange,\n\tclassName,\n\tdisabled,\n\tfieldsetAttributes,\n\tfieldsetClassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tinputAttributes,\n\titemAttributes,\n\titemClassName,\n\titemLabelAttributes,\n\titemLabelClassName,\n\titemSpanAttributes,\n\titemSpanClassName,\n\tlabelKey,\n\tlegend,\n\tloadingText,\n\tname,\n\toptions,\n\treadOnly,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [loadError, setLoadError] = useState('');\n\tconst api = Api.instance();\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tapi(url, false)\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetLoadError(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\" role=\"status\">{loadingText}</div>);\n\t}\n\n\tif (loadError) {\n\t\treturn (<div className=\"formosa-field__error\">{loadError}</div>);\n\t}\n\n\tlet currentValue = [];\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<CheckboxList> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined || currentValue === '') {\n\t\tcurrentValue = [];\n\t}\n\tconst currentValueStringified = currentValue.map((val) => (typeof val === 'object' ? JSON.stringify(val) : val));\n\n\tconst onChange = (e) => {\n\t\tconst newValue = [...currentValue];\n\t\tlet val = e.target.value;\n\n\t\tif (e.target.checked) {\n\t\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\t\tval = JSON.parse(val);\n\t\t\t}\n\t\t\tnewValue.push(val);\n\t\t} else {\n\t\t\tconst index = currentValueStringified.indexOf(val);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\treturn (\n\t\t<fieldset className={`formosa-radio ${fieldsetClassName}`.trim()} {...fieldsetAttributes}>\n\t\t\t<legend className=\"formosa-radio__legend\">{legend}</legend>\n\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\tlet isJson = false;\n\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\tisJson = true;\n\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t}\n\n\t\t\t\tconst checked = currentValueStringified.includes(optionValueVal);\n\n\t\t\t\tlet itemProps = {};\n\t\t\t\tif (typeof itemAttributes === 'function') {\n\t\t\t\t\titemProps = itemAttributes(optionValue);\n\t\t\t\t} else if (itemAttributes && typeof itemAttributes === 'object') {\n\t\t\t\t\titemProps = itemAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet itemLabelProps = {};\n\t\t\t\tif (typeof itemLabelAttributes === 'function') {\n\t\t\t\t\titemLabelProps = itemLabelAttributes(optionValue);\n\t\t\t\t} else if (itemLabelAttributes && typeof itemLabelAttributes === 'object') {\n\t\t\t\t\titemLabelProps = itemLabelAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet inputProps = {};\n\t\t\t\tif (typeof inputAttributes === 'function') {\n\t\t\t\t\tinputProps = inputAttributes(optionValue);\n\t\t\t\t} else if (inputAttributes && typeof inputAttributes === 'object') {\n\t\t\t\t\tinputProps = inputAttributes;\n\t\t\t\t}\n\t\t\t\tif (isJson) {\n\t\t\t\t\tinputProps['data-json'] = true;\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\tinputProps.name = `${name}[]`;\n\t\t\t\t}\n\n\t\t\t\tlet iconProps = {};\n\t\t\t\tif (typeof iconAttributes === 'function') {\n\t\t\t\t\ticonProps = iconAttributes(optionValue);\n\t\t\t\t} else if (iconAttributes && typeof iconAttributes === 'object') {\n\t\t\t\t\ticonProps = iconAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet itemSpanProps = {};\n\t\t\t\tif (typeof itemSpanAttributes === 'function') {\n\t\t\t\t\titemSpanProps = itemSpanAttributes(optionValue);\n\t\t\t\t} else if (itemSpanAttributes && typeof itemSpanAttributes === 'object') {\n\t\t\t\t\titemSpanProps = itemSpanAttributes;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={`formosa-radio__item ${itemClassName}`.trim()} key={optionValueVal} {...itemProps}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${itemLabelClassName}`.trim()}\n\t\t\t\t\t\t\t{...itemLabelProps}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\taria-label={optionValue.label}\n\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\treadOnly={readOnly}\n\t\t\t\t\t\t\t\tvalue={optionValueVal}\n\t\t\t\t\t\t\t\t{...inputProps}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\tclassName={`formosa-icon--check ${iconClassName}`.trim()}\n\t\t\t\t\t\t\t\theight={iconHeight}\n\t\t\t\t\t\t\t\twidth={iconWidth}\n\t\t\t\t\t\t\t\t{...iconProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span aria-hidden=\"true\" className={`formosa-radio__span ${itemSpanClassName}`.trim()} {...itemSpanProps}>\n\t\t\t\t\t\t\t\t{optionValue.label}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</fieldset>\n\t);\n}\n\nCheckboxList.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tfieldsetAttributes: PropTypes.object,\n\tfieldsetClassName: PropTypes.string,\n\ticonAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tinputAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemClassName: PropTypes.string,\n\titemLabelAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemLabelClassName: PropTypes.string,\n\titemSpanAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemSpanClassName: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlegend: PropTypes.string,\n\tloadingText: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\treadOnly: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.arrayOf(PropTypes.object),\n\t\tPropTypes.arrayOf(PropTypes.string),\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nCheckboxList.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tdisabled: false,\n\tfieldsetAttributes: null,\n\tfieldsetClassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tinputAttributes: null,\n\titemAttributes: null,\n\titemClassName: '',\n\titemLabelAttributes: null,\n\titemLabelClassName: '',\n\titemSpanAttributes: null,\n\titemSpanClassName: '',\n\tlabelKey: 'name',\n\tlegend: '',\n\tloadingText: 'Loading...',\n\tname: '',\n\toptions: null,\n\treadOnly: false,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n};\n","import React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function File({\n\tafterChange,\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\tdisabled,\n\temptyText,\n\tid,\n\timageAttributes,\n\timageClassName,\n\timageHeight,\n\timagePrefix,\n\timagePreview,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tlinkAttributes,\n\tlinkClassName,\n\tlinkImage,\n\tmultiple,\n\tname,\n\treadOnly,\n\tremoveText,\n\trequired,\n\tsetValue,\n\tvalue,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst inputRef = useRef(null);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<File> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tconst hasValue = multiple ? currentValue.length > 0 : !!currentValue;\n\n\tconst getFilenames = (v) => {\n\t\tif (v instanceof FileList) {\n\t\t\tconst numFiles = v.length;\n\t\t\tconst output = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < numFiles; i += 1) {\n\t\t\t\toutput.push(v.item(i).name);\n\t\t\t}\n\t\t\treturn output.join(', ');\n\t\t}\n\t\tif (Array.isArray(v)) {\n\t\t\treturn v.join(', ');\n\t\t}\n\t\tif (typeof v === 'object') {\n\t\t\treturn v.name;\n\t\t}\n\t\treturn v;\n\t};\n\n\tconst getSrcs = (v) => {\n\t\tconst output = [];\n\t\tif (v instanceof FileList) {\n\t\t\tconst numFiles = v.length;\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < numFiles; i += 1) {\n\t\t\t\toutput.push(URL.createObjectURL(v.item(i)));\n\t\t\t}\n\t\t} else if (Array.isArray(v)) {\n\t\t\treturn v.map((v2) => (`${imagePrefix}${v2}`));\n\t\t} else if (typeof v === 'object') {\n\t\t\toutput.push(URL.createObjectURL(v));\n\t\t} else if (typeof v === 'string') {\n\t\t\toutput.push(`${imagePrefix}${v}`);\n\t\t}\n\t\treturn output;\n\t};\n\n\tconst [filenames, setFilenames] = useState(getFilenames(currentValue));\n\tconst [srcs, setSrcs] = useState(getSrcs(currentValue));\n\n\tuseEffect(() => {\n\t\tsetFilenames(getFilenames(currentValue));\n\t\tsetSrcs(getSrcs(currentValue));\n\t}, [currentValue]);\n\n\tconst onChange = (e) => {\n\t\tconst newFiles = multiple ? e.target.files : e.target.files.item(0);\n\n\t\tsetFilenames(getFilenames(newFiles));\n\t\tif (imagePreview) {\n\t\t\tsetSrcs(getSrcs(newFiles));\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newFiles);\n\t\t} else {\n\t\t\tsetValues(e, name, newFiles, afterChange, newFiles);\n\t\t}\n\t};\n\n\tconst onRemove = (e) => {\n\t\tsetFilenames('');\n\n\t\tconst newValue = '';\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange, newValue);\n\t\t}\n\n\t\tinputRef.current.focus();\n\t};\n\n\tlet prefixClassName = inputWrapperClassName;\n\tif (hasValue && !disabled && !readOnly) {\n\t\tprefixClassName += ' formosa-prefix';\n\t}\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\n\tconst hiddenProps = {};\n\tif (name) {\n\t\thiddenProps.name = name;\n\t}\n\n\tconst buttonProps = {};\n\tif (id || name) {\n\t\tbuttonProps.id = `${id || name}-remove`;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{(hasValue && imagePreview) && (\n\t\t\t\tsrcs.map((src) => {\n\t\t\t\t\tconst img = (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\tclassName={`formosa-file-image ${imageClassName}`.trim()}\n\t\t\t\t\t\t\theight={imageHeight}\n\t\t\t\t\t\t\tkey={src}\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\t{...imageAttributes}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\tif (linkImage) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a className={`formosa-file-link ${linkClassName}`.trim()} href={src} key={src} {...linkAttributes}>\n\t\t\t\t\t\t\t\t{img}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn img;\n\t\t\t\t})\n\t\t\t)}\n\t\t\t<div className={`formosa-file-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t\t<div className={`formosa-file-input-wrapper ${prefixClassName}`.trim()} {...inputWrapperAttributes}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`formosa-file-name${!filenames ? ' formosa-file-name--empty' : ''}`}\n\t\t\t\t\t\tid={`${id || name}-name`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filenames || emptyText}\n\t\t\t\t\t</div>\n\t\t\t\t\t{!readOnly && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-field__input--file ${className}`.trim()}\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\tmultiple={multiple}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\tvalue={currentValue}\n\t\t\t\t\t\t\t\t{...hiddenProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{hasValue && !disabled && !readOnly && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button formosa-button--remove-file formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...buttonProps}\n\t\t\t\t\t\t{...buttonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{removeText}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nFile.propTypes = {\n\tafterChange: PropTypes.func,\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\temptyText: PropTypes.string,\n\tid: PropTypes.string,\n\timageAttributes: PropTypes.object,\n\timageClassName: PropTypes.string,\n\timageHeight: PropTypes.number,\n\timagePrefix: PropTypes.string,\n\timagePreview: PropTypes.bool,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tlinkAttributes: PropTypes.object,\n\tlinkClassName: PropTypes.string,\n\tlinkImage: PropTypes.bool,\n\tmultiple: PropTypes.bool,\n\tname: PropTypes.string,\n\treadOnly: PropTypes.bool,\n\tremoveText: PropTypes.string,\n\trequired: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nFile.defaultProps = {\n\tafterChange: null,\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\tdisabled: false,\n\temptyText: 'No file selected.',\n\tid: '',\n\timageAttributes: null,\n\timageClassName: '',\n\timageHeight: 100,\n\timagePrefix: '',\n\timagePreview: false,\n\tinputWrapperAttributes: null,\n\tinputWrapperClassName: '',\n\tlinkAttributes: null,\n\tlinkClassName: '',\n\tlinkImage: false,\n\tmultiple: false,\n\tname: '',\n\treadOnly: false,\n\tremoveText: 'Remove',\n\trequired: false,\n\tsetValue: null,\n\tvalue: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function ConditionalWrapper({ children, condition, ...props }) {\n\tif (!condition) {\n\t\treturn children;\n\t}\n\n\treturn (\n\t\t<div {...props}>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n\nConditionalWrapper.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tcondition: PropTypes.any,\n};\n\nConditionalWrapper.defaultProps = {\n\tcondition: false,\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport ConditionalWrapper from './ConditionalWrapper';\nimport FormContext from './FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Input({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsetValue,\n\tsuffix,\n\ttype,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Input> component must be inside a <Form> component.');\n\t\t}\n\t\tif (type !== 'file') {\n\t\t\tcurrentValue = get(formState.row, name);\n\t\t\tif (currentValue === null || currentValue === undefined) {\n\t\t\t\tcurrentValue = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.value;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<ConditionalWrapper className=\"formosa-suffix-container\" condition={suffix}>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input ${className}`.trim()}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype={type}\n\t\t\t\tvalue={currentValue}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t{suffix && <span className=\"formosa-suffix\">{suffix}</span>}\n\t\t</ConditionalWrapper>\n\t);\n}\n\nInput.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.string,\n\t]),\n};\n\nInput.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tsuffix: '',\n\ttype: 'text',\n\tvalue: null,\n};\n","import React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Input from '../Input';\nimport PropTypes from 'prop-types';\n\nexport default function Password({\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\thideAria,\n\thideText,\n\tshowAria,\n\tshowText,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst [tempType, setTempType] = useState('password');\n\tconst togglePassword = () => {\n\t\tif (tempType === 'password') {\n\t\t\tsetTempType('text');\n\t\t} else {\n\t\t\tsetTempType('password');\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={`formosa-password-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tautoCorrect=\"off\"\n\t\t\t\tclassName={`formosa-field__input--password formosa-prefix ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t\ttype={tempType}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\taria-controls={otherProps.id || otherProps.name}\n\t\t\t\taria-label={tempType === 'password' ? showAria : hideAria}\n\t\t\t\tclassName={`formosa-button formosa-button--toggle-password formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\tonClick={togglePassword}\n\t\t\t\ttype=\"button\"\n\t\t\t\t{...buttonAttributes}\n\t\t\t>\n\t\t\t\t{tempType === 'password' ? showText : hideText}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nPassword.propTypes = {\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\thideAria: PropTypes.string,\n\thideText: PropTypes.string,\n\tshowAria: PropTypes.string,\n\tshowText: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nPassword.defaultProps = {\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\thideAria: 'Hide Password',\n\thideText: 'Hide',\n\tshowAria: 'Show Password',\n\tshowText: 'Show',\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Radio({\n\tafterChange,\n\tclassName,\n\tfieldsetAttributes,\n\tfieldsetClassName,\n\tinputAttributes,\n\titemAttributes,\n\titemClassName,\n\titemLabelAttributes,\n\titemLabelClassName,\n\titemSpanAttributes,\n\titemSpanClassName,\n\tlabel,\n\tlabelKey,\n\tlegend,\n\tloadingText,\n\tname,\n\toptions,\n\trequired,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [loadError, setLoadError] = useState('');\n\tconst api = Api.instance();\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tapi(url, false)\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetLoadError(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\" role=\"status\">{loadingText}</div>);\n\t}\n\n\tif (loadError) {\n\t\treturn (<div className=\"formosa-field__error\">{loadError}</div>);\n\t}\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Radio> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tif (typeof currentValue === 'object') {\n\t\tcurrentValue = JSON.stringify(currentValue);\n\t}\n\n\tconst onChange = (e) => {\n\t\tlet newValue = e.target.value;\n\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\tnewValue = JSON.parse(newValue);\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\treturn (\n\t\t<fieldset className={`formosa-radio ${fieldsetClassName}`.trim()} {...fieldsetAttributes}>\n\t\t\t<legend className=\"formosa-radio__legend\">{legend}</legend>\n\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\tlet isJson = false;\n\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\tisJson = true;\n\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t}\n\n\t\t\t\tconst checked = currentValue === optionValueVal;\n\n\t\t\t\tlet itemProps = {};\n\t\t\t\tif (typeof itemAttributes === 'function') {\n\t\t\t\t\titemProps = itemAttributes(optionValue);\n\t\t\t\t} else if (itemAttributes && typeof itemAttributes === 'object') {\n\t\t\t\t\titemProps = itemAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet itemLabelProps = {};\n\t\t\t\tif (typeof itemLabelAttributes === 'function') {\n\t\t\t\t\titemLabelProps = itemLabelAttributes(optionValue);\n\t\t\t\t} else if (itemLabelAttributes && typeof itemLabelAttributes === 'object') {\n\t\t\t\t\titemLabelProps = itemLabelAttributes;\n\t\t\t\t}\n\n\t\t\t\tlet inputProps = {};\n\t\t\t\tif (typeof inputAttributes === 'function') {\n\t\t\t\t\tinputProps = inputAttributes(optionValue);\n\t\t\t\t} else if (inputAttributes && typeof inputAttributes === 'object') {\n\t\t\t\t\tinputProps = inputAttributes;\n\t\t\t\t}\n\t\t\t\tif (isJson) {\n\t\t\t\t\tinputProps['data-json'] = true;\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\tinputProps.name = name;\n\t\t\t\t}\n\n\t\t\t\tlet itemSpanProps = {};\n\t\t\t\tif (typeof itemSpanAttributes === 'function') {\n\t\t\t\t\titemSpanProps = itemSpanAttributes(optionValue);\n\t\t\t\t} else if (itemSpanAttributes && typeof itemSpanAttributes === 'object') {\n\t\t\t\t\titemSpanProps = itemSpanAttributes;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<div className={`formosa-radio__item ${itemClassName}`.trim()} key={optionValueVal} {...itemProps}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${itemLabelClassName}`.trim()}\n\t\t\t\t\t\t\t{...itemLabelProps}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\taria-label={optionValue.label}\n\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-radio__input ${className}`.trim()}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tvalue={optionValueVal}\n\t\t\t\t\t\t\t\t{...inputProps}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span aria-hidden=\"true\" className={`formosa-radio__span ${itemSpanClassName}`.trim()} {...itemSpanProps}>\n\t\t\t\t\t\t\t\t{optionValue.label}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t})}\n\t\t</fieldset>\n\t);\n}\n\nRadio.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tfieldsetAttributes: PropTypes.object,\n\tfieldsetClassName: PropTypes.string,\n\tinputAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemClassName: PropTypes.string,\n\titemLabelAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemLabelClassName: PropTypes.string,\n\titemSpanAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\titemSpanClassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlegend: PropTypes.string,\n\tloadingText: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\trequired: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nRadio.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tfieldsetAttributes: null,\n\tfieldsetClassName: '',\n\tinputAttributes: null,\n\titemAttributes: null,\n\titemClassName: '',\n\titemLabelAttributes: null,\n\titemLabelClassName: '',\n\titemSpanAttributes: null,\n\titemSpanClassName: '',\n\tlabel: '',\n\tlabelKey: 'name',\n\tlegend: '',\n\tloadingText: 'Loading...',\n\tname: '',\n\toptions: null,\n\trequired: false,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n};\n","import Input from '../Input';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as SearchIcon } from '../../svg/search.svg';\n\nexport default function Search({\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className={`formosa-search-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tclassName={`formosa-field__input--search ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<SearchIcon\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={`formosa-icon--search ${iconClassName}`.trim()}\n\t\t\t\theight={iconHeight}\n\t\t\t\twidth={iconWidth}\n\t\t\t\t{...iconAttributes}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nSearch.propTypes = {\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSearch.defaultProps = {\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CaretIcon } from '../../svg/caret.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Select({\n\tafterChange,\n\tclassName,\n\thideBlank,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tlabelKey,\n\tloadingText,\n\tmultiple,\n\tname,\n\toptionAttributes,\n\toptions,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [loadError, setLoadError] = useState('');\n\tconst api = Api.instance();\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tapi(url, false)\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetLoadError(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t});\n\t\t}\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\" role=\"status\">{loadingText}</div>);\n\t}\n\n\tif (loadError) {\n\t\treturn (<div className=\"formosa-field__error\">{loadError}</div>);\n\t}\n\n\tlet currentValue = multiple ? [] : '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Select> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = multiple ? [] : '';\n\t}\n\tif (typeof currentValue === 'object' && !multiple) {\n\t\tcurrentValue = JSON.stringify(currentValue);\n\t}\n\n\tconst onChange = (e) => {\n\t\tlet newValue;\n\t\tif (multiple) {\n\t\t\tnewValue = Array.from(e.target.options).filter((option) => (option.selected)).map((option) => (option.value));\n\t\t} else {\n\t\t\tnewValue = e.target.value;\n\t\t\tconst option = e.target.querySelector(`[value=\"${newValue.replace(/\"/g, '\\\\\"')}\"]`);\n\t\t\tif (option.getAttribute('data-json') === 'true') {\n\t\t\t\tnewValue = JSON.parse(newValue);\n\t\t\t}\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\tif (multiple) {\n\t\tprops.multiple = true;\n\t}\n\n\treturn (\n\t\t<div className={`formosa-select-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<select\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--select ${className}`.trim()}\n\t\t\t\tonChange={onChange}\n\t\t\t\tvalue={currentValue}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t>\n\t\t\t\t{!hideBlank && !multiple && <option value=\"\" />}\n\t\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\t\tlet isJson = false;\n\t\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet optionProps = {};\n\t\t\t\t\tif (typeof optionAttributes === 'function') {\n\t\t\t\t\t\toptionProps = optionAttributes(optionValue);\n\t\t\t\t\t} else if (optionAttributes && typeof optionAttributes === 'object') {\n\t\t\t\t\t\toptionProps = optionAttributes;\n\t\t\t\t\t}\n\t\t\t\t\tif (isJson) {\n\t\t\t\t\t\toptionProps['data-json'] = true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<option key={optionValueVal} value={optionValueVal} {...optionProps}>{optionValue.label}</option>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</select>\n\t\t\t{!multiple && (\n\t\t\t\t<CaretIcon\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tclassName={`formosa-icon--caret ${iconClassName}`.trim()}\n\t\t\t\t\theight={iconHeight}\n\t\t\t\t\twidth={iconWidth}\n\t\t\t\t\t{...iconAttributes}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\thideBlank: PropTypes.bool,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tloadingText: PropTypes.string,\n\tmultiple: PropTypes.bool,\n\tname: PropTypes.string,\n\toptionAttributes: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t]),\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSelect.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\thideBlank: false,\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tlabelKey: 'name',\n\tloadingText: 'Loading...',\n\tmultiple: false,\n\tname: '',\n\toptionAttributes: null,\n\toptions: null,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Textarea({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsetValue,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState, setValues } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Textarea> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.value;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tsetValues(e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<textarea\n\t\t\tclassName={`formosa-field__input formosa-field__input--textarea ${className}`.trim()}\n\t\t\tonChange={onChange}\n\t\t\tvalue={currentValue}\n\t\t\t{...props}\n\t\t\t{...otherProps}\n\t\t/>\n\t);\n}\n\nTextarea.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.string,\n};\n\nTextarea.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tvalue: null,\n};\n","import Autocomplete from './Input/Autocomplete';\nimport Checkbox from './Input/Checkbox';\nimport CheckboxList from './Input/CheckboxList';\nimport File from './Input/File';\nimport Input from './Input';\nimport Password from './Input/Password';\nimport Radio from './Input/Radio';\nimport Search from './Input/Search';\nimport Select from './Input/Select';\nimport Textarea from './Input/Textarea';\n\nexport default (type, component) => {\n\tif (component) {\n\t\treturn component;\n\t}\n\tif (type === 'select') {\n\t\treturn Select;\n\t}\n\tif (type === 'textarea') {\n\t\treturn Textarea;\n\t}\n\tif (type === 'radio') {\n\t\treturn Radio;\n\t}\n\tif (type === 'checkbox') {\n\t\treturn Checkbox;\n\t}\n\tif (type === 'password') {\n\t\treturn Password;\n\t}\n\tif (type === 'search') {\n\t\treturn Search;\n\t}\n\tif (type === 'autocomplete') {\n\t\treturn Autocomplete;\n\t}\n\tif (type === 'file') {\n\t\treturn File;\n\t}\n\tif (type === 'checkbox-list') {\n\t\treturn CheckboxList;\n\t}\n\treturn Input;\n};\n","import getInputElement from './FieldInput';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function ExportableInput({\n\tcomponent,\n\ttype,\n\t...otherProps\n}) {\n\tconst InputComponent = getInputElement(type, component);\n\treturn (\n\t\t<InputComponent type={type} {...otherProps} />\n\t);\n}\n\nExportableInput.propTypes = {\n\tcomponent: PropTypes.func,\n\ttype: PropTypes.string,\n};\n\nExportableInput.defaultProps = {\n\tcomponent: null,\n\ttype: 'text',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Label({\n\tclassName,\n\thtmlFor,\n\tlabel,\n\tnote,\n\trequired,\n\ttype,\n\t...otherProps\n}) {\n\tlet labelClassName = 'formosa-label';\n\tif (required) {\n\t\tlabelClassName += ' formosa-label--required';\n\t}\n\n\tlet wrapperClassName = 'formosa-label-wrapper';\n\tif (type === 'checkbox') {\n\t\twrapperClassName += ' formosa-label-wrapper--checkbox';\n\t}\n\n\tconst hasFieldset = ['radio', 'checkbox-list'].includes(type);\n\tconst props = {};\n\tif (htmlFor && !hasFieldset) {\n\t\tprops.htmlFor = htmlFor;\n\t}\n\tif (hasFieldset) {\n\t\tprops['aria-hidden'] = true;\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassName}>\n\t\t\t<label className={`${labelClassName} ${className}`.trim()} {...props} {...otherProps}>{label}</label>\n\t\t\t{note && <span className=\"formosa-label__note\">{note}</span>}\n\t\t</div>\n\t);\n}\n\nLabel.propTypes = {\n\tclassName: PropTypes.string,\n\thtmlFor: PropTypes.string,\n\tlabel: PropTypes.string,\n\tnote: PropTypes.string,\n\trequired: PropTypes.bool,\n\ttype: PropTypes.string,\n};\n\nLabel.defaultProps = {\n\tclassName: '',\n\thtmlFor: '',\n\tlabel: '',\n\tnote: '',\n\trequired: false,\n\ttype: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport ConditionalWrapper from './ConditionalWrapper';\nimport Error from './Error';\nimport FormContext from './FormContext';\nimport getInputElement from './FieldInput';\nimport Label from './Label';\nimport PropTypes from 'prop-types';\n\nexport default function Field({\n\tcomponent,\n\tdisabled,\n\tid,\n\tinputInnerWrapperAttributes,\n\tinputInnerWrapperClassName,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tlabel,\n\tlabelAttributes,\n\tlabelClassName,\n\tlabelNote,\n\tlabelPosition,\n\tname,\n\tnote,\n\tprefix,\n\tpostfix,\n\treadOnly,\n\trequired,\n\tsuffix,\n\ttype,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tconst inputProps = { ...otherProps };\n\tif (id) {\n\t\tinputProps.id = id;\n\t}\n\tif (name) {\n\t\tinputProps.name = name;\n\t}\n\tif (disabled) {\n\t\tinputProps.disabled = disabled;\n\t}\n\tif (readOnly) {\n\t\tinputProps.readOnly = readOnly;\n\t}\n\tif (required) {\n\t\tinputProps.required = required;\n\t}\n\tif (suffix) {\n\t\tinputProps.suffix = suffix;\n\t}\n\tif (type) {\n\t\tinputProps.type = type;\n\t\tif (readOnly && type === 'number') {\n\t\t\tinputProps.type = 'text';\n\t\t}\n\t\tif (['radio', 'checkbox-list'].includes(type) && !inputProps.legend) {\n\t\t\tinputProps.legend = label;\n\t\t}\n\t}\n\n\tconst InputComponent = getInputElement(type, component);\n\tconst input = (\n\t\t<InputComponent {...inputProps} />\n\t);\n\n\tif (type === 'hidden') {\n\t\treturn input;\n\t}\n\n\tconst htmlFor = id || name;\n\n\tconst labelComponent = (\n\t\t<Label\n\t\t\tclassName={labelClassName}\n\t\t\thtmlFor={htmlFor}\n\t\t\tlabel={label}\n\t\t\tnote={labelNote}\n\t\t\trequired={required}\n\t\t\ttype={type}\n\t\t\t{...labelAttributes}\n\t\t/>\n\t);\n\n\tconst hasError = formState && name && Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst cleanName = htmlFor.replace(/[^a-z0-9_-]/gi, '');\n\tconst wrapperClassNameList = ['formosa-field'];\n\tif (cleanName) {\n\t\twrapperClassNameList.push(`formosa-field--${cleanName}`);\n\t}\n\tif (wrapperClassName) {\n\t\twrapperClassNameList.push(wrapperClassName);\n\t}\n\tif (hasError) {\n\t\twrapperClassNameList.push('formosa-field--has-error');\n\t}\n\tif (disabled) {\n\t\twrapperClassNameList.push('formosa-field--disabled');\n\t}\n\tif (readOnly) {\n\t\twrapperClassNameList.push('formosa-field--read-only');\n\t}\n\tif (prefix) {\n\t\twrapperClassNameList.push('formosa-field--has-prefix');\n\t}\n\tif (postfix) {\n\t\twrapperClassNameList.push('formosa-field--has-postfix');\n\t}\n\tif (labelPosition === 'after') {\n\t\twrapperClassNameList.push('formosa-field--label-after');\n\t}\n\n\tconst inputWrapperClassNameList = ['formosa-input-wrapper', `formosa-input-wrapper--${type}`];\n\tif (inputWrapperClassName) {\n\t\tinputWrapperClassNameList.push(inputWrapperClassName);\n\t}\n\tif (suffix) {\n\t\tinputWrapperClassNameList.push('formosa-field--has-suffix');\n\t}\n\n\tconst inputInnerWrapperClassNameList = ['formosa-input-inner-wrapper'];\n\tif (inputInnerWrapperClassName) {\n\t\tinputInnerWrapperClassNameList.push(inputInnerWrapperClassName);\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassNameList.join(' ')} {...wrapperAttributes}>\n\t\t\t{label && labelPosition === 'before' && labelComponent}\n\t\t\t{label && labelPosition === 'after' && <div className=\"formosa-label-wrapper\" />}\n\t\t\t<div className={inputWrapperClassNameList.join(' ')} {...inputWrapperAttributes}>\n\t\t\t\t<ConditionalWrapper\n\t\t\t\t\tclassName={inputInnerWrapperClassNameList.join(' ')}\n\t\t\t\t\tcondition={!!prefix || !!postfix}\n\t\t\t\t\t{...inputInnerWrapperAttributes}\n\t\t\t\t>\n\t\t\t\t\t{prefix}\n\t\t\t\t\t{input}\n\t\t\t\t\t{label && labelPosition === 'after' && labelComponent}\n\t\t\t\t\t{note && (\n\t\t\t\t\t\t<div className=\"formosa-field__note\">{note}</div>\n\t\t\t\t\t)}\n\t\t\t\t\t{postfix}\n\t\t\t\t</ConditionalWrapper>\n\t\t\t\t{formState && formState.showInlineErrors && <Error id={id} name={name} />}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nField.propTypes = {\n\tcomponent: PropTypes.func,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputInnerWrapperAttributes: PropTypes.object,\n\tinputInnerWrapperClassName: PropTypes.string,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tlabelNote: PropTypes.string,\n\tlabelPosition: PropTypes.string,\n\tname: PropTypes.string,\n\tnote: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n\treadOnly: PropTypes.bool,\n\trequired: PropTypes.bool,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nField.defaultProps = {\n\tcomponent: null,\n\tdisabled: false,\n\tid: null,\n\tinputInnerWrapperAttributes: {},\n\tinputInnerWrapperClassName: '',\n\tinputWrapperAttributes: {},\n\tinputWrapperClassName: '',\n\tlabel: '',\n\tlabelAttributes: {},\n\tlabelClassName: '',\n\tlabelNote: '',\n\tlabelPosition: 'before',\n\tname: '',\n\tnote: '',\n\tprefix: null,\n\tpostfix: null,\n\treadOnly: false,\n\trequired: false,\n\tsuffix: '',\n\ttype: 'text',\n\twrapperAttributes: {},\n\twrapperClassName: '',\n};\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\ttoasts: {},\n\t\tshowWarningPrompt: true,\n\t\taddToast: () => {},\n\t\tremoveToast: () => {},\n\t\tdisableWarningPrompt: () => {},\n\t\tenableWarningPrompt: () => {},\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport Alert from './Alert';\nimport Api from './Helpers/Api';\nimport FormContext from './FormContext';\nimport FormosaContext from './FormosaContext';\nimport { getBody } from './Helpers/JsonApi';\nimport PropTypes from 'prop-types';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default function FormInner({\n\tafterNoSubmit,\n\tbeforeSubmit,\n\tchildren,\n\tclearOnSubmit,\n\tdefaultRow,\n\terrorMessageText,\n\terrorToastText,\n\tfilterBody,\n\tfilterValues,\n\thtmlId,\n\tid,\n\tmethod,\n\tparams,\n\tpath,\n\tpreventEmptyRequest,\n\tpreventEmptyRequestText,\n\trelationshipNames,\n\tshowMessage,\n\tsuccessMessageText,\n\tsuccessToastText,\n\t...otherProps\n}) {\n\tconst { formState, setFormState, getDirtyKeys } = useContext(FormContext);\n\tconst { addToast } = useContext(FormosaContext);\n\n\tconst submitApiRequest = (e) => {\n\t\te.preventDefault();\n\n\t\tconst dirtyKeys = getDirtyKeys();\n\t\tif (preventEmptyRequest && dirtyKeys.length <= 0) {\n\t\t\tif (preventEmptyRequestText) {\n\t\t\t\taddToast(preventEmptyRequestText);\n\t\t\t}\n\t\t\tif (afterNoSubmit) {\n\t\t\t\tafterNoSubmit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (beforeSubmit && !beforeSubmit(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet url = path;\n\t\tif (id) {\n\t\t\turl = `${path}/${id}`;\n\t\t}\n\t\tif (params) {\n\t\t\turl += `?${params}`;\n\t\t}\n\n\t\tconst body = getBody(\n\t\t\tmethod,\n\t\t\tpath,\n\t\t\tid,\n\t\t\tformState,\n\t\t\tdirtyKeys,\n\t\t\trelationshipNames,\n\t\t\tfilterBody,\n\t\t\tfilterValues\n\t\t);\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\talertClass: '',\n\t\t\talertText: '',\n\t\t\terrors: {},\n\t\t\tresponse: null,\n\t\t\ttoastClass: '',\n\t\t\ttoastText: '',\n\t\t});\n\n\t\tconst bodyString = body instanceof FormData ? body : JSON.stringify(body);\n\n\t\tApi.request(method, url, bodyString)\n\t\t\t.catch((response) => {\n\t\t\t\tif (!Object.prototype.hasOwnProperty.call(response, 'errors') || !Array.isArray(response.errors)) {\n\t\t\t\t\t// This is not a JSON:API-style error response.\n\t\t\t\t\tthrow response;\n\t\t\t\t}\n\n\t\t\t\tconst errors = {};\n\t\t\t\tlet key;\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'source')) {\n\t\t\t\t\t\tkey = error.source.pointer.replace('/data/attributes/', '');\n\t\t\t\t\t\tkey = key.replace('/data/meta/', 'meta.');\n\t\t\t\t\t\tif (key.startsWith('/included/')) {\n\t\t\t\t\t\t\tconst i = key.replace(/^\\/included\\/(\\d+)\\/.+$/g, '$1');\n\t\t\t\t\t\t\tconst includedRecord = body.included[parseInt(i, 10)];\n\t\t\t\t\t\t\tkey = key.replace(/^\\/included\\/(\\d+)\\//g, `included.${includedRecord.type}.${includedRecord.id}.`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tkey = key.replace(/\\//g, '.');\n\t\t\t\t\t\tif (!document.querySelector(`[data-name=\"${key}\"].formosa-field__error`)) {\n\t\t\t\t\t\t\tkey = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tkey = '';\n\t\t\t\t\t}\n\t\t\t\t\tif (!Object.prototype.hasOwnProperty.call(errors, key)) {\n\t\t\t\t\t\terrors[key] = [];\n\t\t\t\t\t}\n\t\t\t\t\terrors[key].push(error.title);\n\t\t\t\t});\n\n\t\t\t\tsetFormState({\n\t\t\t\t\t...formState,\n\t\t\t\t\talertClass: 'error',\n\t\t\t\t\talertText: typeof errorMessageText === 'function' ? errorMessageText(response) : errorMessageText,\n\t\t\t\t\terrors,\n\t\t\t\t\tresponse,\n\t\t\t\t\ttoastClass: 'error',\n\t\t\t\t\ttoastText: typeof errorToastText === 'function' ? errorToastText(response) : errorToastText,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst newState = {\n\t\t\t\t\t...formState,\n\t\t\t\t\talertClass: 'success',\n\t\t\t\t\talertText: typeof successMessageText === 'function' ? successMessageText(response) : successMessageText,\n\t\t\t\t\terrors: {},\n\t\t\t\t\tresponse,\n\t\t\t\t\ttoastClass: 'success',\n\t\t\t\t\ttoastText: typeof successToastText === 'function' ? successToastText(response) : successToastText,\n\t\t\t\t\tuuid: uuidv4(),\n\t\t\t\t};\n\n\t\t\t\tif (clearOnSubmit) {\n\t\t\t\t\tnewState.originalRow = JSON.parse(JSON.stringify(defaultRow)); // Deep copy.\n\t\t\t\t\tnewState.row = JSON.parse(JSON.stringify(defaultRow)); // Deep copy.\n\t\t\t\t\tif (formState.setRow) {\n\t\t\t\t\t\tformState.setRow(newState.row);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tnewState.originalRow = JSON.parse(JSON.stringify(formState.row)); // Deep copy.\n\t\t\t\t}\n\n\t\t\t\tsetFormState(newState);\n\t\t\t});\n\t};\n\tif (method && path && !Object.prototype.hasOwnProperty.call(otherProps, 'onSubmit')) {\n\t\totherProps.onSubmit = submitApiRequest;\n\t}\n\tif (htmlId) {\n\t\totherProps.id = htmlId;\n\t}\n\n\treturn (\n\t\t<form {...otherProps}>\n\t\t\t{showMessage && formState.alertText && (<Alert type={formState.alertClass}>{formState.alertText}</Alert>)}\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\nFormInner.propTypes = {\n\tafterNoSubmit: PropTypes.func,\n\tbeforeSubmit: PropTypes.func,\n\tchildren: PropTypes.node,\n\tclearOnSubmit: PropTypes.bool,\n\tdefaultRow: PropTypes.object,\n\terrorMessageText: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\terrorToastText: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\thtmlId: PropTypes.string,\n\tid: PropTypes.string,\n\tmethod: PropTypes.string,\n\tparams: PropTypes.string,\n\tpath: PropTypes.string,\n\tpreventEmptyRequest: PropTypes.bool,\n\tpreventEmptyRequestText: PropTypes.oneOfType([\n\t\tPropTypes.bool,\n\t\tPropTypes.string,\n\t]),\n\trelationshipNames: PropTypes.array,\n\tshowMessage: PropTypes.bool,\n\tsuccessMessageText: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tsuccessToastText: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nFormInner.defaultProps = {\n\tafterNoSubmit: null,\n\tbeforeSubmit: null,\n\tchildren: null,\n\tclearOnSubmit: false,\n\tdefaultRow: {},\n\terrorMessageText: '',\n\terrorToastText: '',\n\tfilterBody: null,\n\tfilterValues: null,\n\thtmlId: '',\n\tid: '',\n\tmethod: null,\n\tparams: '',\n\tpath: null,\n\tpreventEmptyRequest: false,\n\tpreventEmptyRequestText: 'No changes to save.',\n\trelationshipNames: [],\n\tshowMessage: true,\n\tsuccessMessageText: '',\n\tsuccessToastText: '',\n};\n","import React, { useContext, useEffect, useMemo, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport FormInner from './FormInner';\nimport FormosaContext from './FormosaContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\nimport set from 'set-value';\n\nexport default function Form({\n\tafterSubmitFailure,\n\tafterSubmitSuccess,\n\tchildren,\n\trow,\n\tsetRow,\n\tshowInlineErrors,\n\t...otherProps\n}) {\n\tconst { addToast } = useContext(FormosaContext);\n\n\tconst setOriginalValue = (fs, setFs, key, value) => {\n\t\tconst newRow = { ...fs.originalRow };\n\t\tset(newRow, key, value);\n\t\tsetFs({\n\t\t\t...fs,\n\t\t\toriginalRow: JSON.parse(JSON.stringify(newRow)), // Deep copy.\n\t\t});\n\t};\n\n\tconst [formState, setFormState] = useState({\n\t\talertClass: '',\n\t\talertText: '',\n\t\terrors: {},\n\t\tfiles: {},\n\t\toriginalRow: JSON.parse(JSON.stringify(row)), // Deep copy.\n\t\trow,\n\t\tresponse: null,\n\t\tsetOriginalValue,\n\t\tsetRow,\n\t\tshowInlineErrors,\n\t\ttoastClass: '',\n\t\ttoastText: '',\n\t\tuuid: null,\n\t});\n\n\tuseEffect(() => {\n\t\tif (JSON.stringify(row) === JSON.stringify(formState.row)) {\n\t\t\treturn;\n\t\t}\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\trow,\n\t\t});\n\t});\n\n\tuseEffect(() => {\n\t\tif (!formState.uuid) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (formState.toastText) {\n\t\t\taddToast(formState.toastText, formState.toastClass);\n\t\t}\n\n\t\tif (formState.alertClass === 'success' && afterSubmitSuccess) {\n\t\t\tafterSubmitSuccess(formState.response, formState, setFormState);\n\t\t} else if (formState.alertClass === 'error' && afterSubmitFailure) {\n\t\t\tafterSubmitFailure(formState.response, formState, setFormState);\n\t\t}\n\t}, [formState.uuid]);\n\n\tconst getDirtyKeys = (r, originalRow) => {\n\t\tlet dirtyKeys = [];\n\n\t\tObject.keys(r).forEach((key) => {\n\t\t\t// Get the old and new values.\n\t\t\tlet oldValue = get(originalRow, key);\n\t\t\tlet newValue = get(r, key);\n\t\t\tconst isArray = Array.isArray(oldValue) || Array.isArray(newValue);\n\n\t\t\tif (isArray) {\n\t\t\t\tlet itemDirtyKeys;\n\t\t\t\tObject.keys(newValue).forEach((newIndex) => {\n\t\t\t\t\tconst oldIndex = oldValue ? oldValue.findIndex((o) => (o.id === newValue[newIndex].id)) : -1;\n\t\t\t\t\titemDirtyKeys = getDirtyKeys(newValue[newIndex], oldIndex > -1 ? oldValue[oldIndex] : {});\n\t\t\t\t\titemDirtyKeys = itemDirtyKeys.map((k2) => `${key}.${newIndex}.${k2}`);\n\t\t\t\t\tdirtyKeys = dirtyKeys.concat(itemDirtyKeys);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Stringify for easier comparison.\n\t\t\tif (typeof oldValue !== 'string') {\n\t\t\t\toldValue = JSON.stringify(oldValue);\n\t\t\t}\n\t\t\tif (typeof newValue !== 'string') {\n\t\t\t\tnewValue = JSON.stringify(newValue);\n\t\t\t}\n\n\t\t\tif (newValue !== oldValue) {\n\t\t\t\tdirtyKeys.push(key);\n\t\t\t}\n\t\t});\n\n\t\treturn dirtyKeys;\n\t};\n\n\tconst setValues = (e, name, value, afterChange = null, files = null) => {\n\t\tconst newRow = { ...formState.row };\n\t\tset(newRow, name, value);\n\n\t\tif (afterChange) {\n\t\t\tconst additionalChanges = afterChange(e, newRow, value);\n\t\t\tObject.keys(additionalChanges).forEach((key) => {\n\t\t\t\tset(newRow, key, additionalChanges[key]);\n\t\t\t});\n\t\t}\n\n\t\tconst newFormState = {\n\t\t\t...formState,\n\t\t\trow: newRow,\n\t\t};\n\t\tif (files !== null) {\n\t\t\tset(newFormState, `files.${name}`, files);\n\t\t}\n\n\t\tsetFormState(newFormState);\n\t\tif (formState.setRow) {\n\t\t\tformState.setRow(newRow);\n\t\t}\n\t};\n\n\tconst value = useMemo(() => ({\n\t\tformState,\n\t\tsetFormState,\n\t\tclearAlert: () => (setFormState({ ...formState, alertText: '', alertClass: '' })),\n\t\tclearErrors: () => (setFormState({ ...formState, errors: {} })),\n\t\tgetDirtyKeys: () => (getDirtyKeys(formState.row, formState.originalRow)),\n\t\tsetValues,\n\t}), [formState]);\n\n\treturn (\n\t\t<FormContext.Provider value={value}>\n\t\t\t<FormInner {...otherProps}>\n\t\t\t\t{children}\n\t\t\t</FormInner>\n\t\t</FormContext.Provider>\n\t);\n}\n\nForm.propTypes = {\n\tafterSubmitFailure: PropTypes.func,\n\tafterSubmitSuccess: PropTypes.func,\n\tchildren: PropTypes.node,\n\trow: PropTypes.object,\n\tsetRow: PropTypes.func,\n\tshowInlineErrors: PropTypes.bool,\n};\n\nForm.defaultProps = {\n\tafterSubmitFailure: null,\n\tafterSubmitSuccess: null,\n\tchildren: null,\n\trow: {},\n\tsetRow: null,\n\tshowInlineErrors: true,\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport Alert from './Alert';\nimport FormContext from './FormContext';\n\nexport default function FormAlert({ ...otherProps }) {\n\tconst { formState } = useContext(FormContext);\n\n\tif (!formState.alertText) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<Alert type={formState.alertClass} {...otherProps}>{formState.alertText}</Alert>\n\t);\n}\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nexport default function Spinner({ loadingText }) {\n\tconst { promiseInProgress } = usePromiseTracker();\n\tif (!promiseInProgress) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<div className=\"formosa-spinner formosa-spinner--fullscreen\" role=\"status\">{loadingText}</div>\n\t);\n}\n\nSpinner.propTypes = {\n\tloadingText: PropTypes.string,\n};\n\nSpinner.defaultProps = {\n\tloadingText: 'Loading...',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CloseIcon } from '../svg/x.svg';\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\n\nexport default function Toast({\n\tclassName,\n\tid,\n\tmilliseconds,\n\ttext,\n}) {\n\tconst { removeToast } = useContext(FormosaContext);\n\n\treturn (\n\t\t<div aria-live=\"polite\" className={`formosa-toast ${className}`.trim()} role=\"alert\" style={{ animationDuration: `${milliseconds}ms` }}>\n\t\t\t<div className=\"formosa-toast__text\">{text}</div>\n\t\t\t<button className=\"formosa-toast__close\" onClick={() => (removeToast(id))} type=\"button\">\n\t\t\t\t<CloseIcon aria-hidden=\"true\" className=\"formosa-toast__close-icon\" height={12} width={12} />\n\t\t\t\tClose\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nToast.propTypes = {\n\tclassName: PropTypes.string,\n\tid: PropTypes.string.isRequired,\n\tmilliseconds: PropTypes.number.isRequired,\n\ttext: PropTypes.string.isRequired,\n};\n\nToast.defaultProps = {\n\tclassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport Toast from './Toast';\n\nexport default function ToastContainer() {\n\tconst { toasts } = useContext(FormosaContext);\n\treturn (\n\t\t<div className=\"formosa-toast-container\">\n\t\t\t{Object.keys(toasts).map((id) => (\n\t\t\t\t<Toast\n\t\t\t\t\tclassName={toasts[id].className}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tid={id}\n\t\t\t\t\tmilliseconds={toasts[id].milliseconds}\n\t\t\t\t\ttext={toasts[id].text}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n","import React, { useMemo, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\nimport Spinner from './Spinner';\nimport ToastContainer from './ToastContainer';\n\nexport default function FormContainer({ children, loadingText }) {\n\tconst [showWarningPrompt, setShowWarningPrompt] = useState(true);\n\tconst [toasts, setToasts] = useState({});\n\n\tconst removeToast = (toastId) => {\n\t\tconst newToasts = { ...toasts };\n\t\tif (Object.prototype.hasOwnProperty.call(toasts, toastId)) {\n\t\t\tdelete newToasts[toastId];\n\t\t\tsetToasts(newToasts);\n\t\t}\n\t};\n\n\tconst addToast = (text, type = '', milliseconds = 5000) => {\n\t\tconst toastId = new Date().getTime();\n\t\tconst toast = {\n\t\t\tclassName: type ? `formosa-toast--${type}` : '',\n\t\t\ttext,\n\t\t\tmilliseconds,\n\t\t};\n\t\tconst newToasts = {\n\t\t\t...toasts,\n\t\t\t[toastId]: toast,\n\t\t};\n\t\tsetToasts(newToasts);\n\t\tsetTimeout(() => {\n\t\t\tremoveToast(toastId);\n\t\t}, milliseconds);\n\t};\n\n\tconst disableWarningPrompt = () => {\n\t\tsetShowWarningPrompt(false);\n\t};\n\n\tconst enableWarningPrompt = () => {\n\t\tsetShowWarningPrompt(true);\n\t};\n\n\tconst value = useMemo(() => ({\n\t\ttoasts,\n\t\tshowWarningPrompt,\n\t\taddToast,\n\t\tremoveToast,\n\t\tdisableWarningPrompt,\n\t\tenableWarningPrompt,\n\t}), [toasts, showWarningPrompt]);\n\n\treturn (\n\t\t<FormosaContext.Provider value={value}>\n\t\t\t{children}\n\t\t\t<Spinner loadingText={loadingText} />\n\t\t\t<ToastContainer />\n\t\t</FormosaContext.Provider>\n\t);\n}\n\nFormContainer.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tloadingText: PropTypes.string,\n};\n\nFormContainer.defaultProps = {\n\tloadingText: 'Loading...',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Submit({\n\tclassName,\n\tlabel,\n\tprefix,\n\tpostfix,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className=\"formosa-field formosa-field--submit\">\n\t\t\t<div className=\"formosa-label-wrapper formosa-label-wrapper--submit\" />\n\t\t\t<div className=\"formosa-input-wrapper formosa-input-wrapper--submit\">\n\t\t\t\t{prefix}\n\t\t\t\t<button\n\t\t\t\t\tclassName={`formosa-button formosa-button--submit ${className}`.trim()}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t{...otherProps}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</button>\n\t\t\t\t{postfix}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSubmit.propTypes = {\n\tclassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n};\n\nSubmit.defaultProps = {\n\tclassName: '',\n\tlabel: 'Submit',\n\tprefix: null,\n\tpostfix: null,\n};\n","import './style.scss';\nimport alert from './js/Alert';\nimport api from './js/Helpers/Api';\nimport { ReactComponent as checkIcon } from './svg/check.svg';\nimport error from './js/Error';\nimport exportableInput from './js/ExportableInput';\nimport field from './js/Field';\nimport form from './js/Form';\nimport formAlert from './js/FormAlert';\nimport formContainer from './js/FormContainer';\nimport formContext from './js/FormContext';\nimport formosaContext from './js/FormosaContext';\nimport label from './js/Label';\nimport submit from './js/Submit';\n\nexport const Alert = alert;\nexport const Api = api;\nexport const CheckIcon = checkIcon;\nexport const Error = error;\nexport const Field = field;\nexport const Form = form;\nexport const FormAlert = formAlert;\nexport const FormContainer = formContainer;\nexport const FormContext = formContext;\nexport const FormosaContext = formosaContext;\nexport const Input = exportableInput;\nexport const Label = label;\nexport const Submit = submit;\n"],"names":["Alert","className","children","type","otherProps","alertClass","React","propTypes","PropTypes","string","node","isRequired","defaultProps","findIncluded","included","id","mainRecord","output","Object","prototype","hasOwnProperty","call","attributes","meta","find","data","deserializeSingle","otherRows","includedRecord","keys","relationships","forEach","relationshipName","Array","isArray","rel","i","deserialize","body","push","cleanSingleRelationship","values","cleanRelationship","map","value","getIncludedItemData","relName","childRelationshipNames","dirtyRelationships","relIndex","relData","startsWith","key","includes","childRel","set","hasAttributes","length","hasRelationships","getIncluded","dirtyKeys","relationshipNames","currentKeys","split","k","get","join","shift","unset","obj","lastKey","pop","o","appendToFormData","formData","prefix","entries","entry","newKey","append","JSON","stringify","getBody","method","formState","filterBody","filterValues","row","fileKeys","files","firstPartOfKey","replace","parse","filenames","filter","filename","FormData","Api","instance","responses","url","showSpinner","request","post","put","options","headers","Accept","getToken","Authorization","fullUrl","process","env","REACT_APP_API_URL","event","CustomEvent","cancelable","detail","document","dispatchEvent","Promise","resolve","promise","fetch","then","response","ok","json","error","SyntaxError","errors","title","status","trackPromise","window","FORMOSA_TOKEN","setToken","token","createContext","alertText","originalRow","setRow","toastClass","toastText","uuid","Error","name","useContext","FormContext","hasError","props","e","normalizeOptions","labelKey","valueKey","option","label","escapeRegExp","toSlug","s","toLowerCase","filterByKey","records","escapedValue","record","recordValue","toString","match","RegExp","sort","a","b","aValue","bValue","aPos","indexOf","bPos","localeCompare","Autocomplete","afterAdd","afterChange","clearable","clearButtonAttributes","clearButtonClassName","clearIconAttributes","clearIconHeight","clearIconWidth","clearText","disabled","inputClassName","labelFn","loadingText","max","optionButtonAttributes","optionButtonClassName","optionLabelFn","optionListAttributes","optionListClassName","optionListItemAttributes","optionListItemClassName","placeholder","readOnly","removeButtonAttributes","removeButtonClassName","removeIconAttributes","removeIconHeight","removeIconWidth","removeText","setValue","showLoading","valueListItemAttributes","wrapperAttributes","wrapperClassName","setValues","clearButtonRef","useRef","inputRef","removeButtonRef","useState","setFilter","isOpen","setIsOpen","highlightedIndex","setHighlightedIndex","optionValues","setOptionValues","isLoading","setIsLoading","loadError","setLoadError","api","useEffect","currentValue","undefined","currentValueLength","isSelected","findIndex","v","filteredOptions","focus","current","addValue","newValue","target","removeValue","index","splice","onChange","onFocus","onKeyDown","filterValue","preventDefault","onKeyUp","onClickOption","val","getAttribute","onClickRemoveOption","button","tagName","toUpperCase","parentNode","clear","showClear","canAddValues","wrapperProps","trim","isJson","valueListItemProps","removeButtonProps","removeIconProps","CloseIcon","optionClassName","optionListItemProps","optionButtonProps","func","bool","object","number","oneOfType","array","arrayOf","Checkbox","iconAttributes","iconClassName","iconHeight","iconWidth","checked","CheckIcon","CheckboxList","fieldsetAttributes","fieldsetClassName","inputAttributes","itemAttributes","itemClassName","itemLabelAttributes","itemLabelClassName","itemSpanAttributes","itemSpanClassName","legend","currentValueStringified","optionValue","optionValueVal","itemProps","itemLabelProps","inputProps","iconProps","itemSpanProps","File","buttonAttributes","buttonClassName","emptyText","imageAttributes","imageClassName","imageHeight","imagePrefix","imagePreview","inputWrapperAttributes","inputWrapperClassName","linkAttributes","linkClassName","linkImage","multiple","required","hasValue","getFilenames","FileList","numFiles","item","getSrcs","URL","createObjectURL","v2","setFilenames","srcs","setSrcs","newFiles","onRemove","prefixClassName","hiddenProps","buttonProps","src","img","ConditionalWrapper","condition","any","Input","suffix","Password","hideAria","hideText","showAria","showText","tempType","setTempType","togglePassword","Radio","Search","SearchIcon","Select","hideBlank","optionAttributes","from","selected","querySelector","optionProps","CaretIcon","Textarea","component","ExportableInput","InputComponent","getInputElement","Label","htmlFor","note","labelClassName","hasFieldset","Field","inputInnerWrapperAttributes","inputInnerWrapperClassName","labelAttributes","labelNote","labelPosition","postfix","input","labelComponent","cleanName","wrapperClassNameList","inputWrapperClassNameList","inputInnerWrapperClassNameList","showInlineErrors","toasts","showWarningPrompt","addToast","removeToast","disableWarningPrompt","enableWarningPrompt","FormInner","afterNoSubmit","beforeSubmit","clearOnSubmit","defaultRow","errorMessageText","errorToastText","htmlId","params","path","preventEmptyRequest","preventEmptyRequestText","showMessage","successMessageText","successToastText","setFormState","getDirtyKeys","FormosaContext","submitApiRequest","bodyString","source","pointer","parseInt","uuidv4","newState","onSubmit","Form","afterSubmitFailure","afterSubmitSuccess","setOriginalValue","fs","setFs","newRow","r","oldValue","itemDirtyKeys","newIndex","oldIndex","k2","concat","additionalChanges","newFormState","useMemo","clearAlert","clearErrors","FormAlert","Spinner","usePromiseTracker","promiseInProgress","Toast","milliseconds","text","animationDuration","ToastContainer","FormContainer","setShowWarningPrompt","setToasts","toastId","newToasts","Date","getTime","toast","setTimeout","Submit","alert","checkIcon","field","form","formAlert","formContainer","formContext","formosaContext","exportableInput","submit"],"mappings":"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"}