{"version":3,"file":"index.modern.js","sources":["../src/js/Helpers/JsonApi.js","../src/js/Helpers/Api.js","../src/js/FormContext.js","../src/js/Error.js","../src/js/Helpers/Options.js","../src/js/Input/Autocomplete.js","../src/js/Input/Checkbox.js","../src/js/Input/CheckboxList.js","../src/js/Input/File.js","../src/js/ConditionalWrapper.js","../src/js/Input.js","../src/js/Input/Password.js","../src/js/Input/Radio.js","../src/js/Input/Search.js","../src/js/Input/Select.js","../src/js/Input/Textarea.js","../src/js/FieldInput.js","../src/js/Helpers/FormState.js","../src/js/Input/HasMany.js","../src/js/ExportableInput.js","../src/js/Label.js","../src/js/Field.js","../src/js/FormosaContext.js","../src/js/Message.js","../src/js/FormInner.js","../src/js/Form.js","../src/js/Spinner.js","../src/js/Toast.js","../src/js/ToastContainer.js","../src/js/FormContainer.js","../src/js/Submit.js","../src/index.js"],"sourcesContent":["import get from 'get-value';\nimport set from 'set-value';\n\nconst findIncluded = (included, id, type, mainRecord) => {\n\tif (mainRecord && id === mainRecord.id && type === mainRecord.type) {\n\t\tconst output = {\n\t\t\tid: mainRecord.id,\n\t\t\ttype: mainRecord.type,\n\t\t};\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'attributes')) {\n\t\t\toutput.attributes = mainRecord.attributes;\n\t\t}\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'meta')) {\n\t\t\toutput.meta = mainRecord.meta;\n\t\t}\n\t\treturn output;\n\t}\n\treturn included.find((data) => (data.id === id && data.type === type));\n};\n\nconst deserializeSingle = (data, otherRows = [], included = [], mainRecord = null) => {\n\tif (!data) {\n\t\treturn data;\n\t}\n\tconst output = {\n\t\tid: data.id,\n\t\ttype: data.type,\n\t\t...data.attributes,\n\t};\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'relationships')) {\n\t\tlet includedRecord;\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\toutput[relationshipName] = data.relationships[relationshipName].data;\n\t\t\tif (Array.isArray(output[relationshipName])) {\n\t\t\t\toutput[relationshipName].forEach((rel, i) => {\n\t\t\t\t\tincludedRecord = findIncluded(included, rel.id, rel.type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tincludedRecord = findIncluded(otherRows, rel.id, rel.type, mainRecord);\n\t\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (output[relationshipName] !== null) {\n\t\t\t\tincludedRecord = findIncluded(included, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\tif (includedRecord) {\n\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t} else {\n\t\t\t\t\tincludedRecord = findIncluded(otherRows, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'meta')) {\n\t\toutput.meta = data.meta;\n\t}\n\n\treturn output;\n};\n\nexport const deserialize = (body) => {\n\tif (Array.isArray(body.data)) {\n\t\tconst output = [];\n\t\tbody.data.forEach((data) => {\n\t\t\toutput.push(deserializeSingle(data, body.data, body.included, null));\n\t\t});\n\t\treturn output;\n\t}\n\treturn deserializeSingle(body.data, [], body.included, body.data);\n};\n\nconst cleanSingleRelationship = (values) => ({\n\tid: values.id,\n\ttype: values.type,\n});\n\nconst cleanRelationship = (values) => {\n\tif (Array.isArray(values)) {\n\t\treturn values.map((value) => cleanSingleRelationship(value));\n\t}\n\treturn cleanSingleRelationship(values);\n};\n\nconst getIncluded = (data, dirtyIncluded, relationshipNames) => {\n\tconst included = [];\n\n\tconst dirtyKeys = {};\n\tdirtyIncluded.forEach((key) => {\n\t\tif (!key.startsWith('_new.')) {\n\t\t\tconst currentKeys = [];\n\t\t\tkey.split('.').forEach((k) => {\n\t\t\t\tcurrentKeys.push(k);\n\t\t\t\tif (typeof get(dirtyKeys, currentKeys.join('.')) === 'undefined') {\n\t\t\t\t\tset(dirtyKeys, currentKeys.join('.'), {});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\trelationshipNames.forEach((relationshipName) => {\n\t\tif (!Object.prototype.hasOwnProperty.call(data.relationships, relationshipName)) {\n\t\t\t// This relationship isn't defined.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Object.prototype.hasOwnProperty.call(dirtyKeys, relationshipName)) {\n\t\t\t// No related records' attributes have changed.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Array.isArray(data.relationships[relationshipName].data)) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata.relationships[relationshipName].data.forEach((rel) => {\n\t\t\tif (Object.keys(rel).length <= 2) {\n\t\t\t\t// This relationship only has an id and type.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyKeys[relationshipName], rel.id)) {\n\t\t\t\tconst relData = {\n\t\t\t\t\tid: rel.id,\n\t\t\t\t\ttype: rel.type,\n\t\t\t\t\tattributes: {},\n\t\t\t\t};\n\n\t\t\t\tif (Object.keys(dirtyKeys[relationshipName][rel.id]).length === 0) {\n\t\t\t\t\t// This is a new record; include all attributes.\n\t\t\t\t\tObject.keys(rel).forEach((key) => {\n\t\t\t\t\t\tif (key !== 'id' && key !== 'type') {\n\t\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// This is an existing record; include only the dirty attributes.\n\t\t\t\t\tObject.keys(rel).forEach((key) => {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyKeys[relationshipName][rel.id], key)) {\n\t\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tincluded.push(relData);\n\t\t\t}\n\t\t});\n\t});\n\n\treturn included;\n};\n\nconst unset = (obj, key) => {\n\tif (Object.prototype.hasOwnProperty.call(obj, key)) {\n\t\treturn delete obj[key];\n\t}\n\n\tconst keys = key.split('.');\n\tconst lastKey = keys.pop();\n\tlet o = obj;\n\tkeys.forEach((k) => {\n\t\to = o[k];\n\t});\n\treturn delete o[lastKey];\n};\n\nexport const getBody = (\n\tmethod,\n\ttype,\n\tid,\n\tformState,\n\trelationshipNames,\n\tfilterBody,\n\tfilterValues\n) => {\n\tlet body = null;\n\n\tif (method === 'PUT' || method === 'POST') {\n\t\tbody = {};\n\t\tconst data = {\n\t\t\ttype,\n\t\t\tattributes: {},\n\t\t\tmeta: {},\n\t\t\trelationships: {},\n\t\t};\n\t\tconst keys = method === 'PUT' ? formState.dirty : Object.keys(formState.row);\n\n\t\tif (method === 'PUT' && id) {\n\t\t\tdata.id = id;\n\t\t}\n\n\t\tlet values = { ...formState.row };\n\t\tif (filterValues) {\n\t\t\tvalues = filterValues(values);\n\t\t}\n\n\t\tconst fileKeys = Object.keys(formState.files);\n\n\t\tkeys.forEach((key) => {\n\t\t\tconst cleanKey = key.replace(/\\..+$/, '');\n\t\t\tif (relationshipNames.includes(cleanKey)) {\n\t\t\t\tdata.relationships[cleanKey] = {\n\t\t\t\t\tdata: get(values, cleanKey),\n\t\t\t\t};\n\t\t\t} else if (relationshipNames.includes(key)) {\n\t\t\t\tdata.relationships[key] = {\n\t\t\t\t\tdata: get(values, cleanKey),\n\t\t\t\t};\n\t\t\t} else if (key.startsWith('meta.')) {\n\t\t\t\tset(data, key, get(values, key));\n\t\t\t} else if (key === 'meta') {\n\t\t\t\tdata.meta = values.meta;\n\t\t\t} else if (fileKeys.includes(key)) {\n\t\t\t\tunset(data.attributes, key);\n\t\t\t} else if (key !== '_new' && !key.startsWith('_new.')) {\n\t\t\t\tset(data.attributes, key, get(values, key));\n\t\t\t}\n\t\t});\n\n\t\tbody.data = data;\n\n\t\tconst included = getIncluded(data, formState.dirtyIncluded, relationshipNames);\n\t\tif (included.length > 0) {\n\t\t\tbody.included = included;\n\t\t}\n\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\tif (typeof data.relationships[relationshipName].data === 'string') {\n\t\t\t\tif (data.relationships[relationshipName].data === '') {\n\t\t\t\t\tdata.relationships[relationshipName].data = null;\n\t\t\t\t} else {\n\t\t\t\t\tdata.relationships[relationshipName].data = JSON.parse(data.relationships[relationshipName].data);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (data.relationships[relationshipName].data) {\n\t\t\t\tdata.relationships[relationshipName].data = cleanRelationship(data.relationships[relationshipName].data);\n\t\t\t}\n\t\t});\n\n\t\tif (filterBody) {\n\t\t\tbody = filterBody(body, formState.row);\n\t\t}\n\n\t\tif (Object.keys(data.attributes).length <= 0) {\n\t\t\tdelete data.attributes;\n\t\t}\n\t\tif (Object.keys(data.meta).length <= 0) {\n\t\t\tdelete data.meta;\n\t\t}\n\t\tif (Object.keys(data.relationships).length <= 0) {\n\t\t\tdelete data.relationships;\n\t\t}\n\n\t\tconst filenames = fileKeys.filter((filename) => (formState.files[filename] !== false));\n\t\tif (filenames.length > 0) {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('json', JSON.stringify(body));\n\t\t\tformData.append('files', JSON.stringify(filenames));\n\n\t\t\tfilenames.forEach((filename) => {\n\t\t\t\tformData.append(filename, formState.files[filename]);\n\t\t\t});\n\n\t\t\tbody = formData;\n\t\t} else {\n\t\t\tbody = JSON.stringify(body);\n\t\t}\n\t}\n\n\treturn body;\n};\n","import { deserialize } from './JsonApi';\nimport { trackPromise } from 'react-promise-tracker';\n\nexport default class Api {\n\tstatic get(url, showSpinner = true) {\n\t\treturn Api.request('GET', url, null, showSpinner);\n\t}\n\n\tstatic delete(url, showSpinner = true) {\n\t\treturn Api.request('DELETE', url, null, showSpinner);\n\t}\n\n\tstatic post(url, body, showSpinner = true) {\n\t\treturn Api.request('POST', url, body, showSpinner);\n\t}\n\n\tstatic put(url, body, showSpinner = true) {\n\t\treturn Api.request('PUT', url, body, showSpinner);\n\t}\n\n\tstatic request(method, url, body = null, showSpinner = true) {\n\t\tconst options = {\n\t\t\tmethod,\n\t\t\theaders: {\n\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t},\n\t\t};\n\t\tif (typeof body === 'string') {\n\t\t\toptions.headers['Content-Type'] = 'application/json';\n\t\t}\n\t\tif (Api.getToken()) {\n\t\t\toptions.headers.Authorization = `Bearer ${Api.getToken()}`;\n\t\t}\n\t\tif (body) {\n\t\t\toptions.body = body;\n\t\t}\n\n\t\tconst fullUrl = url.startsWith('http') ? url : `${process.env.REACT_APP_API_URL}/${url}`;\n\n\t\tconst event = new CustomEvent('formosaApiRequest', { cancelable: true, detail: { url: fullUrl, options } });\n\t\tif (!document.dispatchEvent(event)) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst promise = fetch(fullUrl, options)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\t\tjson.status = response.status;\n\t\t\t\t\t\t\tthrow json;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tif (error instanceof SyntaxError) {\n\t\t\t\t\t\t\t\tthrow { // eslint-disable-line no-throw-literal\n\t\t\t\t\t\t\t\t\terrors: [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\ttitle: 'The server returned invalid JSON.',\n\t\t\t\t\t\t\t\t\t\t\tstatus: '500',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (response.status === 204) {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t\treturn response.json();\n\t\t\t})\n\t\t\t.then((json) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(json, 'data')) {\n\t\t\t\t\treturn deserialize(json);\n\t\t\t\t}\n\t\t\t\treturn json;\n\t\t\t});\n\n\t\treturn showSpinner ? trackPromise(promise) : promise;\n\t}\n\n\tstatic getToken() {\n\t\treturn window.FORMOSA_TOKEN;\n\t}\n\n\tstatic setToken(token) {\n\t\twindow.FORMOSA_TOKEN = token;\n\t}\n}\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\tdirty: [],\n\t\tdirtyIncluded: [],\n\t\terrors: {},\n\t\tfiles: {},\n\t\tmessage: '',\n\t\trow: {},\n\t\tsetRow: null,\n\t\tsetValues: null,\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport PropTypes from 'prop-types';\n\nexport default function Error({\n\tid,\n\tname,\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst hasError = formState && Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst props = {};\n\tif (name) {\n\t\t// Used for matching the attribute name from the API to this error element.\n\t\tprops['data-name'] = name;\n\t}\n\tif (id || name) {\n\t\tprops.id = `${id || name}-error`;\n\t}\n\n\treturn (\n\t\t<div className=\"formosa-field__error\" {...props}>\n\t\t\t{hasError && formState.errors[name].map((e) => (<div key={e}>{e}</div>))}\n\t\t</div>\n\t);\n}\n\nError.propTypes = {\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n};\n\nError.defaultProps = {\n\tid: null,\n\tname: '',\n};\n","import get from 'get-value';\n\nexport const normalizeOptions = (options, labelKey, valueKey = null) => {\n\tif (!options) {\n\t\treturn [];\n\t}\n\n\tconst output = [];\n\tif (Array.isArray(options)) {\n\t\toptions.forEach((option) => {\n\t\t\tif (typeof option === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue: option,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tObject.keys(options).forEach((value) => {\n\t\t\tconst option = options[value];\n\t\t\tif (typeof value === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn output;\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nexport const escapeRegExp = (string) => (string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'));\n\nconst toSlug = (s) => (\n\ts.toLowerCase()\n\t\t.replace(/ & /g, '-and-')\n\t\t.replace(/<[^>]+>/g, '')\n\t\t.replace(/['’.]/g, '')\n\t\t.replace(/[^a-z0-9-]+/g, '-')\n\t\t.replace(/^-+/, '')\n\t\t.replace(/-+$/, '')\n\t\t.replace(/--+/g, '-')\n);\n\nexport const filterByKey = (records, key, value) => {\n\tvalue = value.toLowerCase();\n\tconst escapedValue = escapeRegExp(value);\n\trecords = records.filter((record) => {\n\t\tconst recordValue = get(record, key).toString().toLowerCase() || '';\n\t\treturn recordValue.match(new RegExp(`(^|[^a-z])${escapedValue}`));\n\t});\n\tvalue = toSlug(value);\n\trecords = records.sort((a, b) => {\n\t\tconst aValue = toSlug(get(a, key).toString());\n\t\tconst bValue = toSlug(get(b, key).toString());\n\t\tconst aPos = aValue.indexOf(value) === 0;\n\t\tconst bPos = bValue.indexOf(value) === 0;\n\t\tif ((aPos && bPos) || (!aPos && !bPos)) {\n\t\t\treturn aValue.localeCompare(bValue);\n\t\t}\n\t\tif (aPos && !bPos) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\treturn records;\n};\n","import { filterByKey, normalizeOptions } from '../Helpers/Options';\nimport React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CloseIcon } from '../../svg/x.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Autocomplete({\n\tafterAdd,\n\tafterChange,\n\tclearable,\n\tclearButtonAttributes,\n\tclearButtonClassName,\n\tclearIconAttributes,\n\tclearIconHeight,\n\tclearIconWidth,\n\tclearText,\n\tdisabled,\n\tid,\n\tinputClassName,\n\tlabelFn,\n\tlabelKey,\n\tloadingText,\n\tmax,\n\tname,\n\toptionButtonAttributes,\n\toptionButtonClassName,\n\toptionListAttributes,\n\toptionListClassName,\n\toptionListItemAttributes,\n\toptionListItemClassName,\n\toptions,\n\tplaceholder,\n\treadOnly,\n\tremoveButtonAttributes,\n\tremoveButtonClassName,\n\tremoveIconAttributes,\n\tremoveIconHeight,\n\tremoveIconWidth,\n\tremoveText,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst clearButtonRef = useRef(null);\n\tconst inputRef = useRef(null);\n\tconst removeButtonRef = useRef(null);\n\tconst [filter, setFilter] = useState('');\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [highlightedIndex, setHighlightedIndex] = useState(0);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [message, setMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url, false)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetMessage(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t\treturn () => {};\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t\treturn () => {};\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\">{loadingText}</div>);\n\t}\n\n\tif (message) {\n\t\treturn (<div className=\"formosa-field__error\">{message}</div>);\n\t}\n\n\tlet currentValue = null;\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Autocomplete> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined || currentValue === '') {\n\t\tcurrentValue = null;\n\t} else if (max === 1 && !Array.isArray(currentValue)) {\n\t\tcurrentValue = [currentValue];\n\t}\n\tconst currentValueLength = currentValue ? currentValue.length : 0;\n\n\tconst isSelected = (option) => {\n\t\tif (!currentValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn currentValue.findIndex((v) => {\n\t\t\tif (typeof v === 'object') {\n\t\t\t\treturn JSON.stringify(v) === JSON.stringify(option.value);\n\t\t\t}\n\t\t\treturn v === option.value;\n\t\t}) > -1;\n\t};\n\n\tlet filteredOptions = [];\n\tif (filter) {\n\t\tfilteredOptions = filterByKey(optionValues, 'label', filter);\n\t\tfilteredOptions = filteredOptions.filter((option) => (!isSelected(option)));\n\t}\n\n\tconst focus = () => {\n\t\tsetTimeout(() => {\n\t\t\tif (inputRef.current) {\n\t\t\t\tinputRef.current.focus();\n\t\t\t}\n\t\t});\n\t};\n\n\tconst addValue = (v) => {\n\t\tlet newValue;\n\t\tif (max === 1) {\n\t\t\tnewValue = v;\n\t\t} else if (currentValue) {\n\t\t\tnewValue = [...currentValue, v];\n\t\t} else {\n\t\t\tnewValue = [v];\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\n\t\tsetIsOpen(false);\n\t\tsetFilter('');\n\t\tif (max === 1) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (removeButtonRef.current) {\n\t\t\t\t\tremoveButtonRef.current.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (max === currentValueLength) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (clearButtonRef.current) {\n\t\t\t\t\tclearButtonRef.current.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tfocus();\n\t\t}\n\n\t\tif (afterAdd) {\n\t\t\tafterAdd();\n\t\t}\n\t};\n\n\tconst removeValue = (v) => {\n\t\tlet newValue = [];\n\t\tif (currentValue) {\n\t\t\tnewValue = [...currentValue];\n\t\t}\n\t\tif (max !== 1) {\n\t\t\tconst index = newValue.indexOf(v);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\t\t} else {\n\t\t\tnewValue = '';\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\n\t\tfocus();\n\t};\n\n\tconst onChange = (e) => {\n\t\tsetFilter(e.target.value);\n\t};\n\n\tconst onFocus = () => {\n\t\tsetHighlightedIndex(0);\n\t\tsetIsOpen(filter.length > 0);\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t} else if (e.key === 'Backspace' && !filter && currentValueLength > 0) {\n\t\t\tremoveValue(currentValue[currentValueLength - 1]);\n\t\t}\n\t};\n\n\tconst onKeyUp = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t\taddValue(filteredOptions[highlightedIndex].value);\n\t\t} else if (e.key === 'ArrowDown') {\n\t\t\tif (highlightedIndex >= (filteredOptions.length - 1)) {\n\t\t\t\tsetHighlightedIndex(0);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(highlightedIndex + 1);\n\t\t\t}\n\t\t} else if (e.key === 'ArrowUp') {\n\t\t\tif (highlightedIndex > 0) {\n\t\t\t\tsetHighlightedIndex(highlightedIndex - 1);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(filteredOptions.length - 1);\n\t\t\t}\n\t\t} else if (e.key === 'Escape') {\n\t\t\tsetIsOpen(false);\n\t\t} else {\n\t\t\tsetHighlightedIndex(0);\n\t\t\tsetIsOpen(filterValue.length > 0);\n\t\t}\n\t};\n\n\tconst onClickOption = (e) => {\n\t\tlet val = e.target.getAttribute('data-value');\n\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\tval = JSON.parse(val);\n\t\t}\n\t\taddValue(val);\n\t};\n\n\tconst onClickRemoveOption = (e) => {\n\t\tlet button = e.target;\n\t\twhile (button && button.tagName.toUpperCase() !== 'BUTTON') {\n\t\t\tbutton = button.parentNode;\n\t\t}\n\t\tremoveValue(currentValue[button.getAttribute('data-index')]);\n\t};\n\n\tconst clear = () => {\n\t\tconst newValue = [];\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tconst e = { target: { name } };\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\n\t\tsetFilter('');\n\t\tfocus();\n\t};\n\n\tconst showClear = clearable && max !== 1 && currentValueLength > 0 && !disabled && !readOnly;\n\n\tlet className = ['formosa-autocomplete'];\n\tif (showClear) {\n\t\tclassName.push('formosa-autocomplete--clearable');\n\t}\n\tclassName = className.join(' ');\n\n\tconst canAddValues = !disabled && !readOnly && (max === null || currentValueLength < max);\n\n\tconst wrapperProps = {};\n\tif (id || name) {\n\t\twrapperProps.id = `${id || name}-wrapper`;\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${className} ${wrapperClassName}`.trim()}\n\t\t\tdata-value={JSON.stringify(max === 1 && currentValueLength > 0 ? currentValue[0] : currentValue)} /* For testing. */\n\t\t\t{...wrapperProps}\n\t\t\t{...wrapperAttributes}\n\t\t>\n\t\t\t<ul className=\"formosa-autocomplete__values\">\n\t\t\t\t{currentValue && currentValue.map((v, index) => {\n\t\t\t\t\tlet val = v;\n\t\t\t\t\tlet isJson = false;\n\t\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\t\tval = JSON.stringify(val);\n\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst option = optionValues.find((o) => (\n\t\t\t\t\t\tisJson ? JSON.stringify(o.value) === val : o.value === val\n\t\t\t\t\t));\n\n\t\t\t\t\tlet label = '';\n\t\t\t\t\tif (labelFn) {\n\t\t\t\t\t\tlabel = labelFn(option || v);\n\t\t\t\t\t} else if (option && Object.prototype.hasOwnProperty.call(option, 'label')) {\n\t\t\t\t\t\tlabel = option.label;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--item\" key={val}>\n\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t{!disabled && !readOnly && (\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__value__remove ${removeButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-index={index}\n\t\t\t\t\t\t\t\t\tonClick={onClickRemoveOption}\n\t\t\t\t\t\t\t\t\tref={removeButtonRef}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t{...removeButtonAttributes}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<CloseIcon aria-hidden=\"true\" height={removeIconHeight} width={removeIconWidth} {...removeIconAttributes} />\n\t\t\t\t\t\t\t\t\t{removeText}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t\t{canAddValues && (\n\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--input\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-autocomplete__input ${inputClassName}`.trim()}\n\t\t\t\t\t\t\tid={id || name}\n\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\tonKeyUp={onKeyUp}\n\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tvalue={filter}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</li>\n\t\t\t\t)}\n\t\t\t</ul>\n\n\t\t\t{isOpen && filteredOptions.length > 0 && (\n\t\t\t\t<ul className={`formosa-autocomplete__options ${optionListClassName}`.trim()} {...optionListAttributes}>\n\t\t\t\t\t{filteredOptions.map((option, index) => {\n\t\t\t\t\t\tlet optionClassName = ['formosa-autocomplete__option'];\n\t\t\t\t\t\tif (highlightedIndex === index) {\n\t\t\t\t\t\t\toptionClassName.push('formosa-autocomplete__option--highlighted');\n\t\t\t\t\t\t}\n\t\t\t\t\t\toptionClassName = optionClassName.join(' ');\n\n\t\t\t\t\t\tlet val = option.value;\n\t\t\t\t\t\tlet isJson = false;\n\t\t\t\t\t\tif (typeof val === 'object') {\n\t\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\t\tval = JSON.stringify(val);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tclassName={`${optionClassName} ${optionListItemClassName}`.trim()}\n\t\t\t\t\t\t\t\tkey={val}\n\t\t\t\t\t\t\t\t{...optionListItemAttributes}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__option__button ${optionButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-json={isJson}\n\t\t\t\t\t\t\t\t\tdata-value={val}\n\t\t\t\t\t\t\t\t\tonClick={onClickOption}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t{...optionButtonAttributes}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t)}\n\n\t\t\t{showClear && (\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-autocomplete__clear ${clearButtonClassName}`.trim()}\n\t\t\t\t\t\tonClick={clear}\n\t\t\t\t\t\tref={clearButtonRef}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...clearButtonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t<CloseIcon aria-hidden=\"true\" height={clearIconHeight} width={clearIconWidth} {...clearIconAttributes} />\n\t\t\t\t\t\t{clearText}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nAutocomplete.propTypes = {\n\tafterAdd: PropTypes.func,\n\tafterChange: PropTypes.func,\n\tclearable: PropTypes.bool,\n\tclearButtonAttributes: PropTypes.object,\n\tclearButtonClassName: PropTypes.string,\n\tclearIconAttributes: PropTypes.object,\n\tclearIconHeight: PropTypes.number,\n\tclearIconWidth: PropTypes.number,\n\tclearText: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputClassName: PropTypes.string,\n\tlabelFn: PropTypes.func,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tloadingText: PropTypes.string,\n\tmax: PropTypes.number,\n\tname: PropTypes.string,\n\toptionButtonAttributes: PropTypes.object,\n\toptionButtonClassName: PropTypes.string,\n\toptionListAttributes: PropTypes.object,\n\toptionListClassName: PropTypes.string,\n\toptionListItemAttributes: PropTypes.object,\n\toptionListItemClassName: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tplaceholder: PropTypes.string,\n\treadOnly: PropTypes.bool,\n\tremoveButtonAttributes: PropTypes.object,\n\tremoveButtonClassName: PropTypes.string,\n\tremoveIconAttributes: PropTypes.object,\n\tremoveIconHeight: PropTypes.number,\n\tremoveIconWidth: PropTypes.number,\n\tremoveText: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.arrayOf(PropTypes.object),\n\t\tPropTypes.arrayOf(PropTypes.string),\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nAutocomplete.defaultProps = {\n\tafterAdd: null,\n\tafterChange: null,\n\tclearable: true,\n\tclearButtonAttributes: null,\n\tclearButtonClassName: '',\n\tclearIconAttributes: null,\n\tclearIconHeight: 12,\n\tclearIconWidth: 12,\n\tclearText: 'Clear',\n\tdisabled: false,\n\tid: '',\n\tinputClassName: '',\n\tlabelFn: null,\n\tlabelKey: 'name',\n\tloadingText: 'Loading...',\n\tmax: null,\n\tname: '',\n\toptionButtonAttributes: null,\n\toptionButtonClassName: '',\n\toptionListAttributes: null,\n\toptionListClassName: '',\n\toptionListItemAttributes: null,\n\toptionListItemClassName: '',\n\toptions: null,\n\tplaceholder: 'Search',\n\treadOnly: false,\n\tremoveButtonAttributes: null,\n\tremoveButtonClassName: '',\n\tremoveIconAttributes: null,\n\tremoveIconHeight: 12,\n\tremoveIconWidth: 12,\n\tremoveText: 'Remove',\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Checkbox({\n\tafterChange,\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tname,\n\tsetValue,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tlet checked = false;\n\tif (setValue !== null) {\n\t\tchecked = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Checkbox> component must be inside a <Form> component.');\n\t\t}\n\t\tchecked = !!get(formState.row, name);\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.checked;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\tchecked={checked}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<CheckIcon\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={`formosa-icon--check ${iconClassName}`.trim()}\n\t\t\t\theight={iconHeight}\n\t\t\t\twidth={iconWidth}\n\t\t\t\t{...iconAttributes}\n\t\t\t/>\n\t\t</>\n\t);\n}\n\nCheckbox.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.bool,\n};\n\nCheckbox.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tvalue: null,\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function CheckboxList({\n\tafterChange,\n\tclassName,\n\tdisabled,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tlabelAttributes,\n\tlabelClassName,\n\tlabelKey,\n\tlistAttributes,\n\tlistClassName,\n\tlistItemAttributes,\n\tlistItemClassName,\n\tloadingText,\n\tname,\n\toptions,\n\treadOnly,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [message, setMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url, false)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetMessage(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t\treturn () => {};\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t\treturn () => {};\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\">{loadingText}</div>);\n\t}\n\n\tif (message) {\n\t\treturn (<div className=\"formosa-field__error\">{message}</div>);\n\t}\n\n\tlet currentValue = [];\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<CheckboxList> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined || currentValue === '') {\n\t\tcurrentValue = [];\n\t}\n\tcurrentValue = currentValue.map((val) => (typeof val === 'object' ? JSON.stringify(val) : val));\n\n\tconst onChange = (e) => {\n\t\tconst newValue = [...currentValue];\n\t\tlet val = e.target.value;\n\n\t\tif (e.target.checked) {\n\t\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\t\tval = JSON.parse(val);\n\t\t\t}\n\t\t\tnewValue.push(val);\n\t\t} else {\n\t\t\tconst index = currentValue.indexOf(val);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\treturn (\n\t\t<ul className={`formosa-radio ${listClassName}`.trim()} {...listAttributes}>\n\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\tlet isJson = false;\n\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\tisJson = true;\n\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t}\n\n\t\t\t\tconst checked = currentValue.includes(optionValueVal);\n\n\t\t\t\tconst optionProps = {};\n\t\t\t\tif (isJson) {\n\t\t\t\t\toptionProps['data-json'] = true;\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\toptionProps.name = `${name}[]`;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<li className={`formosa-radio__item ${listItemClassName}`.trim()} key={optionValueVal} {...listItemAttributes}>\n\t\t\t\t\t\t<div className=\"formosa-input-wrapper formosa-input-wrapper--checkbox\">\n\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\tclassName={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${labelClassName}`.trim()}\n\t\t\t\t\t\t\t\t{...labelAttributes}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\t\treadOnly={readOnly}\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\tvalue={optionValueVal}\n\t\t\t\t\t\t\t\t\t{...optionProps}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<CheckIcon\n\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\t\t\tclassName={`formosa-icon--check ${iconClassName}`.trim()}\n\t\t\t\t\t\t\t\t\theight={iconHeight}\n\t\t\t\t\t\t\t\t\twidth={iconWidth}\n\t\t\t\t\t\t\t\t\t{...iconAttributes}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t{optionValue.label}\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\n\nCheckboxList.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlistAttributes: PropTypes.object,\n\tlistClassName: PropTypes.string,\n\tlistItemAttributes: PropTypes.object,\n\tlistItemClassName: PropTypes.string,\n\tloadingText: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\treadOnly: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.arrayOf(PropTypes.number),\n\t\tPropTypes.arrayOf(PropTypes.object),\n\t\tPropTypes.arrayOf(PropTypes.string),\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nCheckboxList.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tdisabled: false,\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tlabelAttributes: null,\n\tlabelClassName: '',\n\tlabelKey: 'name',\n\tlistAttributes: null,\n\tlistClassName: '',\n\tlistItemAttributes: null,\n\tlistItemClassName: '',\n\tloadingText: 'Loading...',\n\tname: '',\n\toptions: null,\n\treadOnly: false,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n};\n","import React, { useContext, useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function File({\n\tafterChange,\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\tdisabled,\n\temptyText,\n\tid,\n\timageAttributes,\n\timageClassName,\n\timageHeight,\n\timagePrefix,\n\timagePreview,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tlinkAttributes,\n\tlinkClassName,\n\tlinkImage,\n\tmultiple,\n\tname,\n\treadOnly,\n\tremoveText,\n\trequired,\n\tsetValue,\n\tvalue,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst inputRef = useRef(null);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<File> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tconst hasValue = multiple ? currentValue.length > 0 : !!currentValue;\n\n\tconst getFilenames = (v) => {\n\t\tif (v instanceof FileList) {\n\t\t\tconst numFiles = v.length;\n\t\t\tconst output = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < numFiles; i += 1) {\n\t\t\t\toutput.push(v.item(i).name);\n\t\t\t}\n\t\t\treturn output.join(', ');\n\t\t}\n\t\tif (Array.isArray(v)) {\n\t\t\treturn v.join(', ');\n\t\t}\n\t\tif (typeof v === 'object') {\n\t\t\treturn v.name;\n\t\t}\n\t\treturn v;\n\t};\n\n\tconst getSrcs = (v) => {\n\t\tconst output = [];\n\t\tif (v instanceof FileList) {\n\t\t\tconst numFiles = v.length;\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < numFiles; i += 1) {\n\t\t\t\toutput.push(URL.createObjectURL(v.item(i)));\n\t\t\t}\n\t\t} else if (Array.isArray(v)) {\n\t\t\treturn v.map((v2) => (`${imagePrefix}${v2}`));\n\t\t} else if (typeof v === 'object') {\n\t\t\toutput.push(URL.createObjectURL(v));\n\t\t} else if (typeof v === 'string') {\n\t\t\toutput.push(`${imagePrefix}${v}`);\n\t\t}\n\t\treturn output;\n\t};\n\n\tconst [filenames, setFilenames] = useState(getFilenames(currentValue));\n\tconst [srcs, setSrcs] = useState(getSrcs(currentValue));\n\n\tuseEffect(() => {\n\t\tsetFilenames(getFilenames(currentValue));\n\t\tsetSrcs(getSrcs(currentValue));\n\t}, [currentValue]);\n\n\tconst onChange = (e) => {\n\t\tconst newFiles = multiple ? e.target.files : e.target.files.item(0);\n\n\t\tsetFilenames(getFilenames(newFiles));\n\t\tif (imagePreview) {\n\t\t\tsetSrcs(getSrcs(newFiles));\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newFiles);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newFiles, afterChange, newFiles);\n\t\t}\n\t};\n\n\tconst onRemove = (e) => {\n\t\tsetFilenames('');\n\n\t\tconst newValue = '';\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange, newValue);\n\t\t}\n\n\t\tinputRef.current.focus();\n\t};\n\n\tlet prefixClassName = inputWrapperClassName;\n\tif (hasValue && !disabled && !readOnly) {\n\t\tprefixClassName += ' formosa-prefix';\n\t}\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\n\tconst hiddenProps = {};\n\tif (name) {\n\t\thiddenProps.name = name;\n\t}\n\n\tconst buttonProps = {};\n\tif (id || name) {\n\t\tbuttonProps.id = `${id || name}-remove`;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{(hasValue && imagePreview) && (\n\t\t\t\tsrcs.map((src) => {\n\t\t\t\t\tconst img = (\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\tclassName={`formosa-file-image ${imageClassName}`.trim()}\n\t\t\t\t\t\t\theight={imageHeight}\n\t\t\t\t\t\t\tkey={src}\n\t\t\t\t\t\t\tsrc={src}\n\t\t\t\t\t\t\t{...imageAttributes}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\n\t\t\t\t\tif (linkImage) {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<a className={`formosa-file-link ${linkClassName}`.trim()} href={src} key={src} {...linkAttributes}>\n\t\t\t\t\t\t\t\t{img}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn img;\n\t\t\t\t})\n\t\t\t)}\n\t\t\t<div className={`formosa-file-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t\t<div className={`formosa-file-input-wrapper ${prefixClassName}`.trim()} {...inputWrapperAttributes}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`formosa-file-name${!filenames ? ' formosa-file-name--empty' : ''}`}\n\t\t\t\t\t\tid={`${id || name}-name`}\n\t\t\t\t\t>\n\t\t\t\t\t\t{filenames || emptyText}\n\t\t\t\t\t</div>\n\t\t\t\t\t{!readOnly && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-field__input--file ${className}`.trim()}\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\tmultiple={multiple}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\t{...props}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\t\ttype=\"hidden\"\n\t\t\t\t\t\t\t\tvalue={currentValue}\n\t\t\t\t\t\t\t\t{...hiddenProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t{hasValue && !disabled && !readOnly && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button formosa-button--remove-file formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...buttonProps}\n\t\t\t\t\t\t{...buttonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{removeText}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nFile.propTypes = {\n\tafterChange: PropTypes.func,\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\temptyText: PropTypes.string,\n\tid: PropTypes.string,\n\timageAttributes: PropTypes.object,\n\timageClassName: PropTypes.string,\n\timageHeight: PropTypes.number,\n\timagePrefix: PropTypes.string,\n\timagePreview: PropTypes.bool,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tlinkAttributes: PropTypes.object,\n\tlinkClassName: PropTypes.string,\n\tlinkImage: PropTypes.bool,\n\tmultiple: PropTypes.bool,\n\tname: PropTypes.string,\n\treadOnly: PropTypes.bool,\n\tremoveText: PropTypes.string,\n\trequired: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nFile.defaultProps = {\n\tafterChange: null,\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\tdisabled: false,\n\temptyText: 'No file selected.',\n\tid: '',\n\timageAttributes: null,\n\timageClassName: '',\n\timageHeight: 100,\n\timagePrefix: '',\n\timagePreview: false,\n\tinputWrapperAttributes: null,\n\tinputWrapperClassName: '',\n\tlinkAttributes: null,\n\tlinkClassName: '',\n\tlinkImage: false,\n\tmultiple: false,\n\tname: '',\n\treadOnly: false,\n\tremoveText: 'Remove',\n\trequired: false,\n\tsetValue: null,\n\tvalue: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function ConditionalWrapper({ children, className, condition }) {\n\tif (!condition) {\n\t\treturn children;\n\t}\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n\nConditionalWrapper.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tclassName: PropTypes.string,\n\tcondition: PropTypes.any,\n};\n\nConditionalWrapper.defaultProps = {\n\tclassName: '',\n\tcondition: false,\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport ConditionalWrapper from './ConditionalWrapper';\nimport FormContext from './FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Input({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsetValue,\n\tsuffix,\n\ttype,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Input> component must be inside a <Form> component.');\n\t\t}\n\t\tif (type !== 'file') {\n\t\t\tcurrentValue = get(formState.row, name);\n\t\t\tif (currentValue === null || currentValue === undefined) {\n\t\t\t\tcurrentValue = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.value;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<ConditionalWrapper className=\"formosa-suffix-container\" condition={suffix}>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input ${className}`.trim()}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype={type}\n\t\t\t\tvalue={currentValue}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t{suffix && <span className=\"formosa-suffix\">{suffix}</span>}\n\t\t</ConditionalWrapper>\n\t);\n}\n\nInput.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.string,\n\t]),\n};\n\nInput.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tsuffix: '',\n\ttype: 'text',\n\tvalue: null,\n};\n","import React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Input from '../Input';\nimport PropTypes from 'prop-types';\n\nexport default function Password({\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\thideText,\n\tshowText,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst [tempType, setTempType] = useState('password');\n\tconst togglePassword = () => {\n\t\tif (tempType === 'password') {\n\t\t\tsetTempType('text');\n\t\t} else {\n\t\t\tsetTempType('password');\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={`formosa-password-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tautoCorrect=\"off\"\n\t\t\t\tclassName={`formosa-field__input--password formosa-prefix ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t\ttype={tempType}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName={`formosa-button formosa-button--toggle-password formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\tonClick={togglePassword}\n\t\t\t\ttype=\"button\"\n\t\t\t\t{...buttonAttributes}\n\t\t\t>\n\t\t\t\t{tempType === 'password' ? showText : hideText}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nPassword.propTypes = {\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\thideText: PropTypes.string,\n\tshowText: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nPassword.defaultProps = {\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\thideText: 'Hide',\n\tshowText: 'Show',\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Radio({\n\tafterChange,\n\tclassName,\n\tlabel,\n\tlabelAttributes,\n\tlabelClassName,\n\tlabelKey,\n\tlistAttributes,\n\tlistClassName,\n\tlistItemAttributes,\n\tlistItemClassName,\n\tloadingText,\n\tname,\n\toptions,\n\trequired,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [message, setMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url, false)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetMessage(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t\treturn () => {};\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t\treturn () => {};\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\">{loadingText}</div>);\n\t}\n\n\tif (message) {\n\t\treturn (<div className=\"formosa-field__error\">{message}</div>);\n\t}\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Radio> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tif (typeof currentValue === 'object') {\n\t\tcurrentValue = JSON.stringify(currentValue);\n\t}\n\n\tconst onChange = (e) => {\n\t\tlet newValue = e.target.value;\n\t\tif (e.target.getAttribute('data-json') === 'true') {\n\t\t\tnewValue = JSON.parse(newValue);\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\treturn (\n\t\t<ul className={`formosa-radio ${listClassName}`.trim()} {...listAttributes}>\n\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\tlet isJson = false;\n\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\tisJson = true;\n\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t}\n\n\t\t\t\tconst checked = currentValue === optionValueVal;\n\n\t\t\t\tconst optionProps = {};\n\t\t\t\tif (isJson) {\n\t\t\t\t\toptionProps['data-json'] = true;\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\toptionProps.name = name;\n\t\t\t\t}\n\n\t\t\t\treturn (\n\t\t\t\t\t<li className={`formosa-radio__item ${listItemClassName}`.trim()} key={optionValueVal} {...listItemAttributes}>\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\tclassName={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${labelClassName}`.trim()}\n\t\t\t\t\t\t\t{...labelAttributes}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tchecked={checked}\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-radio__input ${className}`.trim()}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\tvalue={optionValueVal}\n\t\t\t\t\t\t\t\t{...optionProps}\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{optionValue.label}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t})}\n\t\t</ul>\n\t);\n}\n\nRadio.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlistAttributes: PropTypes.object,\n\tlistClassName: PropTypes.string,\n\tlistItemAttributes: PropTypes.object,\n\tlistItemClassName: PropTypes.string,\n\tloadingText: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\trequired: PropTypes.bool,\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nRadio.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tlabel: '',\n\tlabelAttributes: null,\n\tlabelClassName: '',\n\tlabelKey: 'name',\n\tlistAttributes: null,\n\tlistClassName: '',\n\tlistItemAttributes: null,\n\tlistItemClassName: '',\n\tloadingText: 'Loading...',\n\tname: '',\n\toptions: null,\n\trequired: false,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n};\n","import Input from '../Input';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as SearchIcon } from '../../svg/search.svg';\n\nexport default function Search({\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className={`formosa-search-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tclassName={`formosa-field__input--search ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<SearchIcon\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={`formosa-icon--search ${iconClassName}`.trim()}\n\t\t\t\theight={iconHeight}\n\t\t\t\twidth={iconWidth}\n\t\t\t\t{...iconAttributes}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nSearch.propTypes = {\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSearch.defaultProps = {\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CaretIcon } from '../../svg/caret.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Select({\n\tafterChange,\n\tclassName,\n\thideBlank,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tlabelKey,\n\tloadingText,\n\tname,\n\toptions,\n\tsetValue,\n\tshowLoading,\n\turl,\n\tvalue,\n\tvalueKey,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\tconst [isLoading, setIsLoading] = useState(showLoading || !!url);\n\tconst [message, setMessage] = useState('');\n\n\tuseEffect(() => {\n\t\tif (url) {\n\t\t\tApi.get(url, false)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'errors')) {\n\t\t\t\t\t\tsetMessage(error.errors.map((e) => (e.title)).join(' '));\n\t\t\t\t\t\tsetIsLoading(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : []);\n\t\treturn () => {};\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\tsetIsLoading(showLoading);\n\t\treturn () => {};\n\t}, [showLoading]);\n\n\tif (isLoading) {\n\t\treturn (<div className=\"formosa-spinner\">{loadingText}</div>);\n\t}\n\n\tif (message) {\n\t\treturn (<div className=\"formosa-field__error\">{message}</div>);\n\t}\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Select> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\tif (typeof currentValue === 'object') {\n\t\tcurrentValue = JSON.stringify(currentValue);\n\t}\n\n\tconst onChange = (e) => {\n\t\tlet newValue = e.target.value;\n\t\tconst option = e.target.querySelector(`[value=\"${newValue.replace(/\"/g, '\\\\\"')}\"]`);\n\t\tif (option.getAttribute('data-json') === 'true') {\n\t\t\tnewValue = JSON.parse(newValue);\n\t\t}\n\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<div className={`formosa-select-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<select\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--select ${className}`.trim()}\n\t\t\t\tonChange={onChange}\n\t\t\t\tvalue={currentValue}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t>\n\t\t\t\t{!hideBlank && <option value=\"\" />}\n\t\t\t\t{optionValues.map((optionValue) => {\n\t\t\t\t\tlet optionValueVal = optionValue.value;\n\t\t\t\t\tlet isJson = false;\n\t\t\t\t\tif (typeof optionValueVal === 'object') {\n\t\t\t\t\t\tisJson = true;\n\t\t\t\t\t\toptionValueVal = JSON.stringify(optionValueVal);\n\t\t\t\t\t}\n\t\t\t\t\tconst optionProps = {};\n\t\t\t\t\tif (isJson) {\n\t\t\t\t\t\toptionProps['data-json'] = true;\n\t\t\t\t\t}\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<option key={optionValueVal} value={optionValueVal} {...optionProps}>{optionValue.label}</option>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</select>\n\t\t\t<CaretIcon\n\t\t\t\taria-hidden=\"true\"\n\t\t\t\tclassName={`formosa-icon--caret ${iconClassName}`.trim()}\n\t\t\t\theight={iconHeight}\n\t\t\t\twidth={iconWidth}\n\t\t\t\t{...iconAttributes}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\thideBlank: PropTypes.bool,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tloadingText: PropTypes.string,\n\tname: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tsetValue: PropTypes.func,\n\tshowLoading: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalue: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSelect.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\thideBlank: false,\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tlabelKey: 'name',\n\tloadingText: 'Loading...',\n\tname: '',\n\toptions: null,\n\tsetValue: null,\n\tshowLoading: false,\n\turl: null,\n\tvalue: null,\n\tvalueKey: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Textarea({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsetValue,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tlet currentValue = '';\n\tif (setValue !== null) {\n\t\tcurrentValue = value;\n\t} else {\n\t\tif (formState === undefined) {\n\t\t\tthrow new Error('<Textarea> component must be inside a <Form> component.');\n\t\t}\n\t\tcurrentValue = get(formState.row, name);\n\t}\n\tif (currentValue === null || currentValue === undefined) {\n\t\tcurrentValue = '';\n\t}\n\n\tconst onChange = (e) => {\n\t\tconst newValue = e.target.value;\n\t\tif (setValue) {\n\t\t\tsetValue(newValue);\n\t\t} else {\n\t\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\t\t}\n\t};\n\n\tconst props = {};\n\tif (id || name) {\n\t\tprops.id = id || name;\n\t}\n\tif (name) {\n\t\tprops.name = name;\n\t}\n\n\treturn (\n\t\t<textarea\n\t\t\tclassName={`formosa-field__input formosa-field__input--textarea ${className}`.trim()}\n\t\t\tonChange={onChange}\n\t\t\tvalue={currentValue}\n\t\t\t{...props}\n\t\t\t{...otherProps}\n\t\t/>\n\t);\n}\n\nTextarea.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsetValue: PropTypes.func,\n\tvalue: PropTypes.string,\n};\n\nTextarea.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsetValue: null,\n\tvalue: null,\n};\n","import Autocomplete from './Input/Autocomplete';\nimport Checkbox from './Input/Checkbox';\nimport CheckboxList from './Input/CheckboxList';\nimport File from './Input/File';\nimport Input from './Input';\nimport Password from './Input/Password';\nimport Radio from './Input/Radio';\nimport Search from './Input/Search';\nimport Select from './Input/Select';\nimport Textarea from './Input/Textarea';\n\nexport default (type, component) => {\n\tif (component) {\n\t\treturn component;\n\t}\n\tif (type === 'select') {\n\t\treturn Select;\n\t}\n\tif (type === 'textarea') {\n\t\treturn Textarea;\n\t}\n\tif (type === 'radio') {\n\t\treturn Radio;\n\t}\n\tif (type === 'checkbox') {\n\t\treturn Checkbox;\n\t}\n\tif (type === 'password') {\n\t\treturn Password;\n\t}\n\tif (type === 'search') {\n\t\treturn Search;\n\t}\n\tif (type === 'autocomplete') {\n\t\treturn Autocomplete;\n\t}\n\tif (type === 'file') {\n\t\treturn File;\n\t}\n\tif (type === 'checkbox-list') {\n\t\treturn CheckboxList;\n\t}\n\treturn Input;\n};\n","export default (oldDirty, name) => {\n\tconst newDirty = [...oldDirty];\n\tif (!newDirty.includes(name)) {\n\t\tnewDirty.push(name);\n\t}\n\treturn newDirty;\n};\n","import React, { useContext, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport getInputElement from '../FieldInput';\nimport getNewDirty from '../Helpers/FormState';\nimport PropTypes from 'prop-types';\nimport set from 'set-value';\n\nexport default function HasMany({\n\tattributes,\n\tbuttonClassName,\n\tname,\n\trecordType,\n\tremovable,\n}) {\n\tconst { formState, setFormState } = useContext(FormContext);\n\tconst [tempId, setTempId] = useState(1);\n\tconst values = get(formState.row, name) || [];\n\n\tconst onAdd = () => {\n\t\tconst newValue = get(formState.row, `_new.${name}`);\n\t\tconst hasNewValue = newValue && Object.keys(newValue).length > 0;\n\t\tif (!hasNewValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tnewValue.id = `temp-${tempId}`;\n\t\tnewValue.type = recordType;\n\t\tsetTempId(tempId + 1);\n\n\t\tconst newRow = { ...formState.row };\n\t\tconst newValues = get(newRow, name) || [];\n\t\tnewValues.push(newValue);\n\n\t\tset(newRow, name, newValues);\n\t\tset(newRow, `_new.${name}`, {});\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\tdirtyIncluded: getNewDirty(formState.dirtyIncluded, `${newValue.type}.${newValue.id}`),\n\t\t\trow: newRow,\n\t\t});\n\n\t\tdocument.getElementById(`_new.${name}.${attributes[0].name}`).focus();\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key !== 'Enter') {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = get(formState.row, `_new.${name}`);\n\t\tconst hasNewValue = newValue && Object.keys(newValue).length > 0;\n\t\tif (hasNewValue) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tonAdd();\n\t\t}\n\t};\n\n\tconst onRemove = (e) => {\n\t\tconst i = e.target.getAttribute('data-index');\n\t\tif (i < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newRow = { ...formState.row };\n\t\tconst newValues = get(newRow, name);\n\t\tnewValues.splice(i, 1);\n\n\t\tset(newRow, name, newValues);\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\trow: newRow,\n\t\t});\n\t};\n\n\tconst afterChange = (e) => {\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\tdirtyIncluded: getNewDirty(formState.dirtyIncluded, e.target.getAttribute('data-unique-name')),\n\t\t});\n\t};\n\n\tconst visibleAttributes = attributes.filter((attribute) => (attribute.type !== 'hidden'));\n\tconst hiddenAttributes = attributes.filter((attribute) => (attribute.type === 'hidden'));\n\thiddenAttributes.push({\n\t\tname: 'id',\n\t\ttype: 'hidden',\n\t});\n\thiddenAttributes.push({\n\t\tname: 'type',\n\t\ttype: 'hidden',\n\t});\n\tconst showHeader = visibleAttributes.some((attribute) => (attribute.label));\n\n\treturn (\n\t\t<table className=\"formosa-has-many\">\n\t\t\t{showHeader && (\n\t\t\t\t<thead className=\"formosa-has-many__head\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{visibleAttributes.map((attribute) => (\n\t\t\t\t\t\t\t<th key={attribute.name}>{attribute.label}</th>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<th />\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t)}\n\t\t\t<tbody className=\"formosa-has-many__body\">\n\t\t\t\t{values.map((value, i) => {\n\t\t\t\t\tlet isRemovable = typeof removable === 'boolean' && removable;\n\t\t\t\t\tif (typeof removable === 'function') {\n\t\t\t\t\t\tisRemovable = removable(value);\n\t\t\t\t\t}\n\t\t\t\t\tconst rowKey = `included.${value.type}.${value.id}`;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr className=\"formosa-has-many__row\" key={rowKey}>\n\t\t\t\t\t\t\t{visibleAttributes.map((attribute) => {\n\t\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\t\tconst fieldKey = `${rowKey}.${attribute.name}`;\n\t\t\t\t\t\t\t\tconst hasError = Object.prototype.hasOwnProperty.call(formState.errors, fieldKey);\n\t\t\t\t\t\t\t\tconst className = ['formosa-has-many__column'];\n\t\t\t\t\t\t\t\tif (hasError) {\n\t\t\t\t\t\t\t\t\tclassName.push('formosa-field--has-error');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td className={className.join(' ')} key={attribute.name}>\n\t\t\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\t\t\tafterChange={afterChange}\n\t\t\t\t\t\t\t\t\t\t\tdata-unique-name={`${name}.${value.id}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t\tname={`${name}.${i}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{hasError && <div className=\"formosa-field__error\">{formState.errors[rowKey].join((<br />))}</div>}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<td className=\"formosa-has-many__column formosa-has-many__column--button\">\n\t\t\t\t\t\t\t\t{hiddenAttributes.map((attribute) => {\n\t\t\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\t\t\tkey={attribute.name}\n\t\t\t\t\t\t\t\t\t\t\tname={`${name}.${i}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-button formosa-button--remove-has-many formosa-has-many__button ${buttonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-index={i}\n\t\t\t\t\t\t\t\t\tdisabled={!isRemovable}\n\t\t\t\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t\t<tfoot className=\"formosa-has-many__foot\">\n\t\t\t\t<tr className=\"formosa-has-many__row formosa-has-many__row--new\">\n\t\t\t\t\t{visibleAttributes.map((attribute) => {\n\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<td className=\"formosa-has-many__column\" key={attribute.name}>\n\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\tname={`_new.${name}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<td className=\"formosa-has-many__column formosa-has-many__column--button\">\n\t\t\t\t\t\t{hiddenAttributes.map((attribute) => {\n\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\tkey={attribute.name}\n\t\t\t\t\t\t\t\t\tname={`_new.${name}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={`formosa-button formosa-button--add-has-many formosa-has-many__button ${buttonClassName}`.trim()}\n\t\t\t\t\t\t\tonClick={onAdd}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tfoot>\n\t\t</table>\n\t);\n}\n\nHasMany.propTypes = {\n\tattributes: PropTypes.array,\n\tbuttonClassName: PropTypes.string,\n\tname: PropTypes.string,\n\trecordType: PropTypes.string.isRequired,\n\tremovable: PropTypes.oneOfType([\n\t\tPropTypes.bool,\n\t\tPropTypes.func,\n\t]),\n};\n\nHasMany.defaultProps = {\n\tattributes: [],\n\tbuttonClassName: '',\n\tname: '',\n\tremovable: true,\n};\n","import getInputElement from './FieldInput';\nimport HasMany from './Input/HasMany';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function ExportableInput({\n\tcomponent,\n\ttype,\n\t...otherProps\n}) {\n\tlet InputComponent = getInputElement(type, component);\n\tif (type === 'has-many') {\n\t\t// This prevents a dependency cycle.\n\t\tInputComponent = HasMany;\n\t}\n\n\treturn (\n\t\t<InputComponent type={type} {...otherProps} />\n\t);\n}\n\nExportableInput.propTypes = {\n\tcomponent: PropTypes.func,\n\ttype: PropTypes.string,\n};\n\nExportableInput.defaultProps = {\n\tcomponent: null,\n\ttype: 'text',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Label({\n\tclassName,\n\thtmlFor,\n\tlabel,\n\tnote,\n\trequired,\n\ttype,\n\t...otherProps\n}) {\n\tlet labelClassName = 'formosa-label';\n\tif (required) {\n\t\tlabelClassName += ' formosa-label--required';\n\t}\n\n\tlet wrapperClassName = 'formosa-label-wrapper';\n\tif (type === 'checkbox') {\n\t\twrapperClassName += ' formosa-label-wrapper--checkbox';\n\t}\n\n\tconst props = {};\n\tif (htmlFor && type !== 'has-many') {\n\t\tprops.htmlFor = htmlFor;\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassName}>\n\t\t\t<label className={`${labelClassName} ${className}`.trim()} {...props} {...otherProps}>{label}</label>\n\t\t\t{note && <span className=\"formosa-label__note\">{note}</span>}\n\t\t</div>\n\t);\n}\n\nLabel.propTypes = {\n\tclassName: PropTypes.string,\n\thtmlFor: PropTypes.string,\n\tlabel: PropTypes.string,\n\tnote: PropTypes.string,\n\trequired: PropTypes.bool,\n\ttype: PropTypes.string,\n};\n\nLabel.defaultProps = {\n\tclassName: '',\n\thtmlFor: '',\n\tlabel: '',\n\tnote: '',\n\trequired: false,\n\ttype: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport Error from './Error';\nimport FormContext from './FormContext';\nimport getInputElement from './FieldInput';\nimport HasMany from './Input/HasMany';\nimport Label from './Label';\nimport PropTypes from 'prop-types';\n\nexport default function Field({\n\tcomponent,\n\tdisabled,\n\tid,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tlabel,\n\tlabelAttributes,\n\tlabelClassName,\n\tlabelNote,\n\tlabelPosition,\n\tname,\n\tnote,\n\tprefix,\n\tpostfix,\n\treadOnly,\n\trequired,\n\tsuffix,\n\ttype,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\n\tconst inputProps = { ...otherProps };\n\tif (id) {\n\t\tinputProps.id = id;\n\t}\n\tif (name) {\n\t\tinputProps.name = name;\n\t}\n\tif (disabled) {\n\t\tinputProps.disabled = disabled;\n\t}\n\tif (readOnly) {\n\t\tinputProps.readOnly = readOnly;\n\t}\n\tif (required) {\n\t\tinputProps.required = required;\n\t}\n\tif (suffix) {\n\t\tinputProps.suffix = suffix;\n\t}\n\tif (type) {\n\t\tinputProps.type = type;\n\t\tif (readOnly && type === 'number') {\n\t\t\tinputProps.type = 'text';\n\t\t}\n\t}\n\n\tlet InputComponent = getInputElement(type, component);\n\tif (type === 'has-many') {\n\t\t// This prevents a dependency cycle.\n\t\tInputComponent = HasMany;\n\t}\n\n\tconst input = (\n\t\t<InputComponent {...inputProps} />\n\t);\n\n\tif (type === 'hidden') {\n\t\treturn input;\n\t}\n\n\tconst htmlFor = id || name;\n\n\tconst labelComponent = (\n\t\t<Label\n\t\t\tclassName={labelClassName}\n\t\t\thtmlFor={htmlFor}\n\t\t\tlabel={label}\n\t\t\tnote={labelNote}\n\t\t\trequired={required}\n\t\t\ttype={type}\n\t\t\t{...labelAttributes}\n\t\t/>\n\t);\n\n\tconst hasError = formState && Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst cleanName = htmlFor.replace(/[^a-z0-9_-]/gi, '');\n\tconst wrapperClassNameList = ['formosa-field'];\n\tif (cleanName) {\n\t\twrapperClassNameList.push(`formosa-field--${cleanName}`);\n\t}\n\tif (wrapperClassName) {\n\t\twrapperClassNameList.push(wrapperClassName);\n\t}\n\tif (hasError) {\n\t\twrapperClassNameList.push('formosa-field--has-error');\n\t}\n\tif (disabled) {\n\t\twrapperClassNameList.push('formosa-field--disabled');\n\t}\n\tif (readOnly) {\n\t\twrapperClassNameList.push('formosa-field--read-only');\n\t}\n\tif (prefix) {\n\t\twrapperClassNameList.push('formosa-field--has-prefix');\n\t}\n\tif (postfix) {\n\t\twrapperClassNameList.push('formosa-field--has-postfix');\n\t}\n\tif (labelPosition === 'after') {\n\t\twrapperClassNameList.push('formosa-field--label-after');\n\t}\n\n\tconst inputWrapperClassNameList = ['formosa-input-wrapper', `formosa-input-wrapper--${type}`];\n\tif (inputWrapperClassName) {\n\t\tinputWrapperClassNameList.push(inputWrapperClassName);\n\t}\n\tif (suffix) {\n\t\tinputWrapperClassNameList.push('formosa-field--has-suffix');\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassNameList.join(' ')} {...wrapperAttributes}>\n\t\t\t{label && labelPosition === 'before' && labelComponent}\n\t\t\t{label && labelPosition === 'after' && <div className=\"formosa-label-wrapper\" />}\n\t\t\t<div className={inputWrapperClassNameList.join(' ')} {...inputWrapperAttributes}>\n\t\t\t\t{prefix}\n\t\t\t\t{input}\n\t\t\t\t{label && labelPosition === 'after' && labelComponent}\n\t\t\t\t{note && (\n\t\t\t\t\t<div className=\"formosa-field__note\">{note}</div>\n\t\t\t\t)}\n\t\t\t\t{postfix}\n\t\t\t\t<Error id={id} name={name} />\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nField.propTypes = {\n\tcomponent: PropTypes.func,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tlabelNote: PropTypes.string,\n\tlabelPosition: PropTypes.string,\n\tname: PropTypes.string,\n\tnote: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n\treadOnly: PropTypes.bool,\n\trequired: PropTypes.bool,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nField.defaultProps = {\n\tcomponent: null,\n\tdisabled: false,\n\tid: null,\n\tinputWrapperAttributes: {},\n\tinputWrapperClassName: '',\n\tlabel: '',\n\tlabelAttributes: {},\n\tlabelClassName: '',\n\tlabelNote: '',\n\tlabelPosition: 'before',\n\tname: '',\n\tnote: '',\n\tprefix: null,\n\tpostfix: null,\n\treadOnly: false,\n\trequired: false,\n\tsuffix: '',\n\ttype: 'text',\n\twrapperAttributes: {},\n\twrapperClassName: '',\n};\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\taddToast: null,\n\t\tremoveToast: null,\n\t\ttoasts: {},\n\n\t\tdisableWarningPrompt: null,\n\t\tenableWarningPrompt: null,\n\t\tshowWarningPrompt: true,\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\n\nexport default function Message() {\n\tconst { formState } = useContext(FormContext);\n\tconst hasErrors = Object.prototype.hasOwnProperty.call(formState.errors, '');\n\n\treturn (\n\t\t<>\n\t\t\t{hasErrors && (<p className=\"formosa-message formosa-message--error\">{formState.errors[''].join(' ')}</p>)}\n\t\t\t{formState.message && (<p className=\"formosa-message formosa-message--success\">{formState.message}</p>)}\n\t\t</>\n\t);\n}\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from './Helpers/Api';\nimport FormContext from './FormContext';\nimport FormosaContext from './FormosaContext';\nimport { getBody } from './Helpers/JsonApi';\nimport Message from './Message';\nimport PropTypes from 'prop-types';\n\nexport default function FormInner({\n\tafterNoSubmit,\n\tafterSubmit,\n\tbeforeSubmit,\n\tchildren,\n\tclearOnSubmit,\n\tdefaultRow,\n\tfilterBody,\n\tfilterValues,\n\thtmlId,\n\tid,\n\tmethod,\n\tparams,\n\tpath,\n\tpreventEmptyRequest,\n\trelationshipNames,\n\tshowMessage,\n\tsuccessMessageText,\n\tsuccessToastText,\n\t...otherProps\n}) {\n\tconst { formState, setFormState } = useContext(FormContext);\n\tconst { formosaState } = useContext(FormosaContext);\n\n\tconst submitApiRequest = (e) => {\n\t\te.preventDefault();\n\n\t\tif (preventEmptyRequest && formState.dirty.length <= 0) {\n\t\t\tformosaState.addToast('No changes to save.');\n\t\t\tif (afterNoSubmit) {\n\t\t\t\tafterNoSubmit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (beforeSubmit && !beforeSubmit(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet url = path;\n\t\tif (id) {\n\t\t\turl = `${path}/${id}`;\n\t\t}\n\t\tif (params) {\n\t\t\turl += `?${params}`;\n\t\t}\n\n\t\tconst body = getBody(\n\t\t\tmethod,\n\t\t\tpath,\n\t\t\tid,\n\t\t\tformState,\n\t\t\trelationshipNames,\n\t\t\tfilterBody,\n\t\t\tfilterValues\n\t\t);\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\terrors: {},\n\t\t\tmessage: '',\n\t\t});\n\n\t\tApi.request(method, url, body)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst newState = {\n\t\t\t\t\t...formState,\n\t\t\t\t\tdirty: [],\n\t\t\t\t\tdirtyIncluded: [],\n\t\t\t\t\terrors: {},\n\t\t\t\t\tmessage: successMessageText,\n\t\t\t\t};\n\t\t\t\tif (clearOnSubmit) {\n\t\t\t\t\tnewState.row = defaultRow;\n\t\t\t\t}\n\t\t\t\tsetFormState(newState);\n\n\t\t\t\tif (successToastText) {\n\t\t\t\t\tformosaState.addToast(successToastText, 'success');\n\t\t\t\t}\n\t\t\t\tif (afterSubmit) {\n\t\t\t\t\tafterSubmit(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(response, 'errors')) {\n\t\t\t\t\tformosaState.addToast('Error.', 'error');\n\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(response, 'message')) {\n\t\t\t\t\tformosaState.addToast(response.message, 'error', 10000);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tformosaState.addToast('Server error.', 'error');\n\t\t\t\t\tthrow response;\n\t\t\t\t}\n\n\t\t\t\tconst errors = {};\n\t\t\t\tlet key;\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'source')) {\n\t\t\t\t\t\tkey = error.source.pointer.replace('/data/attributes/', '');\n\t\t\t\t\t\tkey = key.replace('/data/meta/', 'meta.');\n\t\t\t\t\t\tif (key.startsWith('/included/')) {\n\t\t\t\t\t\t\tconst i = key.replace(/^\\/included\\/(\\d+)\\/.+$/g, '$1');\n\t\t\t\t\t\t\tconst includedRecord = body.included[parseInt(i, 10)];\n\t\t\t\t\t\t\tkey = key.replace(/^\\/included\\/(\\d+)\\//g, `included.${includedRecord.type}.${includedRecord.id}.`);\n\t\t\t\t\t\t\tkey = key.replace(/\\//g, '.');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!document.querySelector(`[data-name=\"${key}\"].formosa-field__error`)) {\n\t\t\t\t\t\t\tkey = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tkey = '';\n\t\t\t\t\t}\n\t\t\t\t\tif (!Object.prototype.hasOwnProperty.call(errors, key)) {\n\t\t\t\t\t\terrors[key] = [];\n\t\t\t\t\t}\n\t\t\t\t\terrors[key].push(error.title);\n\t\t\t\t});\n\t\t\t\tsetFormState({\n\t\t\t\t\t...formState,\n\t\t\t\t\terrors,\n\t\t\t\t\tmessage: '',\n\t\t\t\t});\n\t\t\t});\n\t};\n\tif (method && path && !Object.prototype.hasOwnProperty.call(otherProps, 'onSubmit')) {\n\t\totherProps.onSubmit = submitApiRequest;\n\t}\n\tif (htmlId) {\n\t\totherProps.id = htmlId;\n\t}\n\n\treturn (\n\t\t<form {...otherProps}>\n\t\t\t{showMessage && <Message />}\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\nFormInner.propTypes = {\n\tafterNoSubmit: PropTypes.func,\n\tafterSubmit: PropTypes.func,\n\tbeforeSubmit: PropTypes.func,\n\tchildren: PropTypes.node,\n\tclearOnSubmit: PropTypes.bool,\n\tdefaultRow: PropTypes.object,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\thtmlId: PropTypes.string,\n\tid: PropTypes.string,\n\tmethod: PropTypes.string,\n\tparams: PropTypes.string,\n\tpath: PropTypes.string,\n\tpreventEmptyRequest: PropTypes.bool,\n\trelationshipNames: PropTypes.array,\n\tshowMessage: PropTypes.bool,\n\tsuccessMessageText: PropTypes.string,\n\tsuccessToastText: PropTypes.string,\n};\n\nFormInner.defaultProps = {\n\tafterNoSubmit: null,\n\tafterSubmit: null,\n\tbeforeSubmit: null,\n\tchildren: null,\n\tclearOnSubmit: false,\n\tdefaultRow: {},\n\tfilterBody: null,\n\tfilterValues: null,\n\thtmlId: '',\n\tid: '',\n\tmethod: null,\n\tparams: '',\n\tpath: null,\n\tpreventEmptyRequest: false,\n\trelationshipNames: [],\n\tshowMessage: true,\n\tsuccessMessageText: '',\n\tsuccessToastText: '',\n};\n","import React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport FormInner from './FormInner';\nimport getNewDirty from './Helpers/FormState';\nimport PropTypes from 'prop-types';\nimport set from 'set-value';\n\nexport default function Form({\n\tchildren,\n\trow,\n\tsetRow,\n\t...otherProps\n}) {\n\tconst [formState, setFormState] = useState({\n\t\tdirty: [],\n\t\tdirtyIncluded: [],\n\t\terrors: {},\n\t\tfiles: {},\n\t\tmessage: '',\n\t\trow,\n\t\tsetRow,\n\t\tsetValues: (fs, e, name, value, afterChange = null, files = null) => {\n\t\t\tlet newDirty = getNewDirty(fs.dirty, name);\n\t\t\tconst newRow = { ...fs.row };\n\t\t\tset(newRow, name, value);\n\n\t\t\tif (afterChange) {\n\t\t\t\tconst additionalChanges = afterChange(e, newRow, value);\n\t\t\t\tObject.keys(additionalChanges).forEach((key) => {\n\t\t\t\t\tset(newRow, key, additionalChanges[key]);\n\t\t\t\t\tnewDirty = getNewDirty(newDirty, key);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst newFormState = {\n\t\t\t\t...fs,\n\t\t\t\tdirty: newDirty,\n\t\t\t\trow: newRow,\n\t\t\t};\n\t\t\tif (files !== null) {\n\t\t\t\tset(newFormState, `files.${name}`, files);\n\t\t\t}\n\n\t\t\tsetFormState(newFormState);\n\t\t\tif (fs.setRow) {\n\t\t\t\tfs.setRow(newRow);\n\t\t\t}\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\trow,\n\t\t});\n\t}, [row]);\n\n\treturn (\n\t\t<FormContext.Provider value={{ formState, setFormState }}>\n\t\t\t<FormInner {...otherProps}>\n\t\t\t\t{children}\n\t\t\t</FormInner>\n\t\t</FormContext.Provider>\n\t);\n}\n\nForm.propTypes = {\n\tchildren: PropTypes.node,\n\trow: PropTypes.object,\n\tsetRow: PropTypes.func,\n};\n\nForm.defaultProps = {\n\tchildren: null,\n\trow: {},\n\tsetRow: null,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nexport default function Spinner({ loadingText }) {\n\tconst { promiseInProgress } = usePromiseTracker();\n\tif (!promiseInProgress) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<div className=\"formosa-spinner formosa-spinner--fullscreen\">{loadingText}</div>\n\t);\n}\n\nSpinner.propTypes = {\n\tloadingText: PropTypes.string,\n};\n\nSpinner.defaultProps = {\n\tloadingText: 'Loading...',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CloseIcon } from '../svg/x.svg';\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\n\nexport default function Toast({\n\tclassName,\n\tid,\n\tmilliseconds,\n\ttext,\n}) {\n\tconst { formosaState, setFormosaState } = useContext(FormosaContext);\n\tconst removeToast = () => {\n\t\tconst toasts = { ...formosaState.toasts };\n\t\tdelete toasts[id];\n\t\tsetFormosaState({ ...formosaState, toasts });\n\t};\n\treturn (\n\t\t<div className={`formosa-toast ${className}`.trim()} style={{ animationDuration: `${milliseconds}ms` }}>\n\t\t\t<div className=\"formosa-toast__text\">{text}</div>\n\t\t\t<button className=\"formosa-toast__close\" onClick={removeToast} type=\"button\">\n\t\t\t\t<CloseIcon aria-hidden=\"true\" className=\"formosa-toast__close-icon\" height={12} width={12} />\n\t\t\t\tClose\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nToast.propTypes = {\n\tclassName: PropTypes.string,\n\tid: PropTypes.string.isRequired,\n\tmilliseconds: PropTypes.number.isRequired,\n\ttext: PropTypes.string.isRequired,\n};\n\nToast.defaultProps = {\n\tclassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport Toast from './Toast';\n\nexport default function ToastContainer() {\n\tconst { formosaState } = useContext(FormosaContext);\n\treturn (\n\t\t<div className=\"formosa-toast-container\">\n\t\t\t{Object.keys(formosaState.toasts).map((id) => (\n\t\t\t\t<Toast\n\t\t\t\t\tclassName={formosaState.toasts[id].className}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tid={id}\n\t\t\t\t\tmilliseconds={formosaState.toasts[id].milliseconds}\n\t\t\t\t\ttext={formosaState.toasts[id].text}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\nimport Spinner from './Spinner';\nimport ToastContainer from './ToastContainer';\n\nexport default function FormContainer({ children, loadingText }) {\n\tconst [formosaState, setFormosaState] = useState({\n\t\taddToast: null,\n\t\tremoveToast: null,\n\t\ttoasts: {},\n\n\t\tdisableWarningPrompt: null,\n\t\tenableWarningPrompt: null,\n\t\tshowWarningPrompt: true,\n\t});\n\n\tconst formosaStateRef = useRef(formosaState);\n\tformosaStateRef.current = formosaState;\n\n\tuseEffect(() => {\n\t\tconst removeToast = (toastId) => {\n\t\t\tconst toasts = { ...formosaStateRef.current.toasts };\n\t\t\tdelete toasts[toastId];\n\t\t\tsetFormosaState({ ...formosaStateRef.current, toasts });\n\t\t};\n\t\tconst addToast = (text, type = '', milliseconds = 5000) => {\n\t\t\tconst toastId = new Date().getTime();\n\t\t\tconst toast = {\n\t\t\t\tclassName: type ? `formosa-toast--${type}` : '',\n\t\t\t\ttext,\n\t\t\t\tmilliseconds,\n\t\t\t};\n\t\t\tconst toasts = {\n\t\t\t\t...formosaStateRef.current.toasts,\n\t\t\t\t[toastId]: toast,\n\t\t\t};\n\t\t\tsetFormosaState({ ...formosaStateRef.current, toasts });\n\t\t\tsetTimeout(() => {\n\t\t\t\tformosaStateRef.current.removeToast(toastId);\n\t\t\t}, milliseconds);\n\t\t};\n\t\tconst disableWarningPrompt = () => {\n\t\t\tsetFormosaState({ ...formosaStateRef.current, showWarningPrompt: false });\n\t\t};\n\t\tconst enableWarningPrompt = () => {\n\t\t\tsetFormosaState({ ...formosaStateRef.current, showWarningPrompt: true });\n\t\t};\n\t\tsetFormosaState({\n\t\t\t...formosaStateRef.current,\n\t\t\taddToast,\n\t\t\tremoveToast,\n\t\t\tdisableWarningPrompt,\n\t\t\tenableWarningPrompt,\n\t\t});\n\t\treturn () => {};\n\t}, []);\n\n\treturn (\n\t\t<FormosaContext.Provider value={{ formosaState, setFormosaState }}>\n\t\t\t{children}\n\t\t\t<Spinner loadingText={loadingText} />\n\t\t\t<ToastContainer />\n\t\t</FormosaContext.Provider>\n\t);\n}\n\nFormContainer.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tloadingText: PropTypes.string,\n};\n\nFormContainer.defaultProps = {\n\tloadingText: 'Loading...',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Submit({\n\tclassName,\n\tlabel,\n\tprefix,\n\tpostfix,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className=\"formosa-field formosa-field--submit\">\n\t\t\t<div className=\"formosa-label-wrapper formosa-label-wrapper--submit\" />\n\t\t\t<div className=\"formosa-input-wrapper formosa-input-wrapper--submit\">\n\t\t\t\t{prefix}\n\t\t\t\t<button\n\t\t\t\t\tclassName={`formosa-button formosa-button--submit ${className}`.trim()}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t{...otherProps}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</button>\n\t\t\t\t{postfix}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSubmit.propTypes = {\n\tclassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n};\n\nSubmit.defaultProps = {\n\tclassName: '',\n\tlabel: 'Submit',\n\tprefix: null,\n\tpostfix: null,\n};\n","import './style.scss';\nimport api from './js/Helpers/Api';\nimport { ReactComponent as checkIcon } from './svg/check.svg';\nimport error from './js/Error';\nimport exportableInput from './js/ExportableInput';\nimport field from './js/Field';\nimport form from './js/Form';\nimport formContainer from './js/FormContainer';\nimport formContext from './js/FormContext';\nimport formosaContext from './js/FormosaContext';\nimport label from './js/Label';\nimport message from './js/Message';\nimport submit from './js/Submit';\n\nexport const Api = api;\nexport const CheckIcon = checkIcon;\nexport const Error = error;\nexport const Field = field;\nexport const Form = form;\nexport const FormContainer = formContainer;\nexport const FormContext = formContext;\nexport const FormosaContext = formosaContext;\nexport const Input = exportableInput;\nexport const Label = label;\nexport const Message = message;\nexport const Submit = submit;\n"],"names":["findIncluded","included","id","type","mainRecord","output","Object","prototype","hasOwnProperty","call","attributes","meta","find","data","deserializeSingle","otherRows","includedRecord","keys","relationships","forEach","relationshipName","Array","isArray","rel","i","deserialize","body","push","cleanSingleRelationship","values","cleanRelationship","map","value","getIncluded","dirtyIncluded","relationshipNames","dirtyKeys","key","startsWith","currentKeys","split","k","get","join","set","length","relData","unset","obj","lastKey","pop","o","getBody","method","formState","filterBody","filterValues","dirty","row","fileKeys","files","cleanKey","replace","includes","JSON","parse","filenames","filter","filename","formData","FormData","append","stringify","Api","url","showSpinner","request","post","put","options","headers","getToken","Authorization","fullUrl","process","env","REACT_APP_API_URL","event","CustomEvent","cancelable","detail","document","dispatchEvent","Promise","resolve","promise","fetch","then","response","ok","json","status","error","SyntaxError","errors","title","trackPromise","window","FORMOSA_TOKEN","setToken","token","React","createContext","message","setRow","setValues","Error","name","useContext","FormContext","hasError","props","e","propTypes","PropTypes","string","defaultProps","normalizeOptions","labelKey","valueKey","option","label","escapeRegExp","toSlug","s","toLowerCase","filterByKey","records","escapedValue","record","recordValue","toString","match","RegExp","sort","a","b","aValue","bValue","aPos","indexOf","bPos","localeCompare","Autocomplete","afterAdd","afterChange","clearable","clearButtonAttributes","clearButtonClassName","clearIconAttributes","clearIconHeight","clearIconWidth","clearText","disabled","inputClassName","labelFn","loadingText","max","optionButtonAttributes","optionButtonClassName","optionListAttributes","optionListClassName","optionListItemAttributes","optionListItemClassName","placeholder","readOnly","removeButtonAttributes","removeButtonClassName","removeIconAttributes","removeIconHeight","removeIconWidth","removeText","setValue","showLoading","wrapperAttributes","wrapperClassName","otherProps","clearButtonRef","useRef","inputRef","removeButtonRef","useState","setFilter","isOpen","setIsOpen","highlightedIndex","setHighlightedIndex","optionValues","setOptionValues","isLoading","setIsLoading","setMessage","useEffect","currentValue","undefined","currentValueLength","isSelected","findIndex","v","filteredOptions","focus","setTimeout","current","addValue","newValue","target","removeValue","index","splice","onChange","onFocus","onKeyDown","filterValue","preventDefault","onKeyUp","onClickOption","val","getAttribute","onClickRemoveOption","button","tagName","toUpperCase","parentNode","clear","showClear","className","canAddValues","wrapperProps","trim","isJson","CloseIcon","optionClassName","func","bool","object","number","oneOfType","array","arrayOf","Checkbox","iconAttributes","iconClassName","iconHeight","iconWidth","checked","CheckIcon","CheckboxList","labelAttributes","labelClassName","listAttributes","listClassName","listItemAttributes","listItemClassName","optionValue","optionValueVal","optionProps","File","buttonAttributes","buttonClassName","emptyText","imageAttributes","imageClassName","imageHeight","imagePrefix","imagePreview","inputWrapperAttributes","inputWrapperClassName","linkAttributes","linkClassName","linkImage","multiple","required","hasValue","getFilenames","FileList","numFiles","item","getSrcs","URL","createObjectURL","v2","setFilenames","srcs","setSrcs","newFiles","onRemove","prefixClassName","hiddenProps","buttonProps","src","img","ConditionalWrapper","children","condition","node","isRequired","any","Input","suffix","Password","hideText","showText","tempType","setTempType","togglePassword","Radio","Search","SearchIcon","Select","hideBlank","querySelector","CaretIcon","Textarea","component","oldDirty","newDirty","HasMany","recordType","removable","setFormState","tempId","setTempId","onAdd","hasNewValue","newRow","newValues","getNewDirty","getElementById","stopPropagation","visibleAttributes","attribute","hiddenAttributes","showHeader","some","isRemovable","rowKey","Component","getInputElement","fieldKey","ExportableInput","InputComponent","Label","htmlFor","note","Field","labelNote","labelPosition","prefix","postfix","inputProps","input","labelComponent","cleanName","wrapperClassNameList","inputWrapperClassNameList","addToast","removeToast","toasts","disableWarningPrompt","enableWarningPrompt","showWarningPrompt","Message","hasErrors","FormInner","afterNoSubmit","afterSubmit","beforeSubmit","clearOnSubmit","defaultRow","htmlId","params","path","preventEmptyRequest","showMessage","successMessageText","successToastText","FormosaContext","formosaState","submitApiRequest","newState","source","pointer","parseInt","onSubmit","Form","fs","additionalChanges","newFormState","Spinner","usePromiseTracker","promiseInProgress","Toast","milliseconds","text","setFormosaState","animationDuration","ToastContainer","FormContainer","formosaStateRef","toastId","Date","getTime","toast","Submit","api","checkIcon","field","form","formContainer","formContext","formosaContext","exportableInput","submit"],"mappings":"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"}