{"version":3,"file":"index.modern.js","sources":["../src/js/Helpers/JsonApi.js","../src/js/Helpers/Api.js","../src/js/FormContext.js","../src/js/Helpers/Options.js","../src/js/Input/Autocomplete.js","../src/js/ConditionalWrapper.js","../src/js/Input.js","../src/js/Input/Checkbox.js","../src/js/Helpers/Datetime.js","../src/js/Input/Select.js","../src/js/Input/Datetime.js","../src/js/Input/File.js","../src/js/Input/Password.js","../src/js/Input/Radio.js","../src/js/Input/RadioList.js","../src/js/Input/Search.js","../src/js/Input/Textarea.js","../src/js/FieldInput.js","../src/js/Helpers/FormState.js","../src/js/Input/HasMany.js","../src/js/Label.js","../src/js/Field.js","../src/js/FormosaContext.js","../src/js/Message.js","../src/js/FormInner.js","../src/js/Form.js","../src/js/Spinner.js","../src/js/Toast.js","../src/js/ToastContainer.js","../src/js/FormContainer.js","../src/js/Submit.js","../src/index.js"],"sourcesContent":["import get from 'get-value';\nimport set from 'set-value';\n\nconst findIncluded = (included, id, type, mainRecord) => {\n\tif (mainRecord && id === mainRecord.id && type === mainRecord.type) {\n\t\tconst output = {\n\t\t\tid: mainRecord.id,\n\t\t\ttype: mainRecord.type,\n\t\t};\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'attributes')) {\n\t\t\toutput.attributes = mainRecord.attributes;\n\t\t}\n\t\tif (Object.prototype.hasOwnProperty.call(mainRecord, 'meta')) {\n\t\t\toutput.meta = mainRecord.meta;\n\t\t}\n\t\treturn output;\n\t}\n\treturn included.find((data) => (data.id === id && data.type === type));\n};\n\nconst deserializeSingle = (data, otherRows = [], included = [], mainRecord = null) => {\n\tif (!data) {\n\t\treturn data;\n\t}\n\tconst output = {\n\t\tid: data.id,\n\t\ttype: data.type,\n\t\t...data.attributes,\n\t};\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'relationships')) {\n\t\tlet includedRecord;\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\toutput[relationshipName] = data.relationships[relationshipName].data;\n\t\t\tif (Array.isArray(output[relationshipName])) {\n\t\t\t\toutput[relationshipName].forEach((rel, i) => {\n\t\t\t\t\tincludedRecord = findIncluded(included, rel.id, rel.type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tincludedRecord = findIncluded(otherRows, rel.id, rel.type, mainRecord);\n\t\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\t\toutput[relationshipName][i] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (output[relationshipName] !== null) {\n\t\t\t\tincludedRecord = findIncluded(included, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\tif (includedRecord) {\n\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t} else {\n\t\t\t\t\tincludedRecord = findIncluded(otherRows, output[relationshipName].id, output[relationshipName].type, mainRecord);\n\t\t\t\t\tif (includedRecord) {\n\t\t\t\t\t\toutput[relationshipName] = deserializeSingle(includedRecord, otherRows, included, mainRecord);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tif (Object.prototype.hasOwnProperty.call(data, 'meta')) {\n\t\toutput.meta = data.meta;\n\t}\n\n\treturn output;\n};\n\nexport const deserialize = (body) => {\n\tif (Array.isArray(body.data)) {\n\t\tconst output = [];\n\t\tbody.data.forEach((data) => {\n\t\t\toutput.push(deserializeSingle(data, body.data, body.included, null));\n\t\t});\n\t\treturn output;\n\t}\n\treturn deserializeSingle(body.data, [], body.included, body.data);\n};\n\nconst cleanSingleRelationship = (values) => ({\n\tid: values.id,\n\ttype: values.type,\n});\n\nconst cleanRelationship = (values) => {\n\tif (Array.isArray(values)) {\n\t\treturn values.map((value) => cleanSingleRelationship(value));\n\t}\n\treturn cleanSingleRelationship(values);\n};\n\nconst getIncluded = (data, dirtyIncluded, relationshipNames) => {\n\tconst included = [];\n\n\tconst dirtyKeys = {};\n\tdirtyIncluded.forEach((key) => {\n\t\tif (!key.startsWith('_new.')) {\n\t\t\tconst currentKeys = [];\n\t\t\tkey.split('.').forEach((k) => {\n\t\t\t\tcurrentKeys.push(k);\n\t\t\t\tif (typeof get(dirtyKeys, currentKeys.join('.')) === 'undefined') {\n\t\t\t\t\tset(dirtyKeys, currentKeys.join('.'), {});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\n\trelationshipNames.forEach((relationshipName) => {\n\t\tif (!Object.prototype.hasOwnProperty.call(data.relationships, relationshipName)) {\n\t\t\t// This relationship isn't defined.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Object.prototype.hasOwnProperty.call(dirtyKeys, relationshipName)) {\n\t\t\t// No related records' attributes have changed.\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Array.isArray(data.relationships[relationshipName].data)) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata.relationships[relationshipName].data.forEach((rel) => {\n\t\t\tif (Object.keys(rel).length <= 2) {\n\t\t\t\t// This relationship only has an id and type.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyKeys[relationshipName], rel.id)) {\n\t\t\t\tconst relData = {\n\t\t\t\t\tid: rel.id,\n\t\t\t\t\ttype: rel.type,\n\t\t\t\t\tattributes: {},\n\t\t\t\t};\n\n\t\t\t\tif (Object.keys(dirtyKeys[relationshipName][rel.id]).length === 0) {\n\t\t\t\t\t// This is a new record; include all attributes.\n\t\t\t\t\tObject.keys(rel).forEach((key) => {\n\t\t\t\t\t\tif (key !== 'id' && key !== 'type') {\n\t\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// This is an existing record; include only the dirty attributes.\n\t\t\t\t\tObject.keys(rel).forEach((key) => {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(dirtyKeys[relationshipName][rel.id], key)) {\n\t\t\t\t\t\t\tset(relData.attributes, key, rel[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tincluded.push(relData);\n\t\t\t}\n\t\t});\n\t});\n\n\treturn included;\n};\n\nexport const getBody = (\n\tmethod,\n\ttype,\n\tid,\n\tformState,\n\trelationshipNames,\n\tfilterBody,\n\tfilterValues\n) => {\n\tlet body = null;\n\n\tif (method === 'PUT' || method === 'POST') {\n\t\tbody = {};\n\t\tconst data = {\n\t\t\ttype,\n\t\t\tattributes: {},\n\t\t\tmeta: {},\n\t\t\trelationships: {},\n\t\t};\n\t\tconst keys = method === 'PUT' ? formState.dirty : Object.keys(formState.row);\n\n\t\tif (method === 'PUT' && id) {\n\t\t\tdata.id = id;\n\t\t}\n\n\t\tlet values = { ...formState.row };\n\t\tif (filterValues) {\n\t\t\tvalues = filterValues(values);\n\t\t}\n\n\t\tkeys.forEach((key) => {\n\t\t\tconst cleanKey = key.replace(/\\..+$/, '');\n\t\t\tif (relationshipNames.includes(cleanKey)) {\n\t\t\t\tdata.relationships[cleanKey] = {\n\t\t\t\t\tdata: get(values, cleanKey),\n\t\t\t\t};\n\t\t\t} else if (relationshipNames.includes(key)) {\n\t\t\t\tdata.relationships[key] = {\n\t\t\t\t\tdata: get(values, cleanKey),\n\t\t\t\t};\n\t\t\t} else if (key.startsWith('meta.')) {\n\t\t\t\tset(data, key, get(values, key));\n\t\t\t} else if (key === 'meta') {\n\t\t\t\tdata.meta = values.meta;\n\t\t\t} else if (key !== '_new' && !key.startsWith('_new.')) {\n\t\t\t\tset(data.attributes, key, get(values, key));\n\t\t\t}\n\t\t});\n\n\t\tbody.data = data;\n\n\t\tconst included = getIncluded(data, formState.dirtyIncluded, relationshipNames);\n\t\tif (included.length > 0) {\n\t\t\tbody.included = included;\n\t\t}\n\n\t\tObject.keys(data.relationships).forEach((relationshipName) => {\n\t\t\tif (typeof data.relationships[relationshipName].data === 'string') {\n\t\t\t\tdata.relationships[relationshipName].data = JSON.parse(data.relationships[relationshipName].data);\n\t\t\t}\n\t\t\tif (Array.isArray(data.relationships[relationshipName].data)) {\n\t\t\t\tdata.relationships[relationshipName].data = data.relationships[relationshipName].data.map((rel) => (cleanRelationship(rel)));\n\t\t\t}\n\t\t});\n\n\t\tif (filterBody) {\n\t\t\tbody = filterBody(body, formState.row);\n\t\t}\n\n\t\tif (Object.keys(data.attributes).length <= 0) {\n\t\t\tdelete data.attributes;\n\t\t}\n\t\tif (Object.keys(data.meta).length <= 0) {\n\t\t\tdelete data.meta;\n\t\t}\n\t\tif (Object.keys(data.relationships).length <= 0) {\n\t\t\tdelete data.relationships;\n\t\t}\n\n\t\tconst filenames = Object.keys(formState.files).filter((filename) => (formState.files[filename] !== false));\n\t\tif (filenames.length > 0) {\n\t\t\tconst formData = new FormData();\n\t\t\tformData.append('json', JSON.stringify(body));\n\t\t\tformData.append('files', JSON.stringify(filenames));\n\n\t\t\tfilenames.forEach((filename) => {\n\t\t\t\tformData.append(filename, formState.files[filename]);\n\t\t\t});\n\n\t\t\tbody = formData;\n\t\t} else {\n\t\t\tbody = JSON.stringify(body);\n\t\t}\n\t}\n\n\treturn body;\n};\n","import { deserialize } from './JsonApi';\nimport { trackPromise } from 'react-promise-tracker';\n\nexport default class Api {\n\tstatic get(url) {\n\t\treturn Api.request('GET', url);\n\t}\n\n\tstatic delete(url) {\n\t\treturn Api.request('DELETE', url);\n\t}\n\n\tstatic post(url, body) {\n\t\treturn Api.request('POST', url, body);\n\t}\n\n\tstatic put(url, body) {\n\t\treturn Api.request('PUT', url, body);\n\t}\n\n\tstatic request(method, url, body = null) {\n\t\tconst options = {\n\t\t\tmethod,\n\t\t\theaders: {\n\t\t\t\t'X-Requested-With': 'XMLHttpRequest',\n\t\t\t},\n\t\t};\n\t\tif (typeof body === 'string') {\n\t\t\toptions.headers['Content-Type'] = 'application/json';\n\t\t}\n\t\tif (Api.getToken()) {\n\t\t\toptions.headers.Authorization = `Bearer ${Api.getToken()}`;\n\t\t}\n\t\tif (body) {\n\t\t\toptions.body = body;\n\t\t}\n\n\t\treturn trackPromise(\n\t\t\tfetch(`${process.env.REACT_APP_API_URL}/${url}`, options)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\treturn response.json()\n\t\t\t\t\t\t\t.then((json) => {\n\t\t\t\t\t\t\t\tjson.status = response.status;\n\t\t\t\t\t\t\t\tthrow json;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\t\tif (error instanceof SyntaxError) {\n\t\t\t\t\t\t\t\t\tthrow { // eslint-disable-line no-throw-literal\n\t\t\t\t\t\t\t\t\t\terrors: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: 'The server returned invalid JSON.',\n\t\t\t\t\t\t\t\t\t\t\t\tstatus: '500',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\tstatus: 500,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrow error;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (response.status === 204) {\n\t\t\t\t\t\treturn {};\n\t\t\t\t\t}\n\t\t\t\t\treturn response.json();\n\t\t\t\t})\n\t\t\t\t.then((json) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(json, 'data')) {\n\t\t\t\t\t\treturn deserialize(json);\n\t\t\t\t\t}\n\t\t\t\t\treturn json;\n\t\t\t\t})\n\t\t);\n\t}\n\n\tstatic getToken() {\n\t\treturn window.FORMOSA_TOKEN;\n\t}\n\n\tstatic setToken(token) {\n\t\twindow.FORMOSA_TOKEN = token;\n\t}\n}\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\tdirty: [],\n\t\tdirtyIncluded: [],\n\t\terrors: {},\n\t\tfiles: {},\n\t\tmessage: '',\n\t\trow: {},\n\t\tsetRow: null,\n\t\tsetValues: null,\n\t}\n);\n","import get from 'get-value';\n\nexport const normalizeOptions = (options, labelKey, valueKey = null) => {\n\tif (!options) {\n\t\treturn [];\n\t}\n\n\tconst output = [];\n\tif (Array.isArray(options)) {\n\t\toptions.forEach((option) => {\n\t\t\tif (typeof option === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue: option,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tObject.keys(options).forEach((value) => {\n\t\t\tconst option = options[value];\n\t\t\tif (typeof value === 'string') {\n\t\t\t\toutput.push({\n\t\t\t\t\tlabel: option,\n\t\t\t\t\tvalue,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toutput.push({\n\t\t\t\t\t...option,\n\t\t\t\t\tlabel: typeof labelKey === 'function' ? labelKey(option) : get(option, labelKey),\n\t\t\t\t\tvalue: typeof valueKey === 'function' ? valueKey(option) : get(option, valueKey),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\treturn output;\n};\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions#Escaping\nexport const escapeRegExp = (string) => (string.replace(/[.*+\\-?^${}()|[\\]\\\\]/g, '\\\\$&'));\n\nconst slugify = (s) => (\n\ts.toLowerCase()\n\t\t.replace(/[^0-9a-z-]/g, '-')\n\t\t.replace(/-+/g, '-')\n\t\t.replace(/^-+/, '')\n\t\t.replace(/-+$/, '')\n);\n\nexport const filterByKey = (records, key, value) => {\n\tvalue = value.toLowerCase();\n\tconst escapedValue = escapeRegExp(value);\n\trecords = records.filter((record) => {\n\t\tconst recordValue = get(record, key).toString().toLowerCase() || '';\n\t\treturn recordValue.match(new RegExp(`(^|[^a-z])${escapedValue}`));\n\t});\n\tvalue = slugify(value);\n\trecords = records.sort((a, b) => {\n\t\tconst aValue = slugify(get(a, key).toString());\n\t\tconst bValue = slugify(get(b, key).toString());\n\t\tconst aPos = aValue.indexOf(value) === 0;\n\t\tconst bPos = bValue.indexOf(value) === 0;\n\t\tif ((aPos && bPos) || (!aPos && !bPos)) {\n\t\t\treturn aValue.localeCompare(bValue);\n\t\t}\n\t\tif (aPos && !bPos) {\n\t\t\treturn -1;\n\t\t}\n\t\treturn 1;\n\t});\n\treturn records;\n};\n","import { filterByKey, normalizeOptions } from '../Helpers/Options';\nimport React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CloseIcon } from '../../svg/x.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Autocomplete({\n\tafterAdd,\n\tafterChange,\n\tclearable,\n\tclearButtonAttributes,\n\tclearButtonClassName,\n\tclearIconAttributes,\n\tclearIconHeight,\n\tclearIconWidth,\n\tclearText,\n\tdisabled,\n\tid,\n\tinputClassName,\n\tlabelFn,\n\tlabelKey,\n\tmax,\n\tname,\n\toptionButtonAttributes,\n\toptionButtonClassName,\n\toptionListAttributes,\n\toptionListClassName,\n\toptionListItemAttributes,\n\toptionListItemClassName,\n\toptions,\n\tplaceholder,\n\tremoveButtonAttributes,\n\tremoveButtonClassName,\n\tremoveIconAttributes,\n\tremoveIconHeight,\n\tremoveIconWidth,\n\tremoveText,\n\turl,\n\tvalueKey,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [filter, setFilter] = useState('');\n\tconst [isOpen, setIsOpen] = useState(false);\n\tconst [highlightedIndex, setHighlightedIndex] = useState(0);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : null);\n\n\tlet selectedValues = get(formState.row, name) || null;\n\tif (max === 1) {\n\t\tif (!selectedValues) {\n\t\t\tselectedValues = [];\n\t\t} else {\n\t\t\tselectedValues = [selectedValues];\n\t\t}\n\t} else if (!selectedValues) {\n\t\tselectedValues = [];\n\t}\n\n\tuseEffect(() => {\n\t\tif (optionValues === null && url) {\n\t\t\tApi.get(url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : null);\n\t\treturn () => {};\n\t}, [options]);\n\n\tconst isSelected = (option) => {\n\t\tconst values = get(formState.row, name) || [];\n\t\treturn values.findIndex((value) => (value.value === option.value)) > -1;\n\t};\n\n\tlet filteredOptions = [];\n\tif (optionValues !== null && filter) {\n\t\tfilteredOptions = filterByKey(optionValues, 'label', filter);\n\t\tfilteredOptions = filteredOptions.filter((option) => (!isSelected(option)));\n\t}\n\n\tconst focus = () => {\n\t\tsetTimeout(() => {\n\t\t\tconst elem = document.getElementById(id || name);\n\t\t\tif (elem) {\n\t\t\t\telem.focus();\n\t\t\t}\n\t\t});\n\t};\n\n\tconst addValue = (value) => {\n\t\tlet newValue;\n\t\tif (max === 1) {\n\t\t\tnewValue = value;\n\n\t\t\tselectedValues = [value];\n\t\t} else {\n\t\t\tnewValue = get(formState.row, name);\n\t\t\tif (newValue) {\n\t\t\t\tnewValue = [...newValue, value];\n\t\t\t} else {\n\t\t\t\tnewValue = [value];\n\t\t\t}\n\n\t\t\tselectedValues = [...selectedValues, value];\n\t\t}\n\n\t\tconst e = { target: { name } };\n\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\n\t\tsetIsOpen(false);\n\t\tsetFilter('');\n\t\tif (max === 1) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst elem = document.querySelector(`#${id || name}-wrapper .formosa-autocomplete__value__remove`);\n\t\t\t\tif (elem) {\n\t\t\t\t\telem.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (max === selectedValues.length) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst elem = document.querySelector(`#${id || name}-wrapper .formosa-autocomplete__clear`);\n\t\t\t\tif (elem) {\n\t\t\t\t\telem.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tfocus();\n\t\t}\n\n\t\tif (afterAdd) {\n\t\t\tafterAdd();\n\t\t}\n\t};\n\n\tconst removeValue = (value) => {\n\t\tlet newValue = get(formState.row, name);\n\t\tif (max !== 1) {\n\t\t\tlet index = newValue.indexOf(value);\n\t\t\tif (index > -1) {\n\t\t\t\tnewValue.splice(index, 1);\n\t\t\t}\n\n\t\t\tconst newSelectedValues = [...selectedValues];\n\t\t\tindex = newSelectedValues.indexOf(value);\n\t\t\tif (index > -1) {\n\t\t\t\tnewSelectedValues.splice(index, 1);\n\t\t\t\tselectedValues = newSelectedValues;\n\t\t\t}\n\t\t} else {\n\t\t\tnewValue = null;\n\n\t\t\tselectedValues = [];\n\t\t}\n\n\t\tconst e = { target: { name } };\n\t\tformState.setValues(formState, e, name, newValue, afterChange);\n\n\t\tfocus();\n\t};\n\n\tconst onChange = (e) => {\n\t\tsetFilter(e.target.value);\n\t};\n\n\tconst onFocus = () => {\n\t\tsetHighlightedIndex(0);\n\t\tsetIsOpen(filter.length > 0);\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tconst numValues = selectedValues ? selectedValues.length : 0;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t} else if (e.key === 'Backspace' && !filter && numValues > 0) {\n\t\t\tremoveValue(selectedValues[numValues - 1]);\n\t\t}\n\t};\n\n\tconst onKeyUp = (e) => {\n\t\tconst filterValue = e.target.value;\n\t\tif (e.key === 'Enter' && filterValue && filteredOptions.length > 0) {\n\t\t\te.preventDefault();\n\t\t\taddValue(filteredOptions[highlightedIndex]);\n\t\t} else if (e.key === 'ArrowDown') {\n\t\t\tif (highlightedIndex >= (filteredOptions.length - 1)) {\n\t\t\t\tsetHighlightedIndex(0);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(highlightedIndex + 1);\n\t\t\t}\n\t\t} else if (e.key === 'ArrowUp') {\n\t\t\tif (highlightedIndex > 0) {\n\t\t\t\tsetHighlightedIndex(highlightedIndex - 1);\n\t\t\t} else {\n\t\t\t\tsetHighlightedIndex(filteredOptions.length - 1);\n\t\t\t}\n\t\t} else if (e.key === 'Escape') {\n\t\t\tsetIsOpen(false);\n\t\t} else {\n\t\t\tsetHighlightedIndex(0);\n\t\t\tsetIsOpen(filterValue.length > 0);\n\t\t}\n\t};\n\n\tconst onClickOption = (e) => {\n\t\taddValue(JSON.parse(e.target.getAttribute('data-value')));\n\t};\n\n\tconst onClickRemoveOption = (e) => {\n\t\tlet button = e.target;\n\t\twhile (button && button.tagName.toUpperCase() !== 'BUTTON') {\n\t\t\tbutton = button.parentNode;\n\t\t}\n\t\tremoveValue(selectedValues[button.getAttribute('data-index')]);\n\t};\n\n\tconst clear = () => {\n\t\tconst e = { target: { name } };\n\t\tformState.setValues(formState, e, name, [], afterChange);\n\n\t\tsetFilter('');\n\t\tselectedValues = [];\n\t\tfocus();\n\t};\n\n\tconst showClear = clearable && max !== 1 && selectedValues.length > 0 && !disabled;\n\n\tlet className = ['formosa-autocomplete'];\n\tif (showClear) {\n\t\tclassName.push('formosa-autocomplete--clearable');\n\t}\n\tif (disabled) {\n\t\tclassName.push('formosa-autocomplete--disabled');\n\t}\n\tclassName = className.join(' ');\n\n\tconst canAddValues = !disabled && (max === null || selectedValues.length < max);\n\n\tconst dataValue = JSON.stringify(get(formState.row, name));\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${className} ${wrapperClassName}`.trim()}\n\t\t\tdata-value={dataValue === undefined ? '' : dataValue}\n\t\t\tid={`${id || name}-wrapper`}\n\t\t\t{...wrapperAttributes}\n\t\t>\n\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t<ul className=\"formosa-autocomplete__values\">\n\t\t\t\t\t{selectedValues && selectedValues.map((value, i) => {\n\t\t\t\t\t\tlet label;\n\t\t\t\t\t\tif (labelFn) {\n\t\t\t\t\t\t\tlabel = labelFn(value);\n\t\t\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(value, 'label')) {\n\t\t\t\t\t\t\tlabel = value.label;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlabel = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--item\" key={JSON.stringify(value)}>\n\t\t\t\t\t\t\t\t{label}\n\t\t\t\t\t\t\t\t{!disabled && (\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__value__remove ${removeButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\t\tdata-index={i}\n\t\t\t\t\t\t\t\t\t\tonClick={onClickRemoveOption}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t{...removeButtonAttributes}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<CloseIcon height={removeIconHeight} width={removeIconWidth} {...removeIconAttributes} />\n\t\t\t\t\t\t\t\t\t\t{removeText}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t{canAddValues && (\n\t\t\t\t\t\t<li className=\"formosa-autocomplete__value formosa-autocomplete__value--input\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\tclassName={`formosa-field__input formosa-autocomplete__input ${inputClassName}`.trim()}\n\t\t\t\t\t\t\t\tid={id || name}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\t\tonKeyUp={onKeyUp}\n\t\t\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tvalue={filter}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t</ul>\n\n\t\t\t\t{isOpen && filteredOptions.length > 0 && (\n\t\t\t\t\t<ul className={`formosa-autocomplete__options ${optionListClassName}`.trim()} {...optionListAttributes}>\n\t\t\t\t\t\t{filteredOptions.map((option, index) => {\n\t\t\t\t\t\t\tlet optionClassName = ['formosa-autocomplete__option'];\n\t\t\t\t\t\t\tif (highlightedIndex === index) {\n\t\t\t\t\t\t\t\toptionClassName.push('formosa-autocomplete__option--highlighted');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\toptionClassName = optionClassName.join(' ');\n\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tclassName={`${optionClassName} ${optionListItemClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tkey={option.value}\n\t\t\t\t\t\t\t\t\t{...optionListItemAttributes}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName={`formosa-autocomplete__option__button ${optionButtonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\t\tdata-value={JSON.stringify(option)}\n\t\t\t\t\t\t\t\t\t\tonClick={onClickOption}\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t\t{...optionButtonAttributes}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{option.label}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t</ul>\n\t\t\t\t)}\n\n\t\t\t\t{showClear && (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={`formosa-autocomplete__clear ${clearButtonClassName}`.trim()}\n\t\t\t\t\t\t\tonClick={clear}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t{...clearButtonAttributes}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<CloseIcon height={clearIconHeight} width={clearIconWidth} {...clearIconAttributes} />\n\t\t\t\t\t\t\t{clearText}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nAutocomplete.propTypes = {\n\tafterAdd: PropTypes.func,\n\tafterChange: PropTypes.func,\n\tclearable: PropTypes.bool,\n\tclearButtonAttributes: PropTypes.object,\n\tclearButtonClassName: PropTypes.string,\n\tclearIconAttributes: PropTypes.object,\n\tclearIconHeight: PropTypes.number,\n\tclearIconWidth: PropTypes.number,\n\tclearText: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputClassName: PropTypes.string,\n\tlabelFn: PropTypes.func,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tmax: PropTypes.number,\n\tname: PropTypes.string.isRequired,\n\toptionButtonAttributes: PropTypes.object,\n\toptionButtonClassName: PropTypes.string,\n\toptionListAttributes: PropTypes.object,\n\toptionListClassName: PropTypes.string,\n\toptionListItemAttributes: PropTypes.object,\n\toptionListItemClassName: PropTypes.string,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\tplaceholder: PropTypes.string,\n\tremoveButtonAttributes: PropTypes.object,\n\tremoveButtonClassName: PropTypes.string,\n\tremoveIconAttributes: PropTypes.object,\n\tremoveIconHeight: PropTypes.number,\n\tremoveIconWidth: PropTypes.number,\n\tremoveText: PropTypes.string,\n\turl: PropTypes.string,\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nAutocomplete.defaultProps = {\n\tafterAdd: null,\n\tafterChange: null,\n\tclearable: true,\n\tclearButtonAttributes: null,\n\tclearButtonClassName: '',\n\tclearIconAttributes: null,\n\tclearIconHeight: 12,\n\tclearIconWidth: 12,\n\tclearText: 'Clear',\n\tdisabled: false,\n\tid: '',\n\tinputClassName: '',\n\tlabelFn: null,\n\tlabelKey: 'name',\n\tmax: null,\n\toptionButtonAttributes: null,\n\toptionButtonClassName: '',\n\toptionListAttributes: null,\n\toptionListClassName: '',\n\toptionListItemAttributes: null,\n\toptionListItemClassName: '',\n\toptions: null,\n\tplaceholder: 'Search',\n\tremoveButtonAttributes: null,\n\tremoveButtonClassName: '',\n\tremoveIconAttributes: null,\n\tremoveIconHeight: 12,\n\tremoveIconWidth: 12,\n\tremoveText: 'Remove',\n\turl: null,\n\tvalueKey: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function ConditionalWrapper({ children, className, condition }) {\n\tif (!condition) {\n\t\treturn children;\n\t}\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t{children}\n\t\t</div>\n\t);\n}\n\nConditionalWrapper.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\tclassName: PropTypes.string,\n\tcondition: PropTypes.any,\n};\n\nConditionalWrapper.defaultProps = {\n\tclassName: '',\n\tcondition: false,\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport ConditionalWrapper from './ConditionalWrapper';\nimport FormContext from './FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Input({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\tsuffix,\n\ttype,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst onChange = (e) => {\n\t\tconst newValue = type === 'checkbox' ? e.target.checked : e.target.value;\n\t\tformState.setValues(formState, e, e.target.name, newValue, afterChange);\n\t};\n\n\tconst value = type === 'file' ? '' : (get(formState.row, name) || '');\n\tconst checked = type === 'checkbox' && value;\n\n\tconst props = {};\n\tif (checked) {\n\t\tprops.checked = checked;\n\t} else if (type === 'checkbox') {\n\t\tprops.checked = false;\n\t}\n\n\treturn (\n\t\t<ConditionalWrapper className=\"formosa-suffix-container\" condition={suffix}>\n\t\t\t<input\n\t\t\t\tclassName={`formosa-field__input ${className}`.trim()}\n\t\t\t\tid={id || name}\n\t\t\t\tname={name}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype={type}\n\t\t\t\tvalue={value}\n\t\t\t\t{...props}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t{suffix && <span className=\"formosa-suffix\">{suffix}</span>}\n\t\t</ConditionalWrapper>\n\t);\n}\n\nInput.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n};\n\nInput.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n\tname: '',\n\tsuffix: '',\n\ttype: 'text',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CheckIcon } from '../../svg/check.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport Input from '../Input';\nimport PropTypes from 'prop-types';\n\nexport default function Checkbox({\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tname,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\treturn (\n\t\t<>\n\t\t\t<Input\n\t\t\t\tclassName={`formosa-field__input--checkbox ${className}`.trim()}\n\t\t\t\tchecked={!!get(formState.row, name)}\n\t\t\t\tid={id || name}\n\t\t\t\tname={name}\n\t\t\t\ttype=\"checkbox\"\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<CheckIcon className={`formosa-icon--check ${iconClassName}`.trim()} height={iconHeight} width={iconWidth} {...iconAttributes} />\n\t\t</>\n\t);\n}\n\nCheckbox.propTypes = {\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tname: PropTypes.string.isRequired,\n};\n\nCheckbox.defaultProps = {\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n};\n","const pad = (n, width, z = '0') => {\n\tn = n.toString();\n\treturn n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n};\n\nexport const stringToObject = (datetimeString, timeZone) => {\n\tconst output = {\n\t\tyear: '',\n\t\tmonth: '',\n\t\tday: '',\n\t\thour: '',\n\t\tminute: '',\n\t\tsecond: '',\n\t\tampm: 'am',\n\t};\n\n\tif (!datetimeString) {\n\t\treturn output;\n\t}\n\n\t// hour12 doesn't work in Chromium: https://github.com/microsoft/vscode/issues/117970\n\tlet value = new Date(`${datetimeString.replace(' ', 'T')}.000Z`);\n\tvalue = value.toLocaleString('en-CA', { hourCycle: 'h23', timeZone });\n\n\tconst date = value.substring(0, 10).split('-');\n\toutput.year = date[0];\n\toutput.month = parseInt(date[1], 10);\n\toutput.day = parseInt(date[2], 10);\n\n\tconst time = value.substring(12).split(':');\n\tconst hour = parseInt(time[0], 10);\n\tif (hour > 12) {\n\t\toutput.hour = hour - 12;\n\t} else if (hour === 0) {\n\t\toutput.hour = 12;\n\t} else {\n\t\toutput.hour = hour;\n\t}\n\toutput.minute = time[1];\n\toutput.second = time[2];\n\toutput.ampm = hour >= 12 ? 'pm' : 'am';\n\n\treturn output;\n};\n\nexport const objectToString = (datetimeObject) => {\n\tconst year = pad(datetimeObject.year, 4);\n\tconst month = pad(datetimeObject.month, 2);\n\tconst day = pad(datetimeObject.day, 2);\n\n\tlet hour = parseInt(datetimeObject.hour, 10);\n\tif (datetimeObject.ampm === 'pm' && hour < 12) {\n\t\thour += 12;\n\t} else if (datetimeObject.ampm === 'am' && hour === 12) {\n\t\thour = 0;\n\t}\n\tconst minute = pad(datetimeObject.minute, 2);\n\tconst second = pad(datetimeObject.second, 2);\n\n\ttry {\n\t\treturn new Date(year, month - 1, day, pad(hour, 2), minute, second).toISOString().replace('T', ' ').substring(0, 19);\n\t} catch {\n\t\treturn '';\n\t}\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport { ReactComponent as CaretIcon } from '../../svg/caret.svg';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\n\nexport default function Select({\n\tafterChange,\n\tclassName,\n\thideBlank,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\tid,\n\tname,\n\tlabelKey,\n\toptions,\n\turl,\n\tvalueKey,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : null);\n\tconst onChange = (e) => {\n\t\tformState.setValues(formState, e, e.target.name, e.target.value, afterChange);\n\t};\n\n\tuseEffect(() => {\n\t\tif (optionValues === null && url) {\n\t\t\tApi.get(url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : null);\n\t\treturn () => {};\n\t}, [options]);\n\n\treturn (\n\t\t<div className={`formosa-select-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<select\n\t\t\t\tclassName={`formosa-field__input formosa-field__input--select ${className}`.trim()}\n\t\t\t\tid={id || name}\n\t\t\t\tname={name}\n\t\t\t\tonChange={onChange}\n\t\t\t\tvalue={get(formState.row, name) || ''}\n\t\t\t\t{...otherProps}\n\t\t\t>\n\t\t\t\t{!hideBlank && <option />}\n\t\t\t\t{optionValues && optionValues.map(({ label, value }) => (\n\t\t\t\t\t<option key={value} value={value}>{label}</option>\n\t\t\t\t))}\n\t\t\t</select>\n\t\t\t<CaretIcon className={`formosa-icon--caret ${iconClassName}`.trim()} height={iconHeight} width={iconWidth} {...iconAttributes} />\n\t\t</div>\n\t);\n}\n\nSelect.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\thideBlank: PropTypes.bool,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\tid: PropTypes.string,\n\tname: PropTypes.string,\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\turl: PropTypes.string,\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSelect.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\thideBlank: false,\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\tid: null,\n\tname: '',\n\tlabelKey: 'name',\n\toptions: null,\n\turl: null,\n\tvalueKey: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import { objectToString, stringToObject } from '../Helpers/Datetime';\nimport React, { useContext, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport Input from '../Input';\nimport PropTypes from 'prop-types';\nimport Select from './Select';\n\nexport default function Datetime({\n\tafterChange,\n\tampmAttributes,\n\tconvertToTimezone,\n\tdayAttributes,\n\tdisabled,\n\thourAttributes,\n\tminuteAttributes,\n\tmonthAttributes,\n\tname,\n\tsecondAttributes,\n\twrapperAttributes,\n\twrapperClassName,\n\tyearAttributes,\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [values, setValues] = useState(stringToObject(get(formState.row, name) || '', convertToTimezone));\n\tconst onChange = (e) => {\n\t\tconst key = e.target.getAttribute('data-datetime');\n\t\tconst newValues = {\n\t\t\t...values,\n\t\t\t[key]: e.target.value,\n\t\t};\n\t\tsetValues(newValues);\n\n\t\tformState.setValues(formState, e, name, objectToString(newValues), afterChange);\n\t};\n\n\treturn (\n\t\t<div className={`formosa-datetime-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Select\n\t\t\t\tdata-datetime=\"month\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-month`}\n\t\t\t\tonChange={onChange}\n\t\t\t\toptions={{\n\t\t\t\t\t1: 'January',\n\t\t\t\t\t2: 'February',\n\t\t\t\t\t3: 'March',\n\t\t\t\t\t4: 'April',\n\t\t\t\t\t5: 'May',\n\t\t\t\t\t6: 'June',\n\t\t\t\t\t7: 'July',\n\t\t\t\t\t8: 'August',\n\t\t\t\t\t9: 'September',\n\t\t\t\t\t10: 'October',\n\t\t\t\t\t11: 'November',\n\t\t\t\t\t12: 'December',\n\t\t\t\t}}\n\t\t\t\ttype=\"select\"\n\t\t\t\tvalue={values.month}\n\t\t\t\twrapperClassName=\"formosa-field__input--date formosa-field__input--month\"\n\t\t\t\t{...monthAttributes}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tclassName=\"formosa-field__input--date formosa-field__input--day\"\n\t\t\t\tdata-datetime=\"day\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-day`}\n\t\t\t\tinputMode=\"numeric\"\n\t\t\t\tmaxLength={2}\n\t\t\t\tonChange={onChange}\n\t\t\t\tplaceholder=\"DD\"\n\t\t\t\tsize={4}\n\t\t\t\tvalue={values.day}\n\t\t\t\t{...dayAttributes}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tclassName=\"formosa-field__input--date formosa-field__input--year\"\n\t\t\t\tdata-datetime=\"year\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-year`}\n\t\t\t\tinputMode=\"numeric\"\n\t\t\t\tmaxLength={4}\n\t\t\t\tonChange={onChange}\n\t\t\t\tplaceholder=\"YYYY\"\n\t\t\t\tsize={6}\n\t\t\t\tsuffix=\",\"\n\t\t\t\tvalue={values.year}\n\t\t\t\t{...yearAttributes}\n\t\t\t/>\n\n\t\t\t<Input\n\t\t\t\tclassName=\"formosa-field__input--date formosa-field__input--hour\"\n\t\t\t\tdata-datetime=\"hour\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-hour`}\n\t\t\t\tinputMode=\"numeric\"\n\t\t\t\tmaxLength={2}\n\t\t\t\tonChange={onChange}\n\t\t\t\tplaceholder=\"hh\"\n\t\t\t\tsize={4}\n\t\t\t\tsuffix=\":\"\n\t\t\t\tvalue={values.hour}\n\t\t\t\t{...hourAttributes}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tclassName=\"formosa-field__input--date formosa-field__input--minute\"\n\t\t\t\tdata-datetime=\"minute\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-minute`}\n\t\t\t\tinputMode=\"numeric\"\n\t\t\t\tmaxLength={2}\n\t\t\t\tonChange={onChange}\n\t\t\t\tplaceholder=\"mm\"\n\t\t\t\tsize={4}\n\t\t\t\tsuffix=\":\"\n\t\t\t\tvalue={values.minute}\n\t\t\t\t{...minuteAttributes}\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tclassName=\"formosa-field__input--date formosa-field__input--second\"\n\t\t\t\tdata-datetime=\"second\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\tid={`${name}-second`}\n\t\t\t\tinputMode=\"numeric\"\n\t\t\t\tmaxLength={2}\n\t\t\t\tonChange={onChange}\n\t\t\t\tplaceholder=\"ss\"\n\t\t\t\tsize={4}\n\t\t\t\tvalue={values.second}\n\t\t\t\t{...secondAttributes}\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tdata-datetime=\"ampm\"\n\t\t\t\tdisabled={disabled}\n\t\t\t\thideBlank\n\t\t\t\tid={`${name}-ampm`}\n\t\t\t\tonChange={onChange}\n\t\t\t\toptions={{\n\t\t\t\t\tam: 'am',\n\t\t\t\t\tpm: 'pm',\n\t\t\t\t}}\n\t\t\t\ttype=\"select\"\n\t\t\t\tvalue={values.ampm}\n\t\t\t\twrapperClassName=\"formosa-field__input--date formosa-field__input--ampm\"\n\t\t\t\t{...ampmAttributes}\n\t\t\t/>\n\t\t</div>\n\t);\n}\n\nDatetime.propTypes = {\n\tafterChange: PropTypes.func,\n\tampmAttributes: PropTypes.object,\n\tconvertToTimezone: PropTypes.string,\n\tdayAttributes: PropTypes.object,\n\tdisabled: PropTypes.bool,\n\thourAttributes: PropTypes.object,\n\tminuteAttributes: PropTypes.object,\n\tmonthAttributes: PropTypes.object,\n\tname: PropTypes.string.isRequired,\n\tsecondAttributes: PropTypes.object,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n\tyearAttributes: PropTypes.object,\n};\n\nDatetime.defaultProps = {\n\tafterChange: null,\n\tampmAttributes: null,\n\tconvertToTimezone: 'UTC',\n\tdayAttributes: null,\n\tdisabled: false,\n\thourAttributes: null,\n\tminuteAttributes: null,\n\tmonthAttributes: null,\n\tsecondAttributes: null,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n\tyearAttributes: null,\n};\n","import React, { useContext, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport Input from '../Input';\nimport PropTypes from 'prop-types';\n\nexport default function File({\n\tafterChange,\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\tdisabled,\n\temptyText,\n\tid,\n\timageHeight,\n\timagePrefix,\n\timagePreview,\n\tinputWrapperAttributes,\n\tinputWrapperClassName,\n\tmultiple,\n\tname,\n\tremoveText,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst value = get(formState.row, name);\n\tconst hasValue = !!value;\n\tconst [text, setText] = useState(value || emptyText);\n\tconst [srcs, setSrcs] = useState(value ? [`${imagePrefix}${value}`] : []);\n\n\tconst onChange = (e) => {\n\t\tconst files = [...e.target.files];\n\t\tconst filenames = files.map((file) => file.name).join(', ');\n\n\t\tif (imagePreview) {\n\t\t\tsetSrcs(files.map((file) => (URL.createObjectURL(file))));\n\t\t}\n\n\t\tsetText(filenames);\n\t\tformState.setValues(formState, e, e.target.name, true, afterChange, multiple ? files : files[0]);\n\t};\n\n\tconst onRemove = (e) => {\n\t\tsetText(emptyText);\n\t\tformState.setValues(formState, e, name, '', afterChange, false);\n\t\tdocument.getElementById(id || name).focus();\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{(hasValue && imagePreview) && (\n\t\t\t\tsrcs.map((src) => (\n\t\t\t\t\t<img alt=\"\" height={imageHeight} key={src} src={src} />\n\t\t\t\t))\n\t\t\t)}\n\t\t\t<div className={`formosa-file-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t\t<div className={`formosa-file-input-wrapper ${inputWrapperClassName}`.trim()} {...inputWrapperAttributes}>\n\t\t\t\t\t<div className={`formosa-file-name${text === emptyText ? ' formosa-file-name--empty' : ''}`}>\n\t\t\t\t\t\t{text}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tclassName={`formosa-field__input--file ${className}`.trim()}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tid={id || name}\n\t\t\t\t\t\tmultiple={multiple}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t{hasValue && !disabled && (\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={`formosa-button formosa-button--remove-file formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t{...buttonAttributes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{removeText}\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nFile.propTypes = {\n\tafterChange: PropTypes.func,\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\tdisabled: PropTypes.bool,\n\temptyText: PropTypes.string,\n\tid: PropTypes.string,\n\timageHeight: PropTypes.number,\n\timagePrefix: PropTypes.string,\n\timagePreview: PropTypes.bool,\n\tinputWrapperAttributes: PropTypes.object,\n\tinputWrapperClassName: PropTypes.string,\n\tmultiple: PropTypes.bool,\n\tname: PropTypes.string,\n\tremoveText: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nFile.defaultProps = {\n\tafterChange: null,\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\tdisabled: false,\n\temptyText: 'No file selected.',\n\tid: '',\n\timageHeight: 100,\n\timagePrefix: '',\n\timagePreview: false,\n\tinputWrapperAttributes: null,\n\tinputWrapperClassName: '',\n\tmultiple: false,\n\tname: '',\n\tremoveText: 'Remove',\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Input from '../Input';\nimport PropTypes from 'prop-types';\n\nexport default function Password({\n\tbuttonAttributes,\n\tbuttonClassName,\n\tclassName,\n\thideText,\n\tshowText,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst [tempType, setTempType] = useState('password');\n\tconst togglePassword = () => {\n\t\tif (tempType === 'password') {\n\t\t\tsetTempType('text');\n\t\t} else {\n\t\t\tsetTempType('password');\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className={`formosa-password-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tclassName={`formosa-field__input--password formosa-prefix ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t\ttype={tempType}\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName={`formosa-button formosa-button--toggle-password formosa-postfix ${buttonClassName}`.trim()}\n\t\t\t\tonClick={togglePassword}\n\t\t\t\ttype=\"button\"\n\t\t\t\t{...buttonAttributes}\n\t\t\t>\n\t\t\t\t{tempType === 'password' ? showText : hideText}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nPassword.propTypes = {\n\tbuttonAttributes: PropTypes.object,\n\tbuttonClassName: PropTypes.string,\n\tclassName: PropTypes.string,\n\thideText: PropTypes.string,\n\tshowText: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nPassword.defaultProps = {\n\tbuttonAttributes: null,\n\tbuttonClassName: '',\n\tclassName: '',\n\thideText: 'Hide',\n\tshowText: 'Show',\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Radio({\n\tafterChange,\n\tclassName,\n\tlabel,\n\tlabelAttributes,\n\tlabelClassName,\n\tname,\n\tvalue,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst onChange = (e) => {\n\t\tformState.setValues(formState, e, e.target.name, e.target.value, afterChange);\n\t};\n\tconst checked = get(formState.row, name) === value;\n\n\treturn (\n\t\t<label className={`formosa-radio__label${checked ? ' formosa-radio__label--checked' : ''} ${labelClassName}`.trim()} {...labelAttributes}>\n\t\t\t<input\n\t\t\t\tchecked={checked}\n\t\t\t\tclassName={`formosa-field__input formosa-radio__input ${className}`.trim()}\n\t\t\t\tname={name}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttype=\"radio\"\n\t\t\t\tvalue={value}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t{label}\n\t\t</label>\n\t);\n}\n\nRadio.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelAttributes: PropTypes.object,\n\tlabelClassName: PropTypes.string,\n\tname: PropTypes.string,\n\tvalue: PropTypes.string,\n};\n\nRadio.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tlabel: '',\n\tlabelAttributes: null,\n\tlabelClassName: '',\n\tname: '',\n\tvalue: '',\n};\n","import React, { useContext, useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from '../Helpers/Api';\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport { normalizeOptions } from '../Helpers/Options';\nimport PropTypes from 'prop-types';\nimport Radio from './Radio';\n\nexport default function RadioList({\n\tlabelKey,\n\tlistAttributes,\n\tlistClassName,\n\tlistItemAttributes,\n\tlistItemClassName,\n\tname,\n\toptions,\n\trequired,\n\turl,\n\tvalueKey,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst [optionValues, setOptionValues] = useState(options ? normalizeOptions(options, labelKey, valueKey) : null);\n\n\tuseEffect(() => {\n\t\tif (optionValues === null && url) {\n\t\t\tApi.get(url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tsetOptionValues(normalizeOptions(response, labelKey, valueKey));\n\t\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t}, [url]);\n\n\tuseEffect(() => {\n\t\tsetOptionValues(options ? normalizeOptions(options, labelKey, valueKey) : null);\n\t\treturn () => {};\n\t}, [options]);\n\n\treturn (\n\t\t<ul className={`formosa-radio ${listClassName}`.trim()} {...listAttributes}>\n\t\t\t{optionValues && optionValues.map(({ label, value }) => (\n\t\t\t\t<li className={`formosa-radio__item ${listItemClassName}`.trim()} key={value} {...listItemAttributes}>\n\t\t\t\t\t<Radio\n\t\t\t\t\t\tchecked={get(formState.row, name) === value}\n\t\t\t\t\t\tlabel={label}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\t{...otherProps}\n\t\t\t\t\t/>\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t);\n}\n\nRadioList.propTypes = {\n\tlabelKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\tlistAttributes: PropTypes.object,\n\tlistClassName: PropTypes.string,\n\tlistItemAttributes: PropTypes.object,\n\tlistItemClassName: PropTypes.string,\n\tname: PropTypes.string.isRequired,\n\toptions: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]),\n\trequired: PropTypes.bool,\n\turl: PropTypes.string,\n\tvalueKey: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n};\n\nRadioList.defaultProps = {\n\tlabelKey: 'name',\n\tlistAttributes: null,\n\tlistClassName: '',\n\tlistItemAttributes: null,\n\tlistItemClassName: '',\n\toptions: null,\n\trequired: false,\n\turl: null,\n\tvalueKey: null,\n};\n","import Input from '../Input';\nimport PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as SearchIcon } from '../../svg/search.svg';\n\nexport default function Search({\n\tclassName,\n\ticonAttributes,\n\ticonClassName,\n\ticonHeight,\n\ticonWidth,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className={`formosa-search-wrapper ${wrapperClassName}`.trim()} {...wrapperAttributes}>\n\t\t\t<Input\n\t\t\t\tclassName={`formosa-field__input--search ${className}`.trim()}\n\t\t\t\t{...otherProps}\n\t\t\t/>\n\t\t\t<SearchIcon className={`formosa-icon--search ${iconClassName}`.trim()} height={iconHeight} width={iconWidth} {...iconAttributes} />\n\t\t</div>\n\t);\n}\n\nSearch.propTypes = {\n\tclassName: PropTypes.string,\n\ticonAttributes: PropTypes.object,\n\ticonClassName: PropTypes.string,\n\ticonHeight: PropTypes.number,\n\ticonWidth: PropTypes.number,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nSearch.defaultProps = {\n\tclassName: '',\n\ticonAttributes: null,\n\ticonClassName: '',\n\ticonHeight: 16,\n\ticonWidth: 16,\n\twrapperAttributes: null,\n\twrapperClassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport PropTypes from 'prop-types';\n\nexport default function Textarea({\n\tafterChange,\n\tclassName,\n\tid,\n\tname,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst onChange = (e) => {\n\t\tformState.setValues(formState, e, e.target.name, e.target.value, afterChange);\n\t};\n\n\treturn (\n\t\t<textarea\n\t\t\tclassName={`formosa-field__input formosa-field__input--textarea ${className}`.trim()}\n\t\t\tid={id || name}\n\t\t\tname={name}\n\t\t\tonChange={onChange}\n\t\t\tvalue={get(formState.row, name) || ''}\n\t\t\t{...otherProps}\n\t\t/>\n\t);\n}\n\nTextarea.propTypes = {\n\tafterChange: PropTypes.func,\n\tclassName: PropTypes.string,\n\tid: PropTypes.string,\n\tname: PropTypes.string.isRequired,\n};\n\nTextarea.defaultProps = {\n\tafterChange: null,\n\tclassName: '',\n\tid: null,\n};\n","import Autocomplete from './Input/Autocomplete';\nimport Checkbox from './Input/Checkbox';\nimport Datetime from './Input/Datetime';\nimport File from './Input/File';\nimport Input from './Input';\nimport Password from './Input/Password';\nimport RadioList from './Input/RadioList';\nimport Search from './Input/Search';\nimport Select from './Input/Select';\nimport Textarea from './Input/Textarea';\n\nexport default (type, component) => {\n\tif (component) {\n\t\treturn component;\n\t}\n\tif (type === 'select') {\n\t\treturn Select;\n\t}\n\tif (type === 'textarea') {\n\t\treturn Textarea;\n\t}\n\tif (type === 'radio') {\n\t\treturn RadioList;\n\t}\n\tif (type === 'checkbox') {\n\t\treturn Checkbox;\n\t}\n\tif (type === 'password') {\n\t\treturn Password;\n\t}\n\tif (type === 'datetime') {\n\t\treturn Datetime;\n\t}\n\tif (type === 'search') {\n\t\treturn Search;\n\t}\n\tif (type === 'autocomplete') {\n\t\treturn Autocomplete;\n\t}\n\tif (type === 'file') {\n\t\treturn File;\n\t}\n\treturn Input;\n};\n","export default (oldDirty, name) => {\n\tconst newDirty = [...oldDirty];\n\tif (!newDirty.includes(name)) {\n\t\tnewDirty.push(name);\n\t}\n\treturn newDirty;\n};\n","import React, { useContext, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from '../FormContext';\nimport get from 'get-value';\nimport getInputElement from '../FieldInput';\nimport getNewDirty from '../Helpers/FormState';\nimport PropTypes from 'prop-types';\nimport set from 'set-value';\n\nexport default function HasMany({\n\tattributes,\n\tbuttonClassName,\n\tname,\n\trecordType,\n\tremovable,\n}) {\n\tconst { formState, setFormState } = useContext(FormContext);\n\tconst [tempId, setTempId] = useState(1);\n\tconst values = get(formState.row, name) || [];\n\n\tconst onAdd = () => {\n\t\tconst newValue = get(formState.row, `_new.${name}`);\n\t\tconst hasNewValue = newValue && Object.keys(newValue).length > 0;\n\t\tif (!hasNewValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tnewValue.id = `temp-${tempId}`;\n\t\tnewValue.type = recordType;\n\t\tsetTempId(tempId + 1);\n\n\t\tconst newRow = { ...formState.row };\n\t\tconst newValues = get(newRow, name) || [];\n\t\tnewValues.push(newValue);\n\n\t\tset(newRow, name, newValues);\n\t\tset(newRow, `_new.${name}`, {});\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\tdirtyIncluded: getNewDirty(formState.dirtyIncluded, `${newValue.type}.${newValue.id}`),\n\t\t\trow: newRow,\n\t\t});\n\n\t\tdocument.getElementById(`_new.${name}.${attributes[0].name}`).focus();\n\t};\n\n\tconst onKeyDown = (e) => {\n\t\tif (e.key !== 'Enter') {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = get(formState.row, `_new.${name}`);\n\t\tconst hasNewValue = newValue && Object.keys(newValue).length > 0;\n\t\tif (hasNewValue) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tonAdd();\n\t\t}\n\t};\n\n\tconst onRemove = (e) => {\n\t\tconst i = e.target.getAttribute('data-index');\n\t\tif (i < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newRow = { ...formState.row };\n\t\tconst newValues = get(newRow, name);\n\t\tnewValues.splice(i, 1);\n\n\t\tset(newRow, name, newValues);\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\trow: newRow,\n\t\t});\n\t};\n\n\tconst afterChange = (e) => {\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\tdirty: getNewDirty(formState.dirty, name),\n\t\t\tdirtyIncluded: getNewDirty(formState.dirtyIncluded, e.target.getAttribute('data-unique-name')),\n\t\t});\n\t};\n\n\tconst visibleAttributes = attributes.filter((attribute) => (attribute.type !== 'hidden'));\n\tconst hiddenAttributes = attributes.filter((attribute) => (attribute.type === 'hidden'));\n\thiddenAttributes.push({\n\t\tname: 'id',\n\t\ttype: 'hidden',\n\t});\n\thiddenAttributes.push({\n\t\tname: 'type',\n\t\ttype: 'hidden',\n\t});\n\tconst showHeader = visibleAttributes.some((attribute) => (attribute.label));\n\n\treturn (\n\t\t<table className=\"formosa-has-many\">\n\t\t\t{showHeader && (\n\t\t\t\t<thead className=\"formosa-has-many__head\">\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t{visibleAttributes.map((attribute) => (\n\t\t\t\t\t\t\t<th key={attribute.name}>{attribute.label}</th>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<th />\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t)}\n\t\t\t<tbody className=\"formosa-has-many__body\">\n\t\t\t\t{values.map((value, i) => {\n\t\t\t\t\tlet isRemovable = typeof removable === 'boolean' && removable;\n\t\t\t\t\tif (typeof removable === 'function') {\n\t\t\t\t\t\tisRemovable = removable(value);\n\t\t\t\t\t}\n\t\t\t\t\tconst rowKey = `included.${value.type}.${value.id}`;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<tr className=\"formosa-has-many__row\" key={rowKey}>\n\t\t\t\t\t\t\t{visibleAttributes.map((attribute) => {\n\t\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\t\tconst fieldKey = `${rowKey}.${attribute.name}`;\n\t\t\t\t\t\t\t\tconst hasError = Object.prototype.hasOwnProperty.call(formState.errors, fieldKey);\n\t\t\t\t\t\t\t\tconst className = ['formosa-has-many__column'];\n\t\t\t\t\t\t\t\tif (hasError) {\n\t\t\t\t\t\t\t\t\tclassName.push('formosa-field--has-error');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<td className={className.join(' ')} key={attribute.name}>\n\t\t\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\t\t\tafterChange={afterChange}\n\t\t\t\t\t\t\t\t\t\t\tdata-unique-name={`${name}.${value.id}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t\tname={`${name}.${i}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{hasError && <div className=\"formosa-field__error\">{formState.errors[rowKey].join((<br />))}</div>}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t<td className=\"formosa-has-many__column formosa-has-many__column--button\">\n\t\t\t\t\t\t\t\t{hiddenAttributes.map((attribute) => {\n\t\t\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\t\t\tkey={attribute.name}\n\t\t\t\t\t\t\t\t\t\t\tname={`${name}.${i}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\tclassName={`formosa-button formosa-button--remove-has-many formosa-has-many__button ${buttonClassName}`.trim()}\n\t\t\t\t\t\t\t\t\tdata-index={i}\n\t\t\t\t\t\t\t\t\tdisabled={!isRemovable}\n\t\t\t\t\t\t\t\t\tonClick={onRemove}\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</tbody>\n\t\t\t<tfoot className=\"formosa-has-many__foot\">\n\t\t\t\t<tr className=\"formosa-has-many__row formosa-has-many__row--new\">\n\t\t\t\t\t{visibleAttributes.map((attribute) => {\n\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<td className=\"formosa-has-many__column\" key={attribute.name}>\n\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\tname={`_new.${name}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\t<td className=\"formosa-has-many__column formosa-has-many__column--button\">\n\t\t\t\t\t\t{hiddenAttributes.map((attribute) => {\n\t\t\t\t\t\t\tconst Component = getInputElement(attribute.type, attribute.component);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Component\n\t\t\t\t\t\t\t\t\t{...attribute}\n\t\t\t\t\t\t\t\t\tkey={attribute.name}\n\t\t\t\t\t\t\t\t\tname={`_new.${name}.${attribute.name}`}\n\t\t\t\t\t\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t})}\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={`formosa-button formosa-button--add-has-many formosa-has-many__button ${buttonClassName}`.trim()}\n\t\t\t\t\t\t\tonClick={onAdd}\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tAdd\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</tfoot>\n\t\t</table>\n\t);\n}\n\nHasMany.propTypes = {\n\tattributes: PropTypes.array,\n\tbuttonClassName: PropTypes.string,\n\tname: PropTypes.string.isRequired,\n\trecordType: PropTypes.string.isRequired,\n\tremovable: PropTypes.oneOfType([\n\t\tPropTypes.bool,\n\t\tPropTypes.func,\n\t]),\n};\n\nHasMany.defaultProps = {\n\tattributes: [],\n\tbuttonClassName: '',\n\tremovable: true,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Label({\n\tclassName,\n\thtmlFor,\n\tlabel,\n\tnote,\n\trequired,\n\ttype,\n\t...otherProps\n}) {\n\tlet labelClassName = 'formosa-label';\n\tif (required) {\n\t\tlabelClassName += ' formosa-label--required';\n\t}\n\n\tlet wrapperClassName = 'formosa-label-wrapper';\n\tif (type === 'checkbox') {\n\t\twrapperClassName += ' formosa-label-wrapper--checkbox';\n\t}\n\n\tconst props = {};\n\tif (htmlFor && type !== 'has-many') {\n\t\tprops.htmlFor = htmlFor;\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassName}>\n\t\t\t<label className={`${labelClassName} ${className}`.trim()} {...props} {...otherProps}>{label}</label>\n\t\t\t{note && <span className=\"formosa-label__note\">{note}</span>}\n\t\t</div>\n\t);\n}\n\nLabel.propTypes = {\n\tclassName: PropTypes.string,\n\thtmlFor: PropTypes.string,\n\tlabel: PropTypes.string,\n\tnote: PropTypes.string,\n\trequired: PropTypes.bool,\n\ttype: PropTypes.string,\n};\n\nLabel.defaultProps = {\n\tclassName: '',\n\thtmlFor: '',\n\tlabel: '',\n\tnote: '',\n\trequired: false,\n\ttype: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport get from 'get-value';\nimport getInputElement from './FieldInput';\nimport HasMany from './Input/HasMany';\nimport Label from './Label';\nimport PropTypes from 'prop-types';\n\nexport default function Field({\n\tcomponent,\n\tdisabled,\n\tid,\n\tinputWrapperAttributes,\n\tlabel,\n\tlabelNote,\n\tlabelPosition,\n\tname,\n\tnote,\n\tprefix,\n\tpostfix,\n\trequired,\n\tsuffix,\n\ttype,\n\twrapperAttributes,\n\twrapperClassName,\n\t...otherProps\n}) {\n\tconst { formState } = useContext(FormContext);\n\tconst inputProps = { ...otherProps };\n\tif (id) {\n\t\tinputProps.id = id;\n\t}\n\tif (name) {\n\t\tinputProps.name = name;\n\t}\n\tif (disabled) {\n\t\tinputProps.disabled = disabled;\n\t}\n\tif (required) {\n\t\tinputProps.required = required;\n\t}\n\tif (suffix) {\n\t\tinputProps.suffix = suffix;\n\t}\n\tif (type) {\n\t\tinputProps.type = type;\n\t}\n\tlet InputComponent = getInputElement(type, component);\n\tif (type === 'has-many') {\n\t\t// This prevents a dependency cycle.\n\t\tInputComponent = HasMany;\n\t}\n\tconst input = (\n\t\t<InputComponent {...inputProps} />\n\t);\n\n\tif (type === 'hidden') {\n\t\treturn input;\n\t}\n\n\tconst htmlFor = id || name;\n\n\tconst labelComponent = (\n\t\t<Label\n\t\t\thtmlFor={type === 'datetime' ? `${htmlFor}-month` : htmlFor}\n\t\t\tlabel={label}\n\t\t\tnote={labelNote}\n\t\t\trequired={required}\n\t\t\ttype={type}\n\t\t/>\n\t);\n\n\tconst hasError = Object.prototype.hasOwnProperty.call(formState.errors, name);\n\n\tconst wrapperClassNameList = ['formosa-field', `formosa-field--${name}`];\n\tif (wrapperClassName) {\n\t\twrapperClassNameList.push(wrapperClassName);\n\t}\n\tif (hasError) {\n\t\twrapperClassNameList.push('formosa-field--has-error');\n\t}\n\tif (disabled) {\n\t\twrapperClassNameList.push('formosa-field--disabled');\n\t}\n\tif (prefix) {\n\t\twrapperClassNameList.push('formosa-field--has-prefix');\n\t}\n\tif (postfix) {\n\t\twrapperClassNameList.push('formosa-field--has-postfix');\n\t}\n\tif (labelPosition === 'after') {\n\t\twrapperClassNameList.push('formosa-field--label-after');\n\t}\n\n\tconst inputWrapperClassNameList = ['formosa-input-wrapper', `formosa-input-wrapper--${type}`];\n\tif (suffix) {\n\t\tinputWrapperClassNameList.push('formosa-field--has-suffix');\n\t}\n\n\treturn (\n\t\t<div className={wrapperClassNameList.join(' ')} {...wrapperAttributes}>\n\t\t\t{label && labelPosition === 'before' && labelComponent}\n\t\t\t{label && labelPosition === 'after' && <div className=\"formosa-label-wrapper\" />}\n\t\t\t<div className={inputWrapperClassNameList.join(' ')} {...inputWrapperAttributes}>\n\t\t\t\t{prefix}\n\t\t\t\t{input}\n\t\t\t\t{label && labelPosition === 'after' && labelComponent}\n\t\t\t\t{note && (\n\t\t\t\t\t<div className=\"formosa-field__note\">\n\t\t\t\t\t\t{typeof note === 'function' ? note(get(formState.row, name), formState.row) : note}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{postfix}\n\t\t\t\t{hasError && (\n\t\t\t\t\t<div className=\"formosa-field__error\" id={`${id || name}-error`}>\n\t\t\t\t\t\t{formState.errors[name].map((e) => (<div key={e}>{e}</div>))}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nField.propTypes = {\n\tcomponent: PropTypes.func,\n\tdisabled: PropTypes.bool,\n\tid: PropTypes.string,\n\tinputWrapperAttributes: PropTypes.object,\n\tlabel: PropTypes.string,\n\tlabelNote: PropTypes.string,\n\tlabelPosition: PropTypes.string,\n\tname: PropTypes.string.isRequired,\n\tnote: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.object,\n\t\tPropTypes.string,\n\t]),\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n\trequired: PropTypes.bool,\n\tsuffix: PropTypes.string,\n\ttype: PropTypes.string,\n\twrapperAttributes: PropTypes.object,\n\twrapperClassName: PropTypes.string,\n};\n\nField.defaultProps = {\n\tcomponent: null,\n\tdisabled: false,\n\tid: null,\n\tinputWrapperAttributes: {},\n\tlabel: '',\n\tlabelNote: '',\n\tlabelPosition: 'before',\n\tnote: '',\n\tprefix: null,\n\tpostfix: null,\n\trequired: false,\n\tsuffix: '',\n\ttype: 'text',\n\twrapperAttributes: {},\n\twrapperClassName: '',\n};\n","import React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default React.createContext(\n\t{\n\t\taddToast: null,\n\t\tremoveToast: null,\n\t\ttoasts: {},\n\t}\n);\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\n\nexport default function Message() {\n\tconst { formState } = useContext(FormContext);\n\tconst hasErrors = Object.prototype.hasOwnProperty.call(formState.errors, '');\n\n\treturn (\n\t\t<>\n\t\t\t{hasErrors && (<p className=\"formosa-message formosa-message--error\">{formState.errors[''].join(' ')}</p>)}\n\t\t\t{formState.message && (<p className=\"formosa-message formosa-message--success\">{formState.message}</p>)}\n\t\t</>\n\t);\n}\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport Api from './Helpers/Api';\nimport FormContext from './FormContext';\nimport FormosaContext from './FormosaContext';\nimport { getBody } from './Helpers/JsonApi';\nimport Message from './Message';\nimport PropTypes from 'prop-types';\n\nexport default function FormInner({\n\tafterNoSubmit,\n\tafterSubmit,\n\tchildren,\n\tclearOnSubmit,\n\tdefaultRow,\n\tfilterBody,\n\tfilterValues,\n\thtmlId,\n\tid,\n\tmethod,\n\tparams,\n\tpath,\n\tpreventEmptyRequest,\n\trelationshipNames,\n\tshowMessage,\n\tsuccessMessageText,\n\tsuccessToastText,\n\t...otherProps\n}) {\n\tconst { formState, setFormState } = useContext(FormContext);\n\tconst { formosaState } = useContext(FormosaContext);\n\n\tconst submitApiRequest = (e) => {\n\t\te.preventDefault();\n\n\t\tif (method === 'DELETE' && !window.confirm('Are you sure you want to delete this?')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (preventEmptyRequest && formState.dirty.length <= 0) {\n\t\t\tformosaState.addToast('No changes to save.');\n\t\t\tif (afterNoSubmit) {\n\t\t\t\tafterNoSubmit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tlet url = path;\n\t\tif (id) {\n\t\t\turl = `${path}/${id}`;\n\t\t}\n\t\tif (params) {\n\t\t\turl += `?${params}`;\n\t\t}\n\n\t\tconst body = getBody(\n\t\t\tmethod,\n\t\t\tpath,\n\t\t\tid,\n\t\t\tformState,\n\t\t\trelationshipNames,\n\t\t\tfilterBody,\n\t\t\tfilterValues\n\t\t);\n\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\terrors: {},\n\t\t\tmessage: '',\n\t\t});\n\n\t\tApi.request(method, url, body)\n\t\t\t.then((response) => {\n\t\t\t\tif (!response) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst newState = {\n\t\t\t\t\t...formState,\n\t\t\t\t\tdirty: [],\n\t\t\t\t\tdirtyIncluded: [],\n\t\t\t\t\terrors: {},\n\t\t\t\t\tmessage: successMessageText,\n\t\t\t\t};\n\t\t\t\tif (clearOnSubmit) {\n\t\t\t\t\tnewState.row = defaultRow;\n\t\t\t\t}\n\t\t\t\tsetFormState(newState);\n\n\t\t\t\tif (successToastText) {\n\t\t\t\t\tformosaState.addToast(successToastText, 'success');\n\t\t\t\t}\n\t\t\t\tif (afterSubmit) {\n\t\t\t\t\tafterSubmit(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(response, 'errors')) {\n\t\t\t\t\tformosaState.addToast('Error.', 'error');\n\t\t\t\t} else if (Object.prototype.hasOwnProperty.call(response, 'message')) {\n\t\t\t\t\tformosaState.addToast(response.message, 'error', 10000);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tformosaState.addToast('Server error.', 'error');\n\t\t\t\t\tthrow response;\n\t\t\t\t}\n\n\t\t\t\tconst errors = {};\n\t\t\t\tlet key;\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(error, 'source')) {\n\t\t\t\t\t\tkey = error.source.pointer.replace('/data/attributes/', '');\n\t\t\t\t\t\tkey = key.replace('/data/meta/', 'meta.');\n\t\t\t\t\t\tif (key.startsWith('/included/')) {\n\t\t\t\t\t\t\tconst i = key.replace(/^\\/included\\/(\\d+)\\/.+$/g, '$1');\n\t\t\t\t\t\t\tconst includedRecord = body.included[parseInt(i, 10)];\n\t\t\t\t\t\t\tkey = key.replace(/^\\/included\\/(\\d+)\\//g, `included.${includedRecord.type}.${includedRecord.id}.`);\n\t\t\t\t\t\t\tkey = key.replace(/\\//g, '.');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!document.querySelector(`[name=\"${key}\"]`)) {\n\t\t\t\t\t\t\tkey = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tkey = '';\n\t\t\t\t\t}\n\t\t\t\t\tif (!Object.prototype.hasOwnProperty.call(errors, key)) {\n\t\t\t\t\t\terrors[key] = [];\n\t\t\t\t\t}\n\t\t\t\t\terrors[key].push(error.title);\n\t\t\t\t});\n\t\t\t\tsetFormState({\n\t\t\t\t\t...formState,\n\t\t\t\t\terrors,\n\t\t\t\t\tmessage: '',\n\t\t\t\t});\n\t\t\t});\n\t};\n\tif (method && path && !Object.prototype.hasOwnProperty.call(otherProps, 'onSubmit')) {\n\t\totherProps.onSubmit = submitApiRequest;\n\t}\n\tif (htmlId) {\n\t\totherProps.id = htmlId;\n\t}\n\n\treturn (\n\t\t<form {...otherProps}>\n\t\t\t{showMessage && <Message />}\n\t\t\t{children}\n\t\t</form>\n\t);\n}\n\nFormInner.propTypes = {\n\tafterNoSubmit: PropTypes.func,\n\tafterSubmit: PropTypes.func,\n\tchildren: PropTypes.node.isRequired,\n\tclearOnSubmit: PropTypes.bool,\n\tdefaultRow: PropTypes.object,\n\tfilterBody: PropTypes.func,\n\tfilterValues: PropTypes.func,\n\thtmlId: PropTypes.string,\n\tid: PropTypes.string,\n\tmethod: PropTypes.string,\n\tparams: PropTypes.string,\n\tpath: PropTypes.string,\n\tpreventEmptyRequest: PropTypes.bool,\n\trelationshipNames: PropTypes.array,\n\tshowMessage: PropTypes.bool,\n\tsuccessMessageText: PropTypes.string,\n\tsuccessToastText: PropTypes.string,\n};\n\nFormInner.defaultProps = {\n\tafterNoSubmit: null,\n\tafterSubmit: null,\n\tclearOnSubmit: false,\n\tdefaultRow: {},\n\tfilterBody: null,\n\tfilterValues: null,\n\thtmlId: '',\n\tid: '',\n\tmethod: null,\n\tparams: '',\n\tpath: null,\n\tpreventEmptyRequest: false,\n\trelationshipNames: [],\n\tshowMessage: true,\n\tsuccessMessageText: '',\n\tsuccessToastText: '',\n};\n","import React, { useEffect, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormContext from './FormContext';\nimport FormInner from './FormInner';\nimport getNewDirty from './Helpers/FormState';\nimport PropTypes from 'prop-types';\nimport set from 'set-value';\n\nexport default function Form({\n\tchildren,\n\trow,\n\tsetRow,\n\t...otherProps\n}) {\n\tconst [formState, setFormState] = useState({\n\t\tdirty: [],\n\t\tdirtyIncluded: [],\n\t\terrors: {},\n\t\tfiles: {},\n\t\tmessage: '',\n\t\trow,\n\t\tsetRow,\n\t\tsetValues: (fs, e, name, value, afterChange = null, files = null) => {\n\t\t\tlet newDirty = getNewDirty(fs.dirty, name);\n\t\t\tconst newRow = { ...fs.row };\n\t\t\tset(newRow, name, value);\n\n\t\t\tif (afterChange) {\n\t\t\t\tconst additionalChanges = afterChange(e, newRow);\n\t\t\t\tObject.keys(additionalChanges).forEach((key) => {\n\t\t\t\t\tset(newRow, key, additionalChanges[key]);\n\t\t\t\t\tnewDirty = getNewDirty(newDirty, key);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst newFormState = {\n\t\t\t\t...fs,\n\t\t\t\tdirty: newDirty,\n\t\t\t\trow: newRow,\n\t\t\t};\n\t\t\tif (files !== null) {\n\t\t\t\tset(newFormState, `files.${name}`, files);\n\t\t\t}\n\n\t\t\tsetFormState(newFormState);\n\t\t\tif (fs.setRow) {\n\t\t\t\tfs.setRow(newRow);\n\t\t\t}\n\t\t},\n\t});\n\n\tuseEffect(() => {\n\t\tsetFormState({\n\t\t\t...formState,\n\t\t\trow,\n\t\t});\n\t}, [row]);\n\n\treturn (\n\t\t<FormContext.Provider value={{ formState, setFormState }}>\n\t\t\t<FormInner {...otherProps}>\n\t\t\t\t{children}\n\t\t\t</FormInner>\n\t\t</FormContext.Provider>\n\t);\n}\n\nForm.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n\trow: PropTypes.object,\n\tsetRow: PropTypes.func,\n};\n\nForm.defaultProps = {\n\trow: {},\n\tsetRow: null,\n};\n","import React from 'react'; // eslint-disable-line import/no-unresolved\nimport { usePromiseTracker } from 'react-promise-tracker';\n\nconst Spinner = () => {\n\tconst { promiseInProgress } = usePromiseTracker();\n\tif (!promiseInProgress) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<div className=\"formosa-spinner\" />\n\t);\n};\n\nexport default Spinner;\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport { ReactComponent as CloseIcon } from '../svg/x.svg';\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\n\nexport default function Toast({\n\tclassName,\n\tid,\n\tmilliseconds,\n\ttext,\n}) {\n\tconst { formosaState, setFormosaState } = useContext(FormosaContext);\n\tconst removeToast = () => {\n\t\tconst toasts = { ...formosaState.toasts };\n\t\tdelete toasts[id];\n\t\tsetFormosaState({ ...formosaState, toasts });\n\t};\n\treturn (\n\t\t<div className={`formosa-toast ${className}`.trim()} style={{ animationDuration: `${milliseconds}ms` }}>\n\t\t\t<div className=\"formosa-toast__text\">{text}</div>\n\t\t\t<button className=\"formosa-toast__close\" onClick={removeToast} type=\"button\">\n\t\t\t\t<CloseIcon className=\"formosa-toast__close-icon\" height=\"12\" width=\"12\" />\n\t\t\t\tClose\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nToast.propTypes = {\n\tclassName: PropTypes.string,\n\tid: PropTypes.string.isRequired,\n\tmilliseconds: PropTypes.number.isRequired,\n\ttext: PropTypes.string.isRequired,\n};\n\nToast.defaultProps = {\n\tclassName: '',\n};\n","import React, { useContext } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport Toast from './Toast';\n\nexport default function ToastContainer() {\n\tconst { formosaState } = useContext(FormosaContext);\n\treturn (\n\t\t<div className=\"formosa-toast-container\">\n\t\t\t{Object.keys(formosaState.toasts).map((id) => (\n\t\t\t\t<Toast\n\t\t\t\t\tclassName={formosaState.toasts[id].className}\n\t\t\t\t\tkey={id}\n\t\t\t\t\tid={id}\n\t\t\t\t\tmilliseconds={formosaState.toasts[id].milliseconds}\n\t\t\t\t\ttext={formosaState.toasts[id].text}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n","import React, { useEffect, useRef, useState } from 'react'; // eslint-disable-line import/no-unresolved\nimport FormosaContext from './FormosaContext';\nimport PropTypes from 'prop-types';\nimport Spinner from './Spinner';\nimport ToastContainer from './ToastContainer';\n\nexport default function FormContainer({ children }) {\n\tconst [formosaState, setFormosaState] = useState({\n\t\taddToast: null,\n\t\tremoveToast: null,\n\t\ttoasts: {},\n\t});\n\n\tconst formosaStateRef = useRef(formosaState);\n\tformosaStateRef.current = formosaState;\n\n\tuseEffect(() => {\n\t\tif (formosaState.removeToast === null) {\n\t\t\tconst removeToast = (toastId) => {\n\t\t\t\tconst toasts = { ...formosaStateRef.current.toasts };\n\t\t\t\tdelete toasts[toastId];\n\t\t\t\tsetFormosaState({ ...formosaStateRef.current, toasts });\n\t\t\t};\n\t\t\tconst addToast = (text, type = '', milliseconds = 5000) => {\n\t\t\t\tconst toastId = new Date().getTime();\n\t\t\t\tconst toast = {\n\t\t\t\t\tclassName: type ? `formosa-toast--${type}` : '',\n\t\t\t\t\ttext,\n\t\t\t\t\tmilliseconds,\n\t\t\t\t};\n\t\t\t\tconst toasts = {\n\t\t\t\t\t...formosaStateRef.current.toasts,\n\t\t\t\t\t[toastId]: toast,\n\t\t\t\t};\n\t\t\t\tsetFormosaState({ ...formosaStateRef.current, toasts });\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tformosaStateRef.current.removeToast(toastId);\n\t\t\t\t}, milliseconds);\n\t\t\t};\n\t\t\tsetFormosaState({\n\t\t\t\t...formosaStateRef.current,\n\t\t\t\taddToast,\n\t\t\t\tremoveToast,\n\t\t\t});\n\t\t}\n\t\treturn () => {};\n\t});\n\n\treturn (\n\t\t<FormosaContext.Provider value={{ formosaState, setFormosaState }}>\n\t\t\t{children}\n\t\t\t<Spinner />\n\t\t\t<ToastContainer />\n\t\t</FormosaContext.Provider>\n\t);\n}\n\nFormContainer.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react'; // eslint-disable-line import/no-unresolved\n\nexport default function Submit({\n\tclassName,\n\tlabel,\n\tprefix,\n\tpostfix,\n\t...otherProps\n}) {\n\treturn (\n\t\t<div className=\"formosa-field formosa-field--submit\">\n\t\t\t<div className=\"formosa-label-wrapper formosa-label-wrapper--submit\" />\n\t\t\t<div className=\"formosa-input-wrapper formosa-input-wrapper--submit\">\n\t\t\t\t{prefix}\n\t\t\t\t<button\n\t\t\t\t\tclassName={`formosa-button formosa-button--submit ${className}`.trim()}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t{...otherProps}\n\t\t\t\t>\n\t\t\t\t\t{label}\n\t\t\t\t</button>\n\t\t\t\t{postfix}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nSubmit.propTypes = {\n\tclassName: PropTypes.string,\n\tlabel: PropTypes.string,\n\tprefix: PropTypes.node,\n\tpostfix: PropTypes.node,\n};\n\nSubmit.defaultProps = {\n\tclassName: '',\n\tlabel: 'Submit',\n\tprefix: null,\n\tpostfix: null,\n};\n","import './style.scss';\nimport api from './js/Helpers/Api';\nimport field from './js/Field';\nimport form from './js/Form';\nimport formContainer from './js/FormContainer';\nimport formContext from './js/FormContext';\nimport formosaContext from './js/FormosaContext';\nimport input from './js/Input';\nimport label from './js/Label';\nimport message from './js/Message';\nimport submit from './js/Submit';\n\nexport const Api = api;\nexport const Field = field;\nexport const Form = form;\nexport const FormContainer = formContainer;\nexport const FormContext = formContext;\nexport const FormosaContext = formosaContext;\nexport const Input = input;\nexport const Label = label;\nexport const Message = message;\nexport const Submit = submit;\n"],"names":["findIncluded","included","id","type","mainRecord","output","Object","prototype","hasOwnProperty","call","attributes","meta","find","data","deserializeSingle","otherRows","includedRecord","keys","relationships","forEach","relationshipName","Array","isArray","rel","i","deserialize","body","push","cleanSingleRelationship","values","cleanRelationship","map","value","getIncluded","dirtyIncluded","relationshipNames","dirtyKeys","key","startsWith","currentKeys","split","k","get","join","set","length","relData","getBody","method","formState","filterBody","filterValues","dirty","row","cleanKey","replace","includes","JSON","parse","filenames","files","filter","filename","formData","FormData","append","stringify","Api","url","request","delete","post","put","options","headers","getToken","Authorization","trackPromise","fetch","process","env","REACT_APP_API_URL","then","response","ok","json","status","catch","error","SyntaxError","errors","title","window","FORMOSA_TOKEN","setToken","token","React","createContext","message","setRow","setValues","normalizeOptions","labelKey","valueKey","option","label","escapeRegExp","string","slugify","s","toLowerCase","filterByKey","records","escapedValue","record","recordValue","toString","match","RegExp","sort","a","b","aValue","bValue","aPos","indexOf","bPos","localeCompare","Autocomplete","afterAdd","afterChange","clearable","clearButtonAttributes","clearButtonClassName","clearIconAttributes","clearIconHeight","clearIconWidth","clearText","disabled","inputClassName","labelFn","max","name","optionButtonAttributes","optionButtonClassName","optionListAttributes","optionListClassName","optionListItemAttributes","optionListItemClassName","placeholder","removeButtonAttributes","removeButtonClassName","removeIconAttributes","removeIconHeight","removeIconWidth","removeText","wrapperAttributes","wrapperClassName","otherProps","useContext","FormContext","setFilter","useState","isOpen","setIsOpen","highlightedIndex","setHighlightedIndex","optionValues","setOptionValues","selectedValues","useEffect","isSelected","findIndex","filteredOptions","focus","setTimeout","elem","document","getElementById","addValue","newValue","e","target","querySelector","removeValue","index","splice","newSelectedValues","onChange","onFocus","onKeyDown","filterValue","numValues","preventDefault","onKeyUp","onClickOption","getAttribute","onClickRemoveOption","button","tagName","toUpperCase","parentNode","clear","showClear","className","canAddValues","dataValue","trim","undefined","display","CloseIcon","optionClassName","propTypes","PropTypes","func","bool","object","number","oneOfType","isRequired","array","defaultProps","ConditionalWrapper","children","condition","node","any","Input","suffix","checked","props","Checkbox","iconAttributes","iconClassName","iconHeight","iconWidth","CheckIcon","pad","n","width","z","stringToObject","datetimeString","timeZone","year","month","day","hour","minute","second","ampm","Date","toLocaleString","hourCycle","date","substring","parseInt","time","objectToString","datetimeObject","toISOString","Select","hideBlank","CaretIcon","Datetime","ampmAttributes","convertToTimezone","dayAttributes","hourAttributes","minuteAttributes","monthAttributes","secondAttributes","yearAttributes","newValues","am","pm","File","buttonAttributes","buttonClassName","emptyText","imageHeight","imagePrefix","imagePreview","inputWrapperAttributes","inputWrapperClassName","multiple","hasValue","text","setText","srcs","setSrcs","file","URL","createObjectURL","onRemove","src","Password","hideText","showText","tempType","setTempType","togglePassword","Radio","labelAttributes","labelClassName","RadioList","listAttributes","listClassName","listItemAttributes","listItemClassName","required","Search","SearchIcon","Textarea","component","oldDirty","newDirty","HasMany","recordType","removable","setFormState","tempId","setTempId","onAdd","hasNewValue","newRow","getNewDirty","stopPropagation","visibleAttributes","attribute","hiddenAttributes","showHeader","some","isRemovable","rowKey","Component","getInputElement","fieldKey","hasError","Label","htmlFor","note","Field","labelNote","labelPosition","prefix","postfix","inputProps","InputComponent","input","labelComponent","wrapperClassNameList","inputWrapperClassNameList","addToast","removeToast","toasts","Message","hasErrors","FormInner","afterNoSubmit","afterSubmit","clearOnSubmit","defaultRow","htmlId","params","path","preventEmptyRequest","showMessage","successMessageText","successToastText","formosaState","FormosaContext","submitApiRequest","confirm","newState","source","pointer","onSubmit","Form","fs","additionalChanges","newFormState","Spinner","promiseInProgress","usePromiseTracker","Toast","milliseconds","setFormosaState","animationDuration","ToastContainer","FormContainer","formosaStateRef","useRef","current","toastId","getTime","toast","Submit","api","field","form","formContainer","formContext","formosaContext","submit"],"mappings":"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"}